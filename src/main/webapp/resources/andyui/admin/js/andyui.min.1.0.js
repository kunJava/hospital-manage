(function(e){"use strict";var t={};t.UI_ATTR=["an-tabs","an-accordion","an-datagrid","an-combo","an-spinner","an-related","an-datagridPagination","an-checkbox","an-radiobox","an-topnav","an-sidemenu","an-tabsheader","an-scrollbar"];t.UI_LAYOUT=["g-layout","g-max","g-h-max","g-w-max","g-h-auto","g-w-auto"];t.UI_PERFORM=["u-switch"];t.EVENT_CLICK="andy_click";t.COMBO_CHOOSE_LISET="combo_choose_list";t.SETTIME_01=100;t.SETTIME_02=200;t.LAYOUT_IE6=true;t.setZindex=function(e,t){$(e).css("z-index",t)};t.getRandom=function(e){return Math.floor(Math.random()*e+1)};t.setRandomId=function(e,t,a){var n=e.attr("id");var i=a||1e4;if(n==undefined||n==null||n==""){n=t+andy.getRandom(i);e.attr("id",n);e=$("#"+n)}else{e=$("#"+n)}return e};t.setWindow=function(t){var a=e.top.an_element;if(a){e.top.an_element=$.extend(e.top.an_element,t)}else{e.top.an_element=t}};t.getWindow=function(t){return e.top.an_element};t.toWindow=function(){var t=arguments[0];var a=arguments[1];var n=e.top.$("#"+t)[0]||$("#"+t)[0];if(!n){n=e.top.$("iframe").contents().find("#"+t)[0]}n=n.contentWindow;var i=[];if(arguments.length>2){for(var r=2,o=arguments.length;r<o;r++){i.push(arguments[r])}}if(n&&n[a]){n[a].apply(this,i)}else{console.log("don't have this id!")}};t.combo=function(){var e={};var t="";for(var a=0;a<arguments.length;a++){var n=arguments[0];if(typeof n=="object"){e=n}else if(typeof n=="string"){t=n}}var i=$.extend({combo:"",showEvent:"click",hiddenEvent:"mouseleave",isEnable:true,setTime:200,showComplete:function(){},hiddenComplete:function(){}},e);if(t!=""){if(t=="getTouchTarget"){var r=arguments[1];return f(r)}else if(t=="getShowTarget"){var r=arguments[1];return u(r)}else if(t=="hiddenTarget"){var r=arguments[1];return h(r)}}else{var r=i.combo;r.touchTarget=r.find("[combo]").first();r.showTarget;r.children(":gt(0)").each(function(e,t){if($(t).is("[combo='"+r.touchTarget.attr("combo")+"']")){r.showTarget=$(t)}});var o=r.attr("opstion");var l="";if(o){o=o.split(",");for(var a=0;a<o.length;a++){var s=o[a].split(":");if(s[0]=="show"){i.showEvent=s[1]}else if(s[0]=="hidden"){i.hiddenEvent=s[1]}}}var c="";r.enable=i.isEnable;var d=r.touchTarget.parent();if(d.is("[an-combo]")){d=r.touchTarget}if(i.isEnable){console.log("xxxxxxxx");d.unbind(i.showEvent);d.bind(i.showEvent,function(e){if(r.data("isEnable")&&r.data("isText")==false){if(r.hasClass("open")){r.showTarget.css("display","none");r.removeClass("open")}else{if(r.showTarget.is("ul")==false){andy.formlayout()}r.showTarget.css("display","block");r.addClass("open");i.showComplete()}}});r.on(i.hiddenEvent,function(e){c=setTimeout(function(){r.showTarget.css("display","none");r.removeClass("open");i.hiddenComplete();c=""},i.setTime)});r.mouseover(function(e){if(c!=""){clearTimeout(c);c=""}})}}function f(e){return e.find("[combo]").first()}function u(e){var t;var a=e.find("[combo]").first();e.children(":gt(0)").each(function(e,n){if($(n).is("[combo='"+a.attr("combo")+"']")){t=$(n)}});return t}function h(e){var t=u(e);if(t){t.css("display","none")}e.removeClass("open")}};t.fullscreen=t.an_fullscreen=function(){var t=function(){var e=new ActiveXObject("WScript.Shell");if(e!=null){e.SendKeys("{F11}")}};var a=function(e){if(e.requestFullscreen){e.requestFullscreen()}else if(e.mozRequestFullScreen){e.mozRequestFullScreen()}else if(e.webkitRequestFullscreen){e.webkitRequestFullscreen()}else if(e.msRequestFullscreen){e.msRequestFullscreen()}};if(!!e.ActiveXObject||"ActiveXObject"in e){t()}else{a(e.top.document.documentElement)}};t.exitFullscreen=function(){var t=function(){var e=new ActiveXObject("WScript.Shell");if(e!=null){e.SendKeys("{F11}")}};var a=function(){if(e.top.document.exitFullscreen){e.top.document.exitFullscreen()}else if(e.top.document.mozCancelFullScreen){e.top.document.mozCancelFullScreen()}else if(e.top.document.webkitExitFullscreen){e.top.document.webkitExitFullscreen()}};if(!!e.ActiveXObject||"ActiveXObject"in e){t()}else{a()}};t.destroyIframe=function(e){var a,n;try{if(e.contentWindow&&e.contentWindow.$){n=e.contentWindow.$("iframe")}else{n=e.contentWindow.document.getElementsByTagName("iframe")}if(n.length>0){for(a=0;a<n.length;a++){t.destroyIframe(n[a])}}e.src="about:blank";e.contentWindow.document.write("");e.contentWindow.document.clear()}catch(i){}e.parentNode.removeChild(e)};t.arrayFunCall=function(e,t){var a=true;if(e.length>0){var n=0;for(n;n<e.length;n++){if(typeof e[n]==="function"){a=a&&e[n](t)}}}return a};t.extend=function(){var e,t,a,n,i,r,o=arguments[0]||{},l=1,s=arguments.length,c=false;if(typeof o==="boolean"){c=o;o=arguments[1]||{};l=2}if(typeof o!=="object"&&!andy.isFunction(o)){o={}}if(s===l){o=this;--l}for(;l<s;l++){if((e=arguments[l])!=null){for(t in e){a=o[t];n=e[t];if(o===n){continue}if(c&&n&&(andy.isPlainObject(n)||(i=andy.isArray(n)))){if(i){i=false;r=a&&andy.isArray(a)?a:[]}else{r=a&&andy.isPlainObject(a)?a:{}}o[t]=andy.extend(c,r,n)}else if(n!==undefined){o[t]=n}}}}return o};t.enter=function(e,t){var e=e==undefined?document:e;$(e).keydown(function(){if(event.keyCode==13){t()}})};t.unEnter=function(e){$(e).off("keydown")};t.scrollbar=function(){$(".scrollbar").each(function(e,t){var a=$(this).height(),n=$(this).width();$(this).mCustomScrollbar({setWidth:n,setHeight:a,axis:"y",scrollbarPosition:"inside",autoDraggerLength:true,autoHideScrollbar:true,autoExpandScrollbar:true,alwaysShowScrollbar:0,mouseWheel:{enable:true},keyboard:{enable:true},theme:"minimal-dark",scrollInertia:800,live:"on"})})};t.img=function(){$("img[src='#']").each(function(e,t){var a=$(this).width(),n=$(this).height();if($(this).attr("title")==""||$(this).attr("title")==undefined){var i=""}else{var i=$(this).attr("title")+" "}$(this).removeAttr("src").attr("data-src","holder.js/"+a+"x"+n+"?font=Lucida Family&text="+i+a+"×"+n)})};t.url=function(t,a){if(a=="top"){top.location=t}else if(a=="self"){self.location=t}else{e.top.contentWindow.find(a).attr("src",t)}};t.dataurl=function(){$("[data-url]").each(function(){var e=$(this).attr("data-url");var t=$(this).attr("data-callback");$(this).load(e,t)})};t.a=function(){$("[href='#']").each(function(e,t){$(this).attr("href","javascript:void(0)")})};t.checked=function(){$(".an_checkbox").each(function(e,t){var a=$(t),n=a.attr("title"),i="";if(a.attr("type")=="checkbox"&&a.hasClass("switch")==false){i='<label class="i-checks"></label>'}else if(a.attr("type")=="radio"){i='<label class="i-checks"></label>'}else if(a.attr("type")=="checkbox"&&a.hasClass("switch")){i='<label class="i-switch m-r-sm"></label>';n='<span class="textmax">'+a.attr("title")+"</span>"}if(a.parent().is("label")){return false}else{a.wrap(i);a.after(" <i></i>"+n)}var r=a.parent();if(a.hasClass("checkbox-inline")){r.addClass("checkbox-inline")}})};t.closesearch=function(e,t,a){var n=$(e).text();if(n=="高级搜索"){$(a).layout("panel","north").panel("resize",{height:t});$(a).layout("resize");$(e).text("关闭搜索")}if(n=="关闭搜索"){$(a).layout("panel","north").panel("resize",{height:1});$(a).layout("resize");$(e).text("高级搜索")}};t.miniDialog=function(e){var t=$.extend({},{content:""},e);var a=$("body");a.find(".m-alertbox").length>0?null:a.append("<div class = 'm-alertbox t-m'></div>");var n=a.find(".m-alertbox");n.append("<div class = 'minidialog'>"+t.content+"</div>");var i=a.find(".minidialog:last");i.css({background:"#000","background-color":"rgba(0, 0, 0, 0.4)","text-align":"center",padding:"10px","word-wrap":"break-word","margin-top":"10px",color:"#fff"});setTimeout(function(){i.remove()},3e3)};t.setDebug=function(e){t.debug=e};t.getDebug=function(){t.debug?null:t.debug="close";return t.debug};t.startCheck=function(e){var a=t.getDebug();t.costTime=0;t.costTitle=e||"";t.checkHanld=null;a=="open"?t.checkHanld=setInterval(function(){t.costTime+=1},1):null};t.endCheck=function(){var e=t.getDebug();if(e=="open"){t.checkHanld?clearInterval(t.checkHanld):null;t.miniDialog({content:t.costTitle+t.costTime});t.costTime=0;t.costTitle=""}};e.andy=t})(window);(function(e){var t={};t.floatbox=function(e){if(e.is(".top")){if(e.is(":hidden")){e.show();var t=e.outerHeight();e.css("top",0-t-5+"px").animate({top:"0px"},300)}else{var t=e.outerHeight();e.animate({top:0-t-5+"px"},300,function(){e.hide()})}}if(e.is(".bottom")){if(e.is(":hidden")){e.show();var t=e.outerHeight();e.css("bottom",0-t-5+"px").animate({bottom:"0px"},300)}else{var t=e.outerHeight();e.animate({bottom:0-t-5+"px"},300,function(){e.hide()})}}if(e.is(".left")){if(e.is(":hidden")){e.show();var a=e.outerWidth();e.css("left",0-t-5+"px").animate({left:"0px"},300)}else{var t=e.outerWidth();e.animate({left:0-t-5+"px"},300,function(){e.hide()})}}if(e.is(".right")){if(e.is(":hidden")){e.show();var a=e.outerWidth();e.css("right",0-t-5+"px").animate({right:"0px"},300)}else{var t=e.outerWidth();e.animate({right:0-t-5+"px"},300,function(){e.hide()})}}};t.floatact=function(){$("[an-float]").each(function(e,t){var a=$(this).attr("option");if(a=="click"){$(this).click(function(){andy.floatbox($(this))})}else if(a=="leave"){$(this).on("mouseleave",function(){andy.floatbox($(this))})}})};t.perform=function(e){var t=$("body");if(e){t=e}for(var a=0;a<andy.UI_PERFORM.length;a++){var n=andy.UI_PERFORM[a];if(n=="u-switch"){t.find("."+n).each(function(e,t){$(t).switchs()})}}for(var a=0;a<andy.UI_ATTR.length;a++){var n=andy.UI_ATTR[a];t.find("["+n+"]").each(function(e,t){var a=$(t);if(!a.attr(n)){a.attr(n,n);a[n.replace("-","_")]({})}})}andy.img()};t.layout=function(t){if(andy.IE()==6&&andy.LAYOUT_IE6==false){return false}var a=$("body");if(t){a=t}a.each(function(t,a){var n=$(a);var i,r;if(n.parent().is("body")){i=$(e).width();r=$(e).height()}else{var o=n.parent();if(o.is("form")){o=o.parent()}i=o.width();r=o.height()}for(var l=0;l<andy.UI_LAYOUT.length;l++){var s=andy.UI_LAYOUT[l];if(n.hasClass(s)){if(s=="g-layout"){andy.autolayout(n,i,r)}else if(s=="g-max"){andy.gmax(n)}else if(s=="g-h-max"){andy.hmax(n)}else if(s=="g-w-max"){andy.wmax(n)}else if(s=="g-h-auto"){andy.hauto(n)}else if(s=="g-w-auto"){andy.wauto(n)}}}for(var l=0;l<andy.UI_ATTR.length;l++){var s=andy.UI_ATTR[l];var c=n.attr(s);if(c=="an-tabs"){andy.tabsLayout(n)}else if(c=="an-datagrid"){andy.datagridLayout(n)}}if(n.children("div").length>0){n.children("div").each(function(e,t){var a=$(t);if(!a.hasClass("f-hidden")&&!a.hasClass("item")){andy.layout(a)}});andy.formlayout()}else if(n.children("table").length>0){n.children("table").each(function(e,t){andy.layout($(t))});andy.formlayout()}else if(n.children("form").length>0){n.children("form").each(function(e,t){andy.layout($(t))});andy.formlayout()}else if(n.children("iframe").length>0){var d=andy.IE();if(d<=8&&d!=0){var f=n.children("iframe");if(f[0].contentWindow&&f[0].contentWindow.andy){f[0].contentWindow.andy.layout()}}}})};t.activeTarget=function(e){var t=$("body");if(e){t=e}andy.layout(e.parent());andy.perform(e)};t.tabsLayout=function(e){var t=e.parent().height();var a=e.parent().width();var n=e[0];if(n.option&&n.option.fit==false){if(n.option.height>0){t=n.option.height}if(n.option.width>0){a=n.option.width}}var i=e.children(".m-tabs-header");var r=e.children(".m-tabs-content");var o=r.children(".item");var l=parseInt(o.css("padding-left"));var s={head:"m-tabs-header",body:"m-tabs-content",hidden:"f-hidden",layouted:"layouted",item:"item",active:"activate",headTop:"head-top",headLeft:"head-left",headRight:"head-right",headBottom:"head-bottom"};if(typeof l!="number"){l=0}var c=0;var d=0;if(!e.hasClass(s.headTop)&&!e.hasClass(s.headLeft)&&!e.hasClass(s.headRight)&&!e.hasClass(s.headBottom)){c=i.outerHeight()}else if(e.hasClass(s.headTop)){c=i.outerHeight()}else if(e.hasClass(s.headLeft)){d=i.outerWidth()}else if(e.hasClass(s.headRight)){d=i.outerWidth()}else if(e.hasClass(s.headBottom)){c=i.outerHeight()}e.outerHeight(t).outerWidth(a);r.outerHeight(t-c).outerWidth(a-d);var f=r.height();var u=r.width();r.children().each(function(e,t){var a=$(t);a.removeClass(s.layouted);a.outerHeight(f).outerWidth(u);if(a.hasClass(s.active)){andy.layout(a)}})};t.datagridLayout=function(e){var t=e.parent().parent().parent().height();var a=e.parent().parent().parent().width();e.an_tableLayout(e,a,t)};t.autolayout=function(e,t,a){if(e[0]){e.outerWidth(t).outerHeight(a)}var n=e;var i=n.children(".layout-head");var r=n.children(".layout-left");var o=n.children(".layout-right");var l=n.children(".layout-foot");var s=n.children(".layout-center");if(i[0]){i.outerWidth(t)}if(l[0]){l.outerWidth(t)}if(r[0]){var c=0;var d=0;if(i[0]){c=i.height()}if(l[0]){d=l.height()}r.height(a-c-d);r.css("top",c+"px")}if(o[0]){var c=0;var d=0;if(i[0]){c=i.height()}if(l[0]){d=l.height()}o.height(a-c-d);o.css("top",c+"px")}if(s[0]){var f=0;var u=0;var h=0;var v=0;var p=0;var g=0;if(r[0]){f=r.width();p=r.outerWidth()}if(o[0]){u=o.width();g=o.outerWidth()}if(i[0]){h=i.outerHeight()}if(l[0]){v=l.outerHeight()}s.outerWidth(t-p-g);s.outerHeight(a-h-v);s.css({top:h+"px",left:p+"px"})}if(s.children().is("iframe")){var m=s.height();andy.hauto(s.children("iframe"));s.css("overflow","hidden")}};t.getInnerSize=function(e){var t={innerWidth:0,innerHeight:0};var a=e.parent();var n=a.innerHeight();if(a.css("padding-top")){n-=parseInt(a.css("padding-top"))}if(a.css("padding-bottom")){n-=parseInt(a.css("padding-bottom"))}var i=a.innerWidth();if(a.css("padding-left")){i-=parseInt(a.css("padding-left"))}if(a.css("padding-right")){i-=parseInt(a.css("padding-right"))}t.innerWidth=i;t.innerHeight=n;return t};t.hmax=function(e){var t=andy.getInnerSize(e);var a=t.innerHeight;var n=t.innerWidth;var i=e.siblings(".g-h-max").length+1;var r=$(e).siblings(":not(.g-h-max)");var o=r.not(".u-float");var l=o.length;var s=0;for(var c=0;c<l;c++){s+=$(o[c]).outerHeight()}var d=(a-s)%i;var f=Math.floor((a-s)/i);if(e.index()<d){f=f+1}e.outerHeight(f,true).outerWidth(n,true)};t.hauto=function(e){var t=andy.getInnerSize(e);var a=t.innerHeight;var n=e.siblings(".g-h-auto").length+1;var i=$(e).siblings(":not(.g-h-auto)");var r=i.not(".u-float");var o=r.length;var l=0;for(var s=0;s<o;s++){l+=$(r[s]).outerHeight()}var c=(a-l)%n;var d=Math.floor((a-l)/n);if(e.index()<c){d=d+1}e.outerHeight(d,true)};t.wmax=function(e){var t=andy.getInnerSize(e);var a=t.innerHeight;var n=t.innerWidth;var i=e.siblings(".g-w-max").length+1;var r=$(e).siblings(":not(.g-w-max)");var o=r.not(".u-float");var l=o.length;var s=0;for(var c=0;c<l;c++){s+=$(o[c]).outerWidth()}var d=(n-s)%i;var f=Math.floor((n-s)/i);if(e.index()<d){f=f+1}e.outerHeight(a,true).outerWidth(f,true)};t.wauto=function(e){var t=andy.getInnerSize(e);var a=t.innerWidth;var n=e.siblings(".g-w-auto").length+1;var i=$(e).siblings(":not(.g-w-auto)");var r=i.not(".u-float");var o=r.length;var l=0;for(var s=0;s<o;s++){l+=$(r[s]).outerWidth()}var c=(a-l)%n;var d=Math.floor((a-l)/n);if(e.index()<c){d=d+1}e.outerWidth(d,true)};t.gmax=function(e){var t=andy.getInnerSize(e);var a=Math.floor(t.innerHeight);var n=Math.floor(t.innerWidth);e.outerWidth(n,true);e.outerHeight(a,true)};t.panelauto=function(){$(".u-panel.u-datagrid").each(function(e,t){var a=$(t);var n=a.parent().width(),i=a.parent().height();a.height(i);var r=a.outerHeight();var o=a.children(".panel-head");var l=a.children(".panel-body");var s=a.children(".panel-foot");if(l[0]){l.height(r-(o.outerHeight()||0)-(s.outerHeight()||0))}});$(".u-panel.window").each(function(e,t){var a=$(t);var n=parseInt(a.parent().css("padding-top"));var i=parseInt(a.parent().css("padding-bottom"));var r=a.parent().width(),o=a.parent().height()-n-i;a.height(o);var l=a.height();var s=a.children(".panel-head");var c=a.children(".panel-body");var d=parseInt(c.css("padding-top"));var f=parseInt(c.css("padding-bottom"));var u=a.children(".panel-foot");if(c){c.height(l-(s.outerHeight()||0)-(u.outerHeight()||0)-d-f)}})};t.uiLayout=function(e){for(var t=0;t<andy.UI_ATTR.length;t++){var a=andy.UI_ATTR[t];e.children().find("["+a+"]").trigger("layout")}};t.formlayout=function(){$(".m-table-form.inline").find(".u-formitem").each(function(e,t){var a=$(t);var n=a.width(),i=a.parent().height();var r=0;a.parent().parent().find(".u-input-span, .u-input, textarea, .g-combo").each(function(e,t){var a=$(t);if(r==0){r=a.outerHeight()}else if(a.outerHeight()>r){r=a.outerHeight()}});a.parent().siblings().each(function(e,t){var a=$(t);a.height(r)});a.parent().height(r)});$(".u-time-group").find(".u-time-input").each(function(e,t){var a=$(t);andy.inputLayout(a)});$(".u-group").find(".u-input, .g-combo").each(function(e,t){var a=$(t);if(a.parent().hasClass("m-tooltip")){andy.inputLayout(a.parent())}else{andy.inputLayout(a)}})};t.inputLayout=function(e){var t=e.parent().width();var a=0;var n=1;if(e.parent().hasClass("u-time-input")){return false}e.siblings().each(function(a,i){var r=$(i);if(r.hasClass("infobox")==false&&r.hasClass("u-nd")==false&&r.hasClass("u-input")==false&&r.hasClass("u-time-input")==false){if(e.hasClass("u-input")&&r.hasClass("g-combo")){t-=r.outerWidth()}else if(r.hasClass("g-combo")==false&&r.hasClass("u-time-input")==false){t-=r.outerWidth()}}if(e.hasClass("u-input")&&r.hasClass("u-input")||e.hasClass("g-combo")&&r.hasClass("g-combo")||e.hasClass("u-time-input")&&r.hasClass("u-time-input")){n+=1}});e.outerWidth(Math.floor(t/n));if(e.parent().parent().hasClass("g-combo")){var i=andy.combo("getTouchTarget",e);var r=andy.combo("getShowTarget",e);if(i&&r){r.width(e.width())}}};t.shrinkageLayout=function(e){var t=$.extend({element:"",min:0,max:100,direction:"v",isAnimation:true,time:100,layout:true,shrinkageBefore:function(){},callback:function(){}},e);var a=t.element;var n=a.height();var i=a.width();var r=t.min;var o=t.max;var l=t.time;var s=function(){if(t.layout){$.fn.layoutMain()}t.callback(a)};if(!t.isAnimation){l=0}t.shrinkageBefore();if(t.direction=="v"){if(a.height()!=r){a.animate({height:r+"px"},l,s)}else{a.animate({height:o+"px"},l,s)}}if(t.direction=="l"){if(a.width()!=r){a.animate({width:r+"px"},l,s)}else{a.animate({width:o+"px"},l,s)}}};e.andy=$.extend({},true,e.andy,t)})(window);(function(e){e.fn.an_queue=function(t){var a=t.queue;e(this).queue("goqueue",a)};e.fn.an_queue.next=function(t){var a=e(this);if(t){var n=setTimeout(function(){a.dequeue("goqueue")},t)}else{a.dequeue("goqueue")}};e.fn.an_imgLoad=function(t){var a=e.extend({time:4e3,callback:function(){}},t);var n=this,i=0,r=0,o=this.length;n.each(function(){var t=this,a=e(t).attr("date-src"),n=a?a:t.src;var r=new Image;r.onload=function(){r.onload=null;t.src=n;i++};r.src=n});var l=window.setInterval(function(){r++;if(i==o||r*200>=a.time){window.clearInterval(l);a.callback()}},200)};e.fn.layoutMain=function(){if(andy.IE()==6){if(andy.LAYOUT_IE6){andy.layout()}}else{andy.layout()}};e(function(){e.fn.layoutMain();andy.perform();andy.floatact();andy.a()})})(jQuery);$(document).ready(function(){var e=null;var t=andy.SETTIME_02;$(window).resize(function(a){if(e){window.clearTimeout(e)}e=window.setTimeout(function(){$.fn.layoutMain();e=null;if(andy.IE()>7||andy.IE()==0){e=window.setTimeout(function(){$.fn.layoutMain();e=null},t/2)}},t)})});(function(e){var t={},a;t.getBrowser=function(){var t=(navigator.platform||"").toLowerCase(),n=navigator.userAgent.toLowerCase(),i;if(a){return a}a={};function r(e,t){e=(""+e).replace(/_/g,".");t=t||1;e=String(e).split(".");e=e[0]+"."+(e[1]||"0");e=Number(e).toFixed(t);return e}function o(e,t,n){e=a[e];e.name=t;e.version=n;e[t]=n}var l=a.platform={name:e.orientation!=undefined?"iPod":(t.match(/mac|win|linux/i)||["unknown"])[0],version:0,iPod:0,iPad:0,iPhone:0,android:0,win:0,linux:0,mac:0};(i=n.match(/windows ([\d.]+)/))?o("platform","win",r(i[1])):(i=n.match(/windows nt ([\d.]+)/))?o("platform","win",r(i[1])):(i=n.match(/linux ([\d.]+)/))?o("platform","linux",r(i[1])):(i=n.match(/mac ([\d.]+)/))?o("platform","mac",r(i[1])):(i=n.match(/ipod ([\d.]+)/))?o("platform","iPod",r(i[1])):(i=n.match(/ipad[\D]*os ([\d_]+)/))?o("platform","iPad",r(i[1])):(i=n.match(/iphone ([\d.]+)/))?o("platform","iPhone",r(i[1])):(i=n.match(/android ([\d.]+)/))?o("platform","android",r(i[1])):0;var s=a.browser={name:"unknown",version:0,ie:0,firefox:0,chrome:0,opera:0,safari:0,mobileSafari:0,adobeAir:0};(i=n.match(/trident.*; rv\:([\d.]+)/))?o("browser","ie",r(i[1])):(i=n.match(/msie ([\d.]+)/))?o("browser","ie",r(i[1])):(i=n.match(/firefox\/([\d.]+)/))?o("browser","firefox",r(i[1])):(i=n.match(/chrome\/([\d.]+)/))?o("browser","chrome",r(i[1])):(i=n.match(/opera.([\d.]+)/))?o("browser","opera",r(i[1])):(i=n.match(/adobeair\/([\d.]+)/))?o("browser","adobeAir",r(i[1])):(i=n.match(/version\/([\d.]+).*safari/))?o("browser","safari",r(i[1])):0;(i=n.match(/version\/([\d.]+).*mobile.*safari/))?o("browser","mobileSafari",r(i[1])):0;if(l.iPad){o("browser","mobileSafari","0.0")}if(s.ie){if(!document.documentMode){document.documentMode=Math.floor(s.ie)}else if(document.documentMode!==Math.floor(s.ie)){o("browser","ie",r(document.documentMode))}}a.engine={name:"unknown",version:0,trident:0,gecko:0,webkit:0,presto:0};(i=n.match(/trident\/([\d.]+)/))?o("engine","trident",r(i[1])):(i=n.match(/gecko\/([\d.]+)/))?o("engine","gecko",r(i[1])):(i=n.match(/applewebkit\/([\d.]+)/))?o("engine","webkit",r(i[1])):(i=n.match(/presto\/([\d.]+)/))?o("engine","presto",r(i[1])):0;if(a.browser.ie){if(a.browser.ie==6){o("engine","trident",r("4"))}else if(s.ie==7||s.ie==8){o("engine","trident",r("5"))}}return a};t.getBrowser();t.IE=function(){var e=a.browser.ie;var t=parseInt(e,10);return t};t.isChrome=function(){return a.browser.name==="chrome"};t.getBrowserEngine=function(){return a.engine};e.andy=$.extend({},true,e.andy,t)})(window);(function(e){var t={};t.getRandomColor=function(){return"#"+("00000"+(Math.random()*16777215+.5>>0).toString(16)).slice(-6)};t.isSimilarColor=function(e,t,a){this.offsetNum=Math.abs(a);this.offsetNum>255?this.offsetNum=this.offsetNum-256:"";var n=[parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16)];var i=[parseInt(t.substring(1,3),16),parseInt(t.substring(3,5),16),parseInt(t.substring(5,7),16)];for(var r=0;r<n.length;r++){if(Math.abs(n[r]-i[r])>this.offsetNum){return false}}return true};e.andy=$.extend({},true,e.andy,t)})(window);if(typeof JSON!=="object"){JSON={}}(function(){"use strict";var rx_one=/^[\],:{}\s]*$/;var rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g;var rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g;var rx_four=/(?:^|:|,)(?:\s*\[)+/g;var rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;var rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};Boolean.prototype.toJSON=this_value;Number.prototype.toJSON=this_value;String.prototype.toJSON=this_value}var gap;var indent;var meta;var rep;function quote(e){rx_escapable.lastIndex=0;return rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return typeof t==="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var a;var n;var i;var r;var o=gap;var l;var s=t[e];if(s&&typeof s==="object"&&typeof s.toJSON==="function"){s=s.toJSON(e)}if(typeof rep==="function"){s=rep.call(t,e,s)}switch(typeof s){case"string":return quote(s);case"number":return isFinite(s)?String(s):"null";case"boolean":case"null":return String(s);case"object":if(!s){return"null"}gap+=indent;l=[];if(Object.prototype.toString.apply(s)==="[object Array]"){r=s.length;for(a=0;a<r;a+=1){l[a]=str(a,s)||"null"}i=l.length===0?"[]":gap?"[\n"+gap+l.join(",\n"+gap)+"\n"+o+"]":"["+l.join(",")+"]";gap=o;return i}if(rep&&typeof rep==="object"){r=rep.length;for(a=0;a<r;a+=1){if(typeof rep[a]==="string"){n=rep[a];i=str(n,s);if(i){l.push(quote(n)+(gap?": ":":")+i)}}}}else{for(n in s){if(Object.prototype.hasOwnProperty.call(s,n)){i=str(n,s);if(i){l.push(quote(n)+(gap?": ":":")+i)}}}}i=l.length===0?"{}":gap?"{\n"+gap+l.join(",\n"+gap)+"\n"+o+"}":"{"+l.join(",")+"}";gap=o;return i}}if(typeof JSON.stringify!=="function"){meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};JSON.stringify=function(e,t,a){var n;gap="";indent="";if(typeof a==="number"){for(n=0;n<a;n+=1){indent+=" "}}else if(typeof a==="string"){indent=a}rep=t;if(t&&typeof t!=="function"&&(typeof t!=="object"||typeof t.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":e})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(e,t){var a;var n;var i=e[t];if(i&&typeof i==="object"){for(a in i){if(Object.prototype.hasOwnProperty.call(i,a)){n=walk(i,a);if(n!==undefined){i[a]=n}else{delete i[a]}}}}return reviver.call(e,t,i)}text=String(text);rx_dangerous.lastIndex=0;if(rx_dangerous.test(text)){text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})}if(rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})();(function(window){var module={};module.loaddata=function(e,t,a){var n;if(arguments.length===2){a=t;t=undefined}if(e.indexOf("{")>0||e.indexOf("[")>0){n=module.stringToJson(e);a(n);return}$.get(e,t,function(t,n){if(n=="success"){a(t)}else{console.log(e+"|load data is failure!")}}).error(function(e){a(false,e)})};module.postdata=function(e,t,a){if(arguments.length===2){a=t;t=undefined}$.post(e,t,function(t,n){if(n=="success"){a(t)}else{console.log(e+"|load data is failure!")}})};module.getDataByApi=function(e,t,a,n){if(typeof e=="object"){return t(e)}else{}};module.stringToJson=function(string){var datastring=string;if(typeof datastring=="string"){datastring=eval("("+datastring+")")}return datastring};module.jsonToString=function(e){var t=e;if(typeof t=="object"){t=JSON.stringify(t)}return t};module.where=function(e,t){var a=$.grep(e,function(e,a){return JSON.parse(t)});return a};module.stringReplace=function(e,t,a){var n=e;var i;var r=function(e,t){var r;i=null;i=new RegExp(e,"g");if(typeof a=="object"){for(var o=0;o<a.length;o++){if(o==t){r=a[o]}}}else if(typeof a=="string"){r=a}n=n.replace(i,r)};if(typeof t=="object"){for(var o=0;o<t.length;o++){r(t[o],o)}}else{r(t)}return n};module.an_andyData=function(e){var t,a,n,i,r;r=e;t=$("[andy-data-main]");a="andy-data";n="andy-data-type";var i=function(e,t){var a;var n=e.split(".");var i=function(e,t){var a=false;for(var n in e){if(n==t){a=true}}return a};var o=function(e){var t=false;for(var a in e){t=true}return t};var l=function(e,t,a,n){var r=e[t[a]];if(t[a+1]&&i(r,t[a+1])){l(r,t,a+1,n)}else{n(r)}};l(r,n,0,function(e){a=e});return a};t.find("["+a+"]").each(function(e,t){var r=$(t);var o=i(r.attr(a));if(r.attr(n)=="combo"){r.an_combo(o)}else{var l=r;l.is("input")?l.val(o):l.text(o)}})};module.copy=function(e,t){if($("#copytextarea").length==0){$("body").append("<textarea id='copytextarea' style='height:0; border:0; width:0; display:block; opacity:0'></textarea>")}var a=$("#copytextarea");a.text(e);a.select();document.execCommand("Copy");alert(t)};module.execiFrame=function(e){var t=e.execPageUrl||"";var a=e.execData||"";a=andy.jsonToString(a);a=encodeURI(a);t=t+"?exec="+a;if(typeof exec_obj=="undefined"){exec_obj=document.createElement("iframe");exec_obj.name="exec_frame";exec_obj.src=t;exec_obj.style.display="none";document.body.appendChild(exec_obj)}else{exec_obj.src=t}};module.getUrlParam=function(e,t){var a=t||window.location;var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)");var i=a.search.substr(1).match(n);if(i!=null)return decodeURI(i[2]);return null};window.andy=$.extend({},true,window.andy,module)})(window);(function(e,t){var a=function(e,t){var a;if(e==="top"){a=window.top.$("body").find(".loading_bg")}else{a=window.$("body").find(".loading_bg")}a.addClass("fadeOut");setTimeout(function(){a.remove();if(typeof t=="function"){t()}},500)};e.overlay=function(e,a,n,i){var r='<div class="loading_bg '+n+' animated fadeIn">'+a+"</div>";if(e=="top"&&window.top.$("body").find(".loading_bg").length==0){window.top.$("body").append(r)}else if(e=="top"&&window.top.$("body").find(".loading_bg").length==1){window.top.$("body").find(".loading_bg").html(a)}else if(e=="self"&&t("body").find(".loading_bg").length==0){t("body").append(r)}else if(e=="self"&&t("body").find(".loading_bg").length==1){t("body").find(".loading_bg").html(a)}else if(e!="self"&&e!="top"&&t("body").find(".loading_bg").length==0){t(e).append(r);t(e).find(".loading_bg").css({position:"absolute"})}else if(e!="self"&&e!="top"&&t("body").find(".loading_bg").length==1){t(e).find(".loading_bg").html(a)}if(typeof i=="function"){i()}};e.loading=function(t,n,i){var r={};var o='<div class="loading_bg_center"><span class="quarters-loader"></span><p id="loadingtext">'+n+"</p></div>";e.overlay(t,o);if(typeof i=="function"){i()}r.close=function(e){a(t,e)};r.changeText=function(a){var n='<div class="loading_bg_center"><span class="quarters-loader"></span><p id="loadingtext">'+a+"</p></div>";e.overlay(t,n)};return r};e.closeOverlay=function(e){a("top",e)};return e})(andy,$);!function(){function e(e){return e.replace(y,"").replace(w,",").replace(x,"").replace(T,"").replace(k,"").split(_)}function t(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function a(a,n){function i(e){return u+=e.split(/\n/).length-1,d&&(e=e.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),e&&(e=b[1]+t(e)+b[2]+"\n"),e}function r(t){var a=u;if(c?t=c(t,n):o&&(t=t.replace(/\n/g,function(){return u++,"$line="+u+";"})),0===t.indexOf("=")){var i=f&&!/^=[=#]/.test(t);if(t=t.replace(/^=[=#]?|[\s;]*$/g,""),i){var r=t.replace(/\s*\([^\)]+\)/,"");h[r]||/^(include|print)$/.test(r)||(t="$escape("+t+")")}else t="$string("+t+")";t=b[1]+t+b[2]}return o&&(t="$line="+a+";"+t),m(e(t),function(e){if(e&&!p[e]){var t;t="print"===e?w:"include"===e?x:h[e]?"$utils."+e:v[e]?"$helpers."+e:"$data."+e,T+=e+"="+t+",",p[e]=!0}}),t+"\n"}var o=n.debug,l=n.openTag,s=n.closeTag,c=n.parser,d=n.compress,f=n.escape,u=1,p={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},g="".trim,b=g?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],y=g?"$out+=text;return $out;":"$out.push(text);",w="function(){var text=''.concat.apply('',arguments);"+y+"}",x="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+y+"}",T="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(o?"$line=0,":""),k=b[0],_="return new String("+b[3]+");";m(a.split(l),function(e){e=e.split(s);var t=e[0],a=e[1];1===e.length?k+=i(t):(k+=r(t),a&&(k+=i(a)))});var C=T+k+_;o&&(C="try{"+C+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+t(a)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var E=new Function("$data","$filename",C);return E.prototype=h,E}catch(I){throw I.temp="function anonymous($data,$filename) {"+C+"}",I}}var n=function(e,t){return"string"==typeof t?g(t,{filename:e}):o(e,t)};n.version="3.0.0",n.config=function(e,t){i[e]=t};var i=n.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},r=n.cache={};n.render=function(e,t){return g(e,t)};var o=n.renderFile=function(e,t){var a=n.get(e)||p({filename:e,name:"Render Error",message:"Template not found"});return t?a(t):a};n.get=function(e){var t;if(r[e])t=r[e];else if("object"==typeof document){var a=document.getElementById(e);if(a){var n=(a.value||a.innerHTML).replace(/^\s*|\s*$/g,"");t=g(n,{filename:e})}}return t};var l=function(e,t){return"string"!=typeof e&&(t=typeof e,"number"===t?e+="":e="function"===t?l(e.call(e)):""),e},s={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},c=function(e){return s[e]},d=function(e){return l(e).replace(/&(?![\w#]+;)|[<>"']/g,c)},f=Array.isArray||function(e){
return"[object Array]"==={}.toString.call(e)},u=function(e,t){var a,n;if(f(e))for(a=0,n=e.length;n>a;a++)t.call(e,e[a],a,e);else for(a in e)t.call(e,e[a],a)},h=n.utils={$helpers:{},$include:o,$string:l,$escape:d,$each:u};n.helper=function(e,t){v[e]=t};var v=n.helpers=h.$helpers;n.onerror=function(e){var t="Template Error\n\n";for(var a in e)t+="<"+a+">\n"+e[a]+"\n\n";"object"==typeof console&&console.error(t)};var p=function(e){return n.onerror(e),function(){return"{Template Error}"}},g=n.compile=function(e,t){function n(a){try{return new s(a,l)+""}catch(n){return t.debug?p(n)():(t.debug=!0,g(e,t)(a))}}t=t||{};for(var o in i)void 0===t[o]&&(t[o]=i[o]);var l=t.filename;try{var s=a(e,t)}catch(c){return c.filename=l||"anonymous",c.name="Syntax Error",p(c)}return n.prototype=s.prototype,n.toString=function(){return s.toString()},l&&t.cache&&(r[l]=n),n},m=h.$each,b="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",y=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,w=/[^\w$]+/g,x=new RegExp(["\\b"+b.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),T=/^\d[^,]*|,\d[^,]*/g,k=/^,+|,+$/g,_=/^$|,+/;i.openTag="{{",i.closeTag="}}";var C=function(e,t){var a=t.split(":"),n=a.shift(),i=a.join(":")||"";return i&&(i=", "+i),"$helpers."+n+"("+e+i+")"};i.parser=function(e){e=e.replace(/^\s/,"");var t=e.split(" "),a=t.shift(),i=t.join(" ");switch(a){case"if":e="if("+i+"){";break;case"else":t="if"===t.shift()?" if("+t.join(" ")+")":"",e="}else"+t+"{";break;case"/if":e="}";break;case"each":var r=t[0]||"$data",o=t[1]||"as",l=t[2]||"$value",s=t[3]||"$index",c=l+","+s;"as"!==o&&(r="[]"),e="$each("+r+",function("+c+"){";break;case"/each":e="});";break;case"echo":e="print("+i+");";break;case"print":case"include":e=a+"("+t.join(",")+");";break;default:if(/^\s*\|\s*[\w\$]/.test(i)){var d=!0;0===e.indexOf("#")&&(e=e.substr(1),d=!1);for(var f=0,u=e.split("|"),h=u.length,v=u[f++];h>f;f++)v=C(v,u[f]);e=(d?"=":"=#")+v}else e=n.helpers[a]?"=#"+a+"("+t.join(",")+");":"="+e}return e},"function"==typeof define?define(function(){return n}):"undefined"!=typeof exports?module.exports=n:this.template=n}();(function(e,t){var a=function(e){var t,a={};for(t in e){if(e.hasOwnProperty(t)){a[e[t]]=parseInt(t,10)}}return a};e.CODE_MSG_MAPPING={8:"BackSpace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"Caps_Lock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",41:"Select",42:"Print",43:"Execute",45:"Insert",46:"Delete",47:"Help",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Win",92:"Win",96:"KP_0",97:"KP_1",98:"KP_2",99:"KP_3",100:"KP_4",101:"KP_5",102:"KP_6",103:"KP_7",104:"KP_8",105:"KP_9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Num_Lock",145:"Scroll_Lock",187:"+",186:";",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"};e.MSG_CODE_MAPPING=a(e.CODE_MSG_MAPPING);var n={};var i={};var r=function(t){var a,i=t||window.event;if(i.target.localName==="input"&&i&&(i.keyCode==27||i.keyCode==13)){t.target.blur();return}a=e.CODE_MSG_MAPPING[i.keyCode];if(a){a=a.toLowerCase();if(n[a]&&n[a].length>0){n[a].pop()(i);return}}};var o=function(t){var a=t||window.event;var n=e.CODE_MSG_MAPPING[a.keyCode];if(n){n=n.toLowerCase();if(i[n]&&i[n].length>0){i[n].pop()(a);return}}};var l=function(e,a,r,o){r=r||"keyup";a=a.toLowerCase();if(e){t(e)[r](function(e){if(e.keyCode==a){o(e)}})}else{if(r==="keyup"){i[a]=i[a]||[];i[a].push(o)}else if(r==="keydown"){n[a]=n[a]||[];n[a].push(o)}}};var s=function(e,a){if(e){t(e).off(a||"keydown")}};e.addKeyEvent=l;e.removeKeyEvent=s;t(document).keydown(r);t(document).keyup(o)})(andy,$);(function(e,t){var a;var n='<div class="infobox" style="width:{{width}};top:{{top}}; left:{{left}}; bottom:{{bottom}}; right:{{right}}; display: none;">'+'<i class="iconfont {{ip}}">{{itype}}</i>'+'<div class="content">{{content}}</div>'+"</div>";var i={width:"auto",top:0,left:0,bottom:"auto",right:"auto",ip:"b",itype:"&#xe605;",content:"提示",position:"bottom"};var r=function(t){var a,n,r={};if(t.getAttribute("options")){r=e.stringToJson(t.getAttribute("options"))}for(a in i){n=t.getAttribute(a);if(n){r[a]=n}}return r};e.tooltip=function(e,r,o,l,s){var c={},d,f=t.extend({},i,{content:o,position:r});if(!e.parent().is(".m-tooltip")){e.wrap("<div class='m-tooltip "+l+"'></div>")}if(r=="bottom"){f.top=e.outerHeight()+2+"px";f.itype="&#xe7bb;"}else if(r=="top"){f.top="auto";f.bottom=e.outerHeight()+2+"px";f.ip="t";f.itype="&#xe611;"}else if(r=="left"){f.ip="l";f.left=-o.length*18+5+"px";f.itype="&#xe788;"}else if(r=="right"){f.ip="r";f.left=e.outerWidth()+"px";f.width=o.length*18+"px";f.itype="&#xe787;"}a=a||template.compile(n);t(a(f)).insertAfter(e);d=e.next(".infobox");c.show=function(){d.fadeIn(200)};c.hide=function(){d.fadeOut(200)};c.change=function(e){d.find(".content").html(e)};if(s){e.on("mouseover",function(){c.show()});e.on("mouseleave",function(){c.hide()})}return c};e.showTooltip=function(e,a){t(e).next(".infobox").fadeIn(200);if(a){setTimeout(function(){t(e).next(".infobox").fadeOut(2500)},500)}};e.hideTooltip=function(e){t(e).next(".infobox").fadeOut(200)};e.changeTooltip=function(e,a){t(e).next(".infobox").find(".content").html(a)};t(document).ready(function(){t(".tooltip").each(function(a,n){var i=r(n);e.tooltip(t(n),i.position,i.content,i.type,i.isMouseOverShow)})});return e})(andy,$);(function(e,t){"use strict";var a=33+40+7-3,n=9e3,i="systemstage",r={"成功":{title:"成功!",icon:"&#xe700;",iconclass:"f-color-success",buttons:[{text:"确定",cls:"success"}]},"询问":{title:"信息",icon:"&#xe744;",iconclass:"f-color-info",buttons:[{text:"确定",cls:"success"},{text:"取消"}]},"错误":{title:"错误!",icon:"&#xe701;",iconclass:"f-color-danger",buttons:[{text:"返回"}]},"禁止":{title:"禁止!",icon:"&#xe702;",iconclass:"f-color-danger",buttons:[{text:"返回"}]},"警告":{title:"警告!",icon:"&#xe6ff;",iconclass:"f-color-warning",buttons:[{text:"返回"},{text:"继续"}]},"提示":{title:"提示!",icon:"&#xe624;",iconclass:"f-color-info",buttons:[{text:"确定",cls:"success"},{text:"取消"}]},"default":{title:"提示!",icon:"&#xe624;"}},o=function(e){var a,n,i;if(e){if(typeof e==="object"){i=t(e).parents(".u-panel");if(i.length===0){i=undefined}}if(typeof e==="string"){a=e.indexOf("#")>-1?e:"#"+e;n=window.top.$(a);i=n[0]?n:window.top.$("iframe").contents().find(a)}}return i},l=function(t,a,n){var i=e.IE();if(a&&(!(i<=8)||i===0)){t.addClass(a);window.setTimeout(function(){t.removeClass(a);if(n){n(t)}},500)}else{if(n){n(t)}}},s=function(a,n,i){var r,o,l,s,c,d="",f="",u="",h="";s=window.top.$.data(a[0],"an_dialog").options;r=a.parent()[0];c=t(r).scrollTop();if(e.IE()>0){c=r.ownerDocument.documentElement.scrollTop||window.pageYOffset||r.ownerDocument.body.scrollTop}o=a.parent().height();l=a.parent().width();f=n||(l-a.width())/2;d=i||(o-a.height())/2+c;if(s.location){if(s.location.indexOf("left")!==-1){f=5}if(s.location.indexOf("top")!==-1){d=5+c}if(s.location.indexOf("right")!==-1){u=5;f=""}if(s.location.indexOf("bottom")!==-1){d=c+r.clientHeight-5-a.eq(0).height()}}a.eq(0).css({left:f,top:d,right:u,bottom:h})},c=function(e,n,i){var r,o,l,s,c,d,f,u;try{u=window.top.$.data(e[0],"an_dialog");if(u&&u.options){r=u.options;c=e.next(".m-panel-mask");d=e.find(".panel-body");o=e.parents("html")[0]||window.top;l=t(o).height();s=t(o).width();f=r.buttons&&r.buttons.length>0?a:a-40;if(arguments.length===2&&n==="max"){e.height(l-20);e.width(s-10);d.height(l-f);d.width(s-10)}else{if(i!==undefined){i=i>l?l-10:i;e.height(i);d.height(i===""?i:i-f)}if(n!==undefined){n=n>s?s-10:n;e.width(n);d.width(n===""?n:n-10)}}c.height(o.scrollHeight);c.width(o.scrollWidth)}}catch(h){}},d=function(a){var n,i,r,s;if(a){n=a.next(".m-panel-mask");try{r=window.top.$.data(a[0],"an_dialog").options}catch(c){throw"can not close this dialog!"}if(!r.onBeforeClose||r.onBeforeClose&&r.onBeforeClose(r)){l(a.eq(0)||a,r.aniClose,function(){i=a.nextAll('div[dialogMoveRect="true"]');if(i){i.remove()}a.hide();n.hide();if(r.onClose){r.onClose(r)}if(r.parent){s=o(r.parent);if(s){d(s)}}if(r.url){e.destroyIframe(a.find("iframe")[0])}if(r.div){t("#dailogreplace"+r.id).replaceWith(a.find(".panel-body").children())}a.remove();n.remove()})}}},f=function(){var a,i={},r,o,l,d,f,u,h,v=false,p={},g={},m={},b,y,w,x=[{cls:"move",coe:[1,1,0,0]},{cls:"n-resize",coe:[0,1,0,-1]},{cls:"ne-resize",coe:[0,1,1,-1]},{cls:"e-resize",coe:[0,0,1,0]},{cls:"se-resize",coe:[0,0,1,1]},{cls:"s-resize",coe:[0,0,0,1]},{cls:"sw-resize",coe:[1,0,-1,1]},{cls:"w-resize",coe:[1,0,-1,0]},{cls:"nw-resize",coe:[1,1,-1,-1]}];u=window.top.$('<div dialogMoveRect="true" style="border: 1px dashed dodgerblue; position: absolute; "></div>');r=function(){v=false;if(l){l.parent("body").css("cursor","")}f.removeClass("an_dialog_dragLayer");u.remove()};d=function(){var t,a=window.top.$.data(l[0],"an_dialog").options;var n=u.width();var i=u.height();var o=u.offset().left;var d=u.offset().top;if(n!=l.outerWidth()||i!=l.outerHeight()){a.onResize(n,i);c(l,n,i)}if(o!=l.offset().left||d!=l.offset().top){a.onMove(o,d);if(e.IE()===6){t=l.parents("html")[0]||window.top;d=d-t.scrollTop}s(l,o,d)}r()};w=function(e){var a=e.target||e.srcElement;if(v){return}b="";if(a.getAttribute("an_dialog_drag")){l=t(a).parents(".m-panel");if(a.getAttribute("an_dialog_drag")==="true"){b=0}}else if(a.getAttribute("an_dialog_resize")){l=t(a)}else if(a.getAttribute("an_dialog")){l=t(a).parents(".m-panel")}else{l=undefined}if(l){if(l.attr("an_dialog_resize")==="true"){if(l.position().top<e.y&&e.y<l.position().top+5){b=1}if(l.position().left+l.outerWidth()>e.x&&e.x>l.position().left+l.outerWidth()-5){b=b?2:3}if(l.position().top+l.outerHeight()>e.y&&e.y>l.position().top+l.outerHeight()-5){b=b?4:5}if(l.position().left<e.x&&e.x<l.position().left+5){b=b===1?8:b===5?6:7}}f=l.next();l.css("cursor",b?x[b].cls:"")}return b};o=function(e){if(v){d()}w(e);if(l&&b!==""){if(e.preventDefault){e.preventDefault()}v=true;p.x=g.x=e.clientX;p.y=g.y=e.clientY;u.css("left",l.offset().left);u.css("top",l.offset().top);u.css("z-index",n+a.winIndex*4+3);u.width(l.outerWidth());u.height(l.outerHeight());l.parent("body").append(u);l.parent("body").css("cursor",x[b].cls);f.addClass("an_dialog_dragLayer")}};h=function(e){var t,a,n;if(!v){w(e)}else{m.x=e.clientX-g.x;m.y=e.clientY-g.y;t=x[b].coe;a=u.offset().left+m.x*t[0];n=u.offset().top+m.y*t[1];a=a<=0?.1:a;a=a>u.parent().width()-u.width()?u.parent().width()-u.width():a;n=n<=0?.1:n;u.css("left",a);u.css("top",n);u.width(u.width()+m.x*t[2]);u.height(u.height()+m.y*t[3]);if(a<=.1||n<=.1||a>=u.parent().width()-u.width()){if(l.offset().left>.1&&l.offset().top>.1&&l.offset().left<u.parent().width()-u.width()){d();return}}g.x=e.clientX;g.y=e.clientY}};y=function(e){if(v===true&&l&&x[b]){if(e.preventDefault){e.preventDefault()}d()}};i.bindEvent=function(e){a=e;if(a.addEventListener){a.addEventListener("mousedown",o);a.addEventListener("mousemove",h);a.addEventListener("mouseup",y)}else if(a.attachEvent){a.document.attachEvent("onmousedown",o);a.document.attachEvent("onmousemove",h);a.document.attachEvent("onmouseup",y)}else{throw"can not add dialogform event listener"}};i.unbindEvent=function(e){a.removeEventListener("mousedown",o);a.removeEventListener("mousemove",h);a.removeEventListener("mouseup",y)};return i};e.dialoghDragInit=f;t.fn.an_dialog=function(a,o){var f,u;if(typeof a==="string"){u=t.fn.an_dialog.methods[a];if(u){return u(this,o)}throw"The method of"+a+"is undefined";return false}f=t.extend({},t.fn.an_dialog.defaults,a);return this.each(function(){var o,u,h,v,p,g,m,b,y,w;if(f.locMyself){o=window}else{h=window.top.document.getElementById(i);o=h&&h.contentWindow.$?h.contentWindow:window.top}if(f.massage){f.width=f.width||300;f.height=f.height||150}else{f.width=f.width||800;f.height=f.height||600}v=function(a){var n,i,r,d;d=null;n=a.next(".m-panel-mask");if(f.maxSize){c(a,"max")}else{c(a,f.width,f.height)}s(a);r=o.$("body").find("[an_dialog].m-panel");if(r.length>1){a[0].style.left=parseInt(a[0].style.left,10)+(r.length-1)*15+"px";a[0].style.top=parseInt(a[0].style.top,10)+(r.length-1)*15+"px"}w(a,o.winIndex);if(e.IE()>7&&t(":focus").length>0){t(":focus").blur()}a.eq(0).show();if(f.modalval){n.addClass("m-panel-maskshow")}t(o).resize(function(e){if(d==null){d=setTimeout(function(){c(a);d=null},100)}});l(a.eq(0),f.aniOpen,f.onOpen);if(!f.url&&!f.data){f.onLoad(a)}};w=function(e,t){var a;a=e.next(".m-panel-mask");e.css("z-index",n+t*4+2);a.css("z-index",n+t*4)};b=function(e){var a,n=e&&e.data||u;a=window.top.$.data(n[0],"an_dialog").options;if(e.target.className.indexOf("restore")>-1){t(e.target).removeClass("tool-restore");t(e.target).addClass("tool-max");c(n,e.target.getAttribute("reW"),e.target.getAttribute("reH")||"")}else{t(e.target).addClass("tool-restore");t(e.target).removeClass("tool-max");e.target.setAttribute("reW",a.width||n.width());e.target.setAttribute("reH",a.height||n.height());c(n,"max")}s(u)};y=function(e){var t;e.delegate(".tool-close","click",e,function(e){d(e.data)});if(f.maximizable){e.delegate(".tool-max","click",e,b);e.delegate(".tool-restore","click",e,b)}e.delegate(".m-panel-mask","click",e,d);if(f.buttons){for(t=0;t<f.buttons.length;t++){if(f.massage&&r[f.massage.type]&&r[f.massage.type].buttons){e.callback=f.massage.callback;f.buttons[t].handler=f.buttons[t].handler||function(e){if(e.data.callback){e.data.callback(e.data,e)}d(e.data)}}e.delegate("button[bt_index="+t+"]","click",e,f.buttons[t].handler)}}};m=function(){var e,n,i,l,s,c;c='<div style="position: absolute; " an_dialog="true" an_dialog_resize = '+f.resizeable+' class="animated m-panel window'+f.cls+'" style="display: none">'+'<div an_dialog="true" class="panel-head">'+'<div class="m-toolbar '+(f.draggable?"an_dialog_drag":"")+'" an_dialog_drag = '+f.draggable+">"+'<div class="item"><div class="title">'+'<i class="iconfont">#icon#</i><span id="title">#title#</span>'+"</div></div>"+'<div an_dialog="true" class="item f-right tool-close">#tools#'+'<div class="u-group" >'+'<button type="button" class="u-btn sm texture"><i class="iconfont " title="关闭">&#xe602;</i></button>'+"</div>"+"</div>"+"</div></div>"+"#content#"+"#bottons#</div>"+'<div class="m-panel-mask"></div>';s=function(){var e;if(f.massage){e=f.massage.title||r[f.massage.type].title}return e||f.title};n=function(){var e="";if(f.icon){e='<i class="iconfont "'+f.icon+'">&#xe62c;</i>'}return e};e=function(){var e="",t,n='<div style="padding:0px;" class="panel-h-bot"><button type="button" class="u-btn sm texture"><i class="iconfont tool-#type#"" href="javascript:void(0)" #attr#> #icon# </i></button></div>';if(f.collapsible){e+=n.replace("#type#","collapse").replace("#tip#","收起").replace("#icon#","")}if(f.minimizable){e+=n.replace("#type#","min").replace("#tip#","最小化").replace("#icon#","")}if(f.maximizable){if(f.maxSize){t=n.replace("#type#","restore").replace("#tip#","还原").replace("#icon#","&#xe60c;")}else{t=n.replace("#type#","max").replace("#tip#","最大化").replace("#icon#","&#xe616;")}e+=t.replace("#attr#","reW = "+a.width+" reH ="+a.height)}return e};i=function(){var e="",t,a='<button  bt_index="#index#" class="#class#" > #text# #icon#</button>';if(f.massage){f.buttons=f.buttons||r[f.massage.type].buttons}if(f.buttons){e='<div class="panel-foot">';for(t=f.buttons.length-1;t>=0;t--){e+=a.replace("#index#",t).replace("#class#","u-btn sm "+f.buttons[t].cls||"texture").replace("#text#",f.buttons[t].text||"");if(f.buttons[t].icon){e=e.replace("#icon#",'<i class="iconfont"> + args.buttons[i].icon </i>')}else{e=e.replace("#icon#","")}}e+="</div>"}return e};l=function(){var e,a,n;if(f.url){e='<iframe frameborder="0" an_dialog="true" src = #content# class="panel-body"></iframe><div style="z-index: 1;position: absolute;left:50%;top:50%" class="loading_bg_center"><span class="quarters-loader"></span></div>';a=f.url}else{e='<div an_dialog="true" class="panel-body">#content#</div>';if(f.data){a='<div class="loading_bg_center"><span class="quarters-loader"></span></div>';t.ajax({url:f.data,success:function(t){f.onLoad(u);e=u.find(".loading_bg_center").replaceWith(t)}})}else{if(f.massage){a='<div class="panel-massage-box"><i class="iconfont '+r[f.massage.type].iconclass+' panel-massage-icon">'+r[f.massage.type].icon+"</i>"+'<div class="panel-massage">'+f.massage.content+"</div></div>"}if(f.html){a=f.html}if(f.text){a=f.text}if(f.div){a=""}if(f.mediaBox){a=t(o.document).an_mediabox("get",f.mediaBox)}}}e=e.replace("#content#",a);return e};c=c.replace("#title#",s());c=c.replace("#icon#",n());c=c.replace("#tools#",e());c=c.replace("#content#",l());c=c.replace("#bottons#",i());return c};if(!o.$){throw"错误！ "+o.name+"页面没有jquery!";return}if(f.id&&o.$("body").find("#"+f.id).length>0){o.$("body").find("#"+f.id).addClass("wobble");return false}u=o.$(m());if(f.div){p=u.find(".panel-body");p.append(f.div.clone(true));f.div.replaceWith("<div id='dailogreplace"+f.id+"'></div>")}if(f.url){p=u.find(".panel-body")[0];g=function(){u.find(".loading_bg_center").remove();p.contentWindow.dialog=u;if(p.contentWindow.onresize){p.contentWindow.onresize()}if(p.contentWindow.dialogReady){p.contentWindow.dialogReady(u,f)}f.onLoad()};if(p.attachEvent){p.attachEvent("onload",g)}else{p.addEventListener("load",g)}}o.winIndex=o.winIndex||1;f.id=f.id||(f.locMyself?"win_":"rootWin_")+o.winIndex;u.eq(0).attr("id",f.id);u.find("iframe").attr("dialogid",f.id);u.attr({aniClose:f.aniClose});if(f.massage){u.eq(0).addClass("an_d_massage")}y(u);if(f.onBeforeOpen(u)){o.$("body").append(u);o.winIndex++;window.top.$.data(o.$("#"+f.id)[0],"an_dialog",{options:f});v(u);if(!o.hasDialogHandler){o.andy.dialoghDragInit().bindEvent(o);o.hasDialogHandler=true}}})};t.fn.an_dialog.methods={options:function(e){var t=window.top.$.data(e[0],"an_dialog").options;return t},getOptions:function(e){var t=window.top.$.data(e[0],"an_dialog").options;return t},move:function(e,t){s(e,t.left,t.top)},resize:function(e,t){c(e,t.width,t.height)},find:function(e,t){return o(t)},doCPageFun:function(e,t){if(e.attr("an_dialog")==="true"){e.find("iframe")[0].contentWindow[t.funName](t.argus)}},close:function(e,t){var a;if(e.attr("an_dialog")==="true"){a=e}else if(t){a=o(t)}if(a){d(a)}}};t.fn.an_dialog.defaults={title:"窗口",width:0,height:0,reloadid:"datagrid",modalval:true,source:this,aniOpen:"fadeInDown",aniClose:"zoomOut",locMyself:false,maximizable:false,draggable:true,resizeable:false,collapsible:false,closable:true,cls:"",onLoad:function(){},onBeforeOpen:function(){return true},onOpen:function(){},onBeforeClose:function(){return true},onClose:function(){return true},onResize:function(e,t){},onMove:function(e,t){}}})(andy,jQuery);(function(e){e.fn.extend({an_datagrid:function(){var t={};var a="";var n=arguments[0];typeof n=="object"?t=n:a=n;var i=e.extend({table:"",bodyUrl:"",urlParams:{},ajaxType:"get",lockTable:{lockRow:0,lockColumn:0},width:"100%",height:"100%",checkEnable:true,checkbox:"",radio:"",addColumns:"",coverColumns:"",setRowHtml:"",setTrId:"",sortList:"",onSortClick:function(){},onLoadComplete:function(){},onClickRow:function(){},onDblClickRow:function(){},onClickCell:function(){},onDblClickCell:function(){}},t);var r=i.table;var o=e(this);if(i.table==""){o=andy.setRandomId(o,"datagrid_");i.table=o.attr("id");r=i.table}var l=o.parent();var s=l.height();var c=l.width();var d=o.attr("options");var f="";if(d){d="{"+d+"}";d=andy.stringToJson(d);for(var u in d){if(d[u]=="true"){i[u]=true}else if(d[u]=="false"){i[u]=false}else{i[u]=d[u]}}}i.table=o;var h="EVENT_LOCK";var v="EVENT_GET_JSON";var p="EVENT_GET_ROW_DATA";var g="EVENT_ADD_ROW";var m="EVENT_GET_ROW";var b="EVENT_SET_ROW";var y="EVENT_TABLE_VIEW";var w="EVENT_ADD_COLS";var x="EVENT_COVER_COLS";var T="EVENT_GET_CHECKED";var k=false;if(i.height!="100%"||i.height>0){s=i.height}else if(i.height=="100%"){}if(i.width!="100%"||i.width>0){c=i.width}else if(i.width=="100%"){}if(a!=""){if(a=="locakTable"){var _={lockRow:0,lockColumn:0};var C=arguments[1];_=e.extend(_,C);o.trigger(h,_)}else if(a=="tableView"){var E=arguments[1];o.trigger(y,E)}else if(a=="getHeadJson"){var I=[];var o=arguments[1];var $=function(e){var t=0;var a=0;var n=function(e){for(var i=0;i<e.length;i++){var r=e[i];if(r.children.length>0){r.jsonParentIndex=a;n(r.children);a+=1}else{r.jsonIndex=t;t+=1}}};n(e,t)};var S=function(e){var t="open";if(e.hasClass("f-hidden")){t="close"}return t};var D=function(e,t){var a=e-1;var n=0;var t=t;var i="";var r=function(e){var o=0;var l=0;for(var s=0;s<e.length;s++){var c=e[s];if(a==n){if(c.rowspan){}else{if(c.maxColspan){o+=parseInt(c.maxColspan)}else{o+=1}for(var d=l;d<o;d++){if(t==d){i=c;break}}l+=1}}else{if(c.children.length>0){n=parseInt(c.layer);r(c.children)}}if(i!=""){break}}};r(I);return i};o.find("thead tr").each(function(t,a){e(a).find("th").each(function(a,n){var i=e(n);var r={id:t+"_"+a,name:i.html(),view:S(i),th_index:a,layer:t,colspan:i.attr("colspan"),maxColspan:i.attr("maxColspan"),rowspan:i.attr("rowspan"),children:[]};if(t==0){I.push(r)}else{var o=D(t,a);if(o!=""){o.children.push(r)}}})});$(I);return I}else if(a=="addColumns"){var N={};N={data:arguments[1]};o.trigger(w,N)}else if(a=="coverColumns"){var N={};N={data:arguments[1]};o.trigger(x,N)}else if(a=="getChecked"){var A=arguments[1];o.trigger(T,A)}else if(a=="addRow"){var I=arguments[1];var A=arguments[2];var j={data:I,callback:A};o.trigger(g,j)}else if(a=="getRow"){var O=arguments[1];var A=arguments[2];var j={id:O,callback:A};o.trigger(m,j)}else if(a=="getAllRowData"){var A=arguments[1];o.trigger(p,A)}else if(a=="setRow"){var O=arguments[1];var I=arguments[2];var R=arguments[3];var j={id:O,data:I,value:R};o.trigger(b,j)}}else{var V=e("<div style = 'position:relative;clear:both;'></div>");if(c!="100%"){if(i.lockTable.lockRow==0){V=e("<div style = 'position:relative;clear:both;overflow-x:auto;height:100%;'></div>")}else{V=e("<div style = 'position:relative;clear:both;overflow-x:auto;overflow-y:hidden;height:100%;'></div>")}}o.wrap(V);o.data("options",i);var H=function(){o.bind(y,function(t,a){var n=e("#"+r);n.an_tableSetView(n,a);var i=n.parent().parent().parent().height();var o=n.parent().parent().parent().width();n.an_tableLayout(n,o,i)});i.table.bind(h,function(t,a){var n=e("#"+r);n.an_tableLock({table:r,lockRow:a.lockRow,lockColumn:a.lockColumn,width:c,height:s});if(a.lockRow>0){n.parent().parent().css("overflow-y","hidden")}var i=n.parent().parent().parent().height();var o=n.parent().parent().parent().width();n.an_tableLayout(n,o,i)});i.table.bind(w,function(e,t){o.an_addColumns({table:r,columns:t.data})});if(i.addColumns!=""){o.an_addColumns({table:r,columns:i.addColumns})}i.table.bind(x,function(e,t){if(typeof t=="string"){t=andy.stringToJson(t)}o.an_coverColumns({table:r,columns:t.data})});if(i.coverColumns!=""){o.an_coverColumns({table:r,columns:i.coverColumns})}o.bind(g,function(e,t){var a=o.data("options");o.an_addRow(a,t)});o.bind(m,function(e,t){o.an_getRow(t)});o.bind(p,function(e,t){o.an_getAllRowData(t)});o.bind(T,function(t,a){var n=e.extend(true,{},i,{callback:a});if(n.checkbox!=""||n.radio!=""){o.an_getChecked(n)}});o.bind(b,function(e,t){o.an_setRow(t)});var t=i.lockTable.lockRow;var a=i.lockTable.lockColumn;if(k&&o.find("thead").children().length>0){t=o.find("thead").children().length;i.lockTable.lockRow=t}if(t>=1||a>=1){o.an_tableLock({table:r,lockRow:t,lockColumn:a,width:c,height:s})}if(i.sortList!=""){o.an_creatSortBtn()}var n=o.parent().parent().parent().height();var l=o.parent().parent().parent().width();o.an_tableLayout(o,l,n);o.on("click",function(t){var a=e(t.target);var n=a.parent();i.onClickRow(n.index(),n);i.onClickCell(a.index(),a)});o.on("dblclick",function(t){var a=e(t.target);var n=a.parent();i.onDblClickRow(n.index(),n);i.onDblClickCell(a.index(),a)})};if(i.bodyUrl!=""){o.an_creatDataList(i,function(){H()})}else{H()}}},an_addColumns:function(t){var a=e(this);var n=a.find("tbody");var i=a.find("thead");if(t.columns&&t.columns.length>0){for(var r in t.columns){var o=t.columns[r];var l=o.field;var s=o.formatter;i.find("[field]").each(function(t,a){if(e(a).attr("field")==l){n.find("tr").each(function(a,n){e(n).find("td").each(function(a,n){if(a==t){e(n).append(s)}})})}})}}},an_coverColumns:function(t){var a=e(this);var n=a.find("tbody");var i=a.find("thead");if(t.columns&&t.columns.length>0){for(var r in t.columns){var o=t.columns[r];var l=o.field;var s=o.formatter;i.find("[field]").each(function(t,a){if(e(a).attr("field")==l){n.find("tr").each(function(a,n){e(n).find("td").each(function(a,n){if(a==t){e(n).empty();e(n).append(s)}})})}})}}},an_getChecked:function(t){var a=e(this);var n=a.find("tbody");var i=a.find("thead");var r="";var o="";var l=[];if(t.checkbox!=""){r=t.checkbox}else if(t.radio!=""){r=t.radio}i.find("[field]").each(function(t,a){if(e(a).attr("field")==r){n.find("tr").each(function(a,n){if(e(n).hasClass("current")){l.push(e(n).data("tr_data"));e(n).find("td").each(function(a,n){if(a==t){if(o==""){o+=e(n).text()}else{o+=","+e(n).text()}}})}})}});t.callback(o,l)},an_addRow:function(t,a){var n=e(this);var i=n.find("tbody");var r=n.find("thead");var o=t.setTrId;if(o==""){o=n.attr("id")}var l=i.find("tr").last().attr("id");var s=(new Date).getTime();var c=o+s;var d="<tr id='"+c+"'>";var f="";var u=a.data;var h="";if(t.setRowHtml!=""){f=t.setRowHtml(c,u);d+=f.html;d+="</tr>";i.append(d);e("#"+c).data("tr_data",u);if(f.callback){f.callback(c,u,f.html)}andy.perform(e("#"+c))}if(a.callback){a.callback(u,c,f.html)}},an_getRow:function(t){var a=e(this);var n=a.find("tbody");var i=a.find("thead");if(t.callback){t.callback(e("#"+t.id).data("tr_data"))}},an_getAllRowData:function(t){var a=e(this);var n=a.find("tbody");var i=a.find("thead");var r=[];n.find("tr").each(function(t,a){r.push(e(a).data("tr_data"))});if(t){t(r)}},an_setRow:function(t){var a=e(this);var n=a.find("tbody");var i=a.find("thead");var r=t.id;var o=n.find("#"+r);if(typeof t.data=="string"){var l=o.data("tr_data");l[t.data]=t.value;o.data("tr_data",l)}else if(typeof t.data=="object"){o.data("tr_data",t.data)}},an_creatDataList:function(t,a){var n=e(this);var i=n.attr("id");var r=t.bodyUrl;var o=t.ajaxType;var l=function(e){var t=false;for(var a in e){if(a=="children"){t=e[a]}}return t};var s=function(a){var r=n.find("tbody");var o=n.find("thead");var s=a.rows;var c=a.rows_align||false;var d=a.rows_class;var f=[];var u=[];var h=function(t){var a="";o.find("th").each(function(n,i){if(e(i).attr("field")==t&&e(i).hasClass("f-hidden")){a=" f-hidden"}});return a};var v=function(){var e="";if(f.length>0){for(var t=0;t<f.length;t++){for(var a in u){if(a==f[t]){e+=u[a]}}if(f[t]=="checkbox"){e+="<td><input type='checkbox'></td>"}else if(f[t]=="radio"){e+="<td><input type='radio' name = 'radio_"+n.attr("id")+"'></td>"}}}else{for(var a in u){e+=u[a]}}return e};o.find("[field]").each(function(t,a){var n=e(a);f[t]=n.attr("field")});var p="";var g=function(e,t){for(var a=0;a<e.length;a++){var n="<tr style = 'display:none;'>";var i="";var r=e[a];for(var o in r){var s="";var f="";if(c&&c[0][o]){s=c[0][o]}if(d&&d[0][o]=="tree"){var m=l(r);if(typeof m==="string"){f="group n"+(t+1);A="childrenUrl = "+m}else if(typeof m==="object"){f="group n"+(t+1);g(m,t+1)}else{f="node n"+(t+1)}}var b=h(o);if(b!=""){f+=b}if(o!="children"){u[o]="<td align = '"+s+"' class = '"+f+"' "+A+">"+r[o]+"</td>"}}i=v();n+=i;n+="</tr>";p+=n;n="";u=[]}};var m="";var b=function(e,t){for(var a=0;a<e.length;a++){var n="<tr style = 'display:none;'>";var i="";var r=e[a];for(var o in r){var s="";var f="";if(c&&c[0][o]){s=c[0][o]}if(d&&d[0][o]=="tree"){var b=l(r);if(typeof b==="string"){f="group n"+(t+1);A="childrenUrl = "+b}else if(typeof b==="object"){f="group n"+(t+1);g(b,t+1)}else{f="node n"+(t+1)}}var y=h(o);if(y!=""){f+=y}if(o!="children"){u[o]="<td align = '"+s+"' class = '"+f+"' "+A+">"+r[o]+"</td>"}}i=v();n+=i;n+="</tr>";m+=n;m+=p;n="";p="";u=[]}};var y=t.setTrId;if(y==""){y=i}for(var w=0;w<s.length;w++){var x=new Date;var T=y+Date.parse(x)+w;var k="<tr id='"+T+"'>";var _="";var C=s[w];var E="";var I="";if(t.setRowHtml!=""){var $=t.setRowHtml(T,C);_=$.html;E=$.callback||function(){}}else{for(var S in C){var D="";var N="";var A="";if(c&&c[0][S]){D=c[0][S]}if(d&&d[0][S]=="tree"){var j=l(C);if(typeof j==="string"){N="group n1";A="childrenUrl = "+j}else if(typeof j==="object"){N="group n1";b(j,1)}else{N="node n1"}}else if(d){N=d[0][S]}var O=h(S);if(O!=""){N+=O}if(S!="children"){u[S]="<td align = '"+D+"' class = '"+N+"' "+A+">"+C[S]+"</td>"}}_=v()}k+=_;k+="</tr>";k+=m;m="";u=[];r.append(k);e("#"+T).data("tr_data",C);if(E!=""){E(T,C,_)}if(C.checked&&C.checked==true){e("#"+T).addClass("current");var R=e("#"+T).find("input");if(R.attr("type")=="checkbox"||R.attr("type")=="radio"){R.prop("checked",true)}}_=""}if(t.setRowHtml!=""){andy.perform(n)}};if(typeof r=="string"){if(o=="get"){andy.loaddata(r,t.urlParams,function(e){if(typeof e=="string"){e=andy.stringToJson(e)}s(e);t.onLoadComplete(e);a()})}else if(o=="post"){andy.postdata(r,t.urlParams,function(e){if(typeof e=="string"){e=andy.stringToJson(e)}s(e);t.onLoadComplete(e);a()})}}else if(typeof r=="object"){s(r);a()}},an_tableInsertList:function(t,a){var n=t.parent();var i=function(e){var t="";for(var a in e){if(a=="children"){t=e[a]}}return t};for(var r=0;r<a.length;r++){var o="<tr>";var l=a[r];var s=0;for(var c in l){var d="";var f="";var u="";var h="";n.children().each(function(t,a){var n=e(a);if(s==t){d=n.attr("align");if(n.hasClass("group")||n.hasClass("node")){f="node n2"}}});if(c!="children"){o+="<td align = '"+d+"' class = '"+f+"' childrenUrl = '"+h+"'>"+l[c]+"</td>"}s+=1}o+="</tr>";n.after(o)}},an_tableLayout:function(t,a,n){var i=17;var r=t[0].id;var o=t;var l="divBoxing-"+r;var s="divBoxingbody-"+r;var c="divBoxinghead-"+r;var d="divBoxingfixed-"+r;var f=e("#"+l);var u=e("#"+c);var h=e("#"+s);var v=e("#"+d);var p=e("#"+r+"_h");var g=e("#"+r+"_w");var m=n;var b=a;if(o.height()<=n){i=0}f.parent().width(b).height(m);f.width(b).height(m);u.width(f.width()-i);p.height(o.height());h.height(f.height()-i);g.width(o.width());var y=function(e,t){if(e.parent().is("td")){e.prop("checked",t);var a=e.parents("tr");if(t){a.addClass("current");var n=a.data("tr_data");n?n.checked=true:n={};n.checked=true;a.data("tr_data",n)}else{a.removeClass("current");var n=a.data("tr_data");n?n.checked=false:n={};n.checked=false;a.data("tr_data",n)}}};var w=function(t,a,n){a.find("input").each(function(a,i){var r=e(i);if(typeof t!="number"||t==a){if(r.prop("checked")!=n){y(r,n)}}})};var x=function(e){if(f[0]){w("",f.find("table"),e)}else{w("",o,e)}w("",u.find("table"),e);w("",h.find("table"),e);w("",v.find("table"),e)};var T=function(e,t){if(f[0]){w(e,f.find("table"),t)}else{w(e,o,t)}w(e,u.find("table"),t);w(e,h.find("table"),t);w(e,v.find("table"),t)};var k=function(e,t){var a=e.children("."+t);var n=a.attr("class");return n};var _=function(e,t){var a=k(e,t);var n=a.split(" ");var i=n[1].substr(0,1);var r=parseInt(n[1].substr(1,n.length));return r};var C=function(e){var t=k(e,"node");var a=t.split(" ");var n=a[1].substr(0,1);var i=parseInt(a[1].substr(1,a.length));if(i>=1){i-=1}var r=e.prevAll(".group"+n+i).first();if(i==0){r=null}return r};var E=function(t,a,n,i){var r=t.attr("class");if(r&&r.substr(0,r.length-1)==a.substr(0,a.length-1)&&r.substr(r.length-1,r.length)>a.substr(a.length-1,a.length)){if(i){e(t).css("display","")}else{e(t).css("display","none")}}else if(!r){if(i){var o=C(t);if(o&&o.children("td").hasClass("open")){
e(t).css("display","")}}else{var o=C(t);var l=_(n,"group");var s=_(t,"node");if(o&&o.children("td").hasClass("open")==false||s>l){e(t).css("display","none")}}}};var I=function(t){t.find("input").each(function(t,a){var n=e(a);if(n.parent().is("th")||n.parent().is("td")){if(o.data("options").checkEnable==false){return false}n.unbind("click");n.click(function(e){if(n.prop("checked")&&n.attr("type")=="checkbox"){n.parents("tr").addClass("current");var a=n.parents("tr");if(!a.data("tr_data")){a.data("tr_data",{checked:true})}var i=a.data("tr_data");i.checked=true;T(t,true);if(n.parent().is("th")&&n.attr("type")=="checkbox"){x(true)}}else if(n.attr("type")=="checkbox"){n.parents("tr").removeClass("current");T(t,false);var a=n.parents("tr");var i=a.data("tr_data");i["checked"]=false;if(n.parent().is("th")&&n.attr("type")=="checkbox"){x(false)}}if(n.prop("checked")&&n.attr("type")=="radio"){n.parents("tr").siblings().removeClass("current");n.parents("tr").addClass("current")}})}});t.find(".group").each(function(i,r){var l=e(r);var s=l.parent();var c=l.attr("class");var d=c.split(" ");c=d[0]+d[1];s.addClass(c);l.unbind("click");l.click(function(i){var r=e(i.target);if(r.find("span").hasClass("quarters-loader")){return false}var l=r.parent();var s=l.attr("class").split(" ")[0];var c="<span class='quarters-loader' style = 'width:18px;height:18px;margin-left:8px'></span>";var d=false;if(r.hasClass("open")){d=false;r.removeClass("open")}else{d=true;r.addClass("open")}if(r.attr("childrenUrl")){r.append(c);andy.loaddata(r.attr("childrenUrl"),function(e){r.find("span").remove(".quarters-loader");o.an_tableInsertList(r,e);r.attr("childrenUrl","");t.an_tableLayout(t,a,n)})}else{l.nextUntil("."+s).each(function(t,a){E(e(a),s,l,d)});var f=u.find("tbody tr").eq(l.index());f.nextUntil("."+s).each(function(t,a){E(e(a),s,f,d)});var p=h.find("tbody tr").eq(l.index());p.nextUntil("."+s).each(function(t,a){E(e(a),s,p,d)});var g=v.find("tbody tr").eq(l.index());g.nextUntil("."+s).each(function(t,a){E(e(a),s,g,d)});var m=o.parent().parent().parent().height();var b=o.parent().parent().parent().width();o.an_tableLayout(o,b,m)}})})};if(f[0]){I(f.find("table"))}else{I(o)}I(u.find("table"));I(h.find("table"));I(v.find("table"))},an_tableLock:function(t){var a=e.extend({table:"lockTable",lockRow:0,lockColumn:0,width:"100%",height:"100%",lockRowCss:"lockRowBg",lockColumnCss:"lockColumnBg"},t);var n=a.table;var i=e("#"+n);var r="an-datagrid";var o="divBoxing-"+n;var l="divBoxingbody-"+n;var s="divBoxinghead-"+n;var c="divBoxingfixed-"+n;var d=50;var f=1;var u=100;var h=e("<div id='"+o+"'></div>").scroll(function(e){if(e.target.scrollTop>0){g.css({"z-index":f});p.css({"z-index":d})}if(e.target.scrollLeft>0){g.css({"z-index":d});p.css({"z-index":f})}g.stop().animate({scrollTop:e.target.scrollTop+"px"},0);p.stop().animate({scrollLeft:e.target.scrollLeft+"px"},0)});h.css({width:a.width,height:a.height,overflow:"auto",position:"relative",clear:"both"});i.wrap(h);i.addClass("tbLock");var v=e("#"+o);v.after("<div id = '"+s+"'></div>");v.after("<div id = '"+l+"'></div>");v.after("<div id = '"+c+"'></div>");var p=e("#"+s);var g=e("#"+l);var m=e("#"+c);var b=a.lockRow*a.lockColumn;var y=17;var w=0;var x=0;if(a.lockRow>0){var T;for(var k=0;k<a.lockRow;++k){T=i.find("thead tr:eq("+k+") >th").addClass("LockRow").addClass(a.lockRowCss);if(!T[k]){T=i.find("tbody tr:eq("+k+") >td").addClass("LockRow").addClass(a.lockRowCss)}var _=T[k].offsetHeight;if(e(T[k]).attr("rowspan")){_=_/parseInt(e(T[k]).attr("rowspan"))}w+=_;for(var C=0;C<a.lockColumn;++C){if(T){i.find("thead tr th:eq("+C+")").addClass("LockCell");T.find("td:eq("+C+")").addClass("LockCell").addClass(a.lockRowCss)}}}}if(a.lockColumn>0){var E=e("#"+n+" tr").length;var T,I;for(var k=a.lockRow;k<E;++k){T=i.find("tr:eq("+k+")");I=i.find("thead tr:eq(0) >th");for(var C=0;C<a.lockColumn;++C){if(k==a.lockRow){x+=I[C].offsetWidth}T.find("td:eq("+C+")").addClass("LockCell").addClass(a.lockColumnCss)}}}var $=v.width()-y;p.width($);var I=i.clone(true).attr({id:n+"_h"});I.height(i.height());p.css({position:"absolute",top:"0px",left:"0px",overflow:"hidden"});p.height(w);p.append(I);I.attr("optipns",null);I.attr(r,null);g.css({position:"absolute",top:"0px",left:"0px",overflow:"hidden"});var S=v.height()-y;g.height(S);var D=i.clone(true).attr({id:n+"_w"});D.width(i.width());g.width(x);g.append(D);D.attr("options",null);D.attr(r,null);m.css({position:"absolute",top:"0px",left:"0px",overflow:"hidden"});m.css({"z-index":u});var N=i.clone(true).attr({id:n+"_f"});m.width(x).height(w);m.append(N);N.width(i.width()).height(i.height());N.attr("options",null);N.attr(r,null);if(w>0&&x>0){i.bind("layout",function(){var e=v.parent().parent().height();var t=v.parent().parent().width();v.parent().width(t).height(e);v.width(t).height(e);N.width(i.width()).height(i.height());p.width(v.width()-y);I.height(i.height());g.height(v.height()-y);D.width(i.width())})}},an_tableSetView:function(t,a){var n=t[0].id;var i=t;var r="an-datagrid";var o="divBoxing-"+n;var l="divBoxingbody-"+n;var s="divBoxinghead-"+n;var c="divBoxingfixed-"+n;var d=e("#"+o);var f=e("#"+s);var u=e("#"+l);var h=e("#"+c);var v=i.an_datagrid("getHeadJson",i);var p=function(t){var n=function(){var n=0;var i="";var r="";var o=function(e){for(var t=0;t<e.length;t++){var l=e[t];if(a.layer==l.layer){if(a.jsonIndex==n){i=l;break}}if(l.children.length>0){r=l;o(l.children)}else{n+=1}if(i!=""){break}}};o(v);var l=0;for(var s=0;s<r.children.length;s++){var c=r.children[s];if(c.view=="open"){l+=1}}t.find("thead tr").each(function(t,a){e(a).find("th").each(function(a,n){if(t==parseInt(r.layer)&&a==parseInt(r.th_index)){if(l>0){e(n).removeClass("f-hidden");e(n).attr("colspan",l);r.view="open"}else if(l==0){e(n).addClass("f-hidden");r.view="close"}}})})};var r=function(){var n=0;var i="";var r="";var l="";var s=function(e){for(var t=0;t<e.length;t++){var o=e[t];if(a.layer==o.layer){if(a.jsonParentIndex==o.jsonParentIndex){i=o;break}}if(o.children.length>0){r=o;n+=1;s(o.children)}if(i!=""){break}}};var c=function(a){for(var n=0;n<a.children.length;n++){var i=a.children[n];t.find("thead tr").each(function(t,n){e(n).find("th").each(function(n,r){if(t==parseInt(i.layer)&&n==parseInt(i.th_index)){var l=e(r);if(a.view=="open"){l.removeClass("f-hidden");i.view="open"}else{l.addClass("f-hidden");i.view="close"}o(i)}})});if(i.children.length>0){c(i.children)}}};var d=function(e){var t=0;for(var a=0;a<e.children.length;a++){var n=e.children[a];if(n.view=="open"){t+=1}}return t};s(v);c(i);if(d(i)>0){t.find("thead tr").each(function(t,a){e(a).find("th").each(function(a,n){if(t==parseInt(i.layer)&&a==parseInt(i.th_index)){var r=e(n);e(n).attr("colspan",d(i))}})})}};var o=function(a){t.find("tbody tr").each(function(t,n){e(n).find("td").each(function(t,n){if(t==parseInt(a.jsonIndex)){if(a.view=="open"){e(n).removeClass("f-hidden")}else{e(n).addClass("f-hidden")}}})})};var l=t.find("thead tr").length;t.find("thead tr").each(function(t,s){e(s).find("th").each(function(s,c){if(t==parseInt(a.layer)&&s==parseInt(a.th_index)){if(e(c).hasClass("f-hidden")){e(c).removeClass("f-hidden");a.view="open"}else{e(c).addClass("f-hidden");a.view="close"}v=i.an_datagrid("getHeadJson",i);o(a);if(t>0){n()}else if(t<l-1){r()}}})})};if(d.length>0){p(d);p(f);p(u);p(h)}else{p(i)}},an_tableView:function(){var t={};var a="";for(var n=0;n<arguments.length;n++){var i=arguments[0];if(typeof i=="object"){t=i}else if(typeof i=="string"){a=i}}var r=e(this);var o=r.attr("id")+"_dialog";var l=r.attr("id")+"_tree";var s="EVENT_GET_JSON";if(a!=""){if(a=="getJson"){var c=arguments[1];r.trigger(s,c)}}else{var d=e.extend({width:400,height:430,setHeadJson:"",postUrl:"",postSuccess:function(){},onTreeCheck:function(){}},t);var f="<div class='u-p-l-bottom u-upload-bot' style = 'width:100%;height:40px;background:#EEE;position:absolute;bottom:0px;left:0px;_top:"+(d.height-45)+"px;_left:5px;_z-index:10000;'>"+"<div class='f-right f-p-xs'>"+"<a href='javascript:;' class='u-button-default success submit' id = 'submit_btn' style='float:left; margin-left:10px;'>确认</a>"+"</div></div>";e(document).an_dialog({id:o,aniClose:false,locMyself:true,onBeforeClose:function(){return true},title:"显示隐藏列",html:"<div class='' style = 'height:"+(d.height-85)+"px;overflow-y:auto'><ul id='"+l+"' class='ztree'></ul></div>"+f,width:d.width,height:d.height});dialog=e("#"+o);var u=dialog.find("#submit_btn");var h=false;var v=function(e){r.an_datagrid("tableView",e)};var p=function(t){var a=e.fn.zTree.getZTreeObj(l);var n=a.getNodeByParam("id",t.id);a.checkNode(n,true,false)};var g=function(t,a,n){var i={treeObj:null,callback:{onCheck:function(e,t,a){d.onTreeCheck(a);v(a)}},check:{enable:true,chkStyle:"checkbox",chkboxType:{Y:"sp",N:"sp"}},data:{simpleData:{enable:true}}};if(a){i=e.extend(i,a)}var r="";if(n){e.fn.zTree.init(e("#"+t),i,n);r=e("#"+t);for(var o=0;o<n.length;o++){if(n[o].view=="close"){p(n[o])}}}else if(op&&op.url){}};u.on("click",function(t){if(h){return true}h=true;if(d.postUrl==""){h=false;dialog.an_dialog("close")}else{var a=r.an_datagrid("getHeadJson",r);e.post(d.postUrl,a,function(e,t,a){if(t=="success"){alert("状态已经保存");d.postSuccess();h=false;dialog.an_dialog("close")}else{alert(a);h=false}})}});r.bind(s,function(e,t){var a=r.an_datagrid("getHeadJson",r);t(a)});var m=r.an_datagrid("getHeadJson",r);g(l,null,m)}},an_creatSortBtn:function(){var t=e(this);var a=t.attr("id");var n=t.data("options");var i=n.lockTable;var r=n.sortList.field;var o=n.sortList.sort||"descending";var l=n.sortList.icon||"<div class = 'm-icon'><i class='iconfont'>&#xe705;</i></div>";var s=n.sortList.iconb||"<div class = 'm-icon'><i class='iconfont'>&#xe706;</i></div>";if(i.lockColumn>0||i.lockRow>0){t=e("#"+a+"_h")}var c=function(t){o=="descending"?o="ascending":o="descending";t.replaceWith(o=="descending"?s:l);t.click(function(t){c(e(t.target));n.onSortClick(r,o)})};t.find("thead tr th").each(function(t,a){if(e(a).attr("field")==r){e(a).append(o=="descending"?s:l);e(a).find(".m-icon").click(function(t){c(e(t.target));n.onSortClick(r,o)})}})}})})(jQuery);(function(e){e.fn.extend({an_tabs:function(){var t={};var a="";var n=arguments[0];typeof n=="object"?t=n:a=n;var i=e.extend({tabsId:"",index:1,fit:true,height:0,width:0,tabsEvent:"click",hidden:[],onClick:function(){}},t);var r={head:"m-tabs-header",body:"m-tabs-content",layouted:"layouted",hidden:"f-hidden",item:"item",active:"active",headTop:"head-top",headLeft:"head-left",headRight:"head-right",headBottom:"head-bottom"};var o=e(this);if(i.tabsId==""){o=andy.setRandomId(o,"tabs_");i.tabsId=o.attr("id")}var l=o.children("."+r.head);var s=o.children("."+r.body);var c=s.children("."+r.item);var d="<div class='iconfont left-bar'>&#xe614;</div>";var f="<div class='iconfont right-bar'>&#xe7ba;</div>";var u="SHOW_EVENT";var h=o.attr("options");var v="";if(h){h="{"+h+"}";h=andy.stringToJson(h);for(var p in h){if(h[p]=="true"){i[p]=true}else if(h[p]=="false"){i[p]=false}else{i[p]=h[p]}}}o.data("fit",i.fit);var g=function(t){s.children().each(function(a,n){var i=e(n);if(t==a){if(!i.hasClass(r.active)){i.addClass(r.active)}if(!i.hasClass(r.layouted)){andy.layout(i);i.addClass(r.layouted)}}else{i.removeClass(r.active)}})};var m=function(e){if(i.hidden!=[]){if(typeof i.hidden[e]=="number"){return i.hidden[e]}}else{return 1}};if(a!=""){if(a=="hidden"){var b=function(e){var t=0;for(var a=0;a<e.length;a++){if(e[a]==1){t=a;break}}return t};var y=arguments[1];var w=b(y);i.hidden=y;g(w);l.find("li").each(function(t,a){var n=e(a);n.removeClass();if(m(t)==0){n.hide()}else if(m(t)==1){n.show();if(t==w){n.toggleClass(r.active)}}})}else if(a="show"){var x=parseInt(arguments[1]);if(x<0){x=0}o.trigger(u,x)}}else{if(o[0]){o[0].option=i}var T="";var k="";var _,C;var E=parseInt(s.css("padding-left"));if(!E){E=0}var I=parseInt(s.css("border-left"));if(!I){I=0}var $=parseInt(s.css("border-bottom"));if(!$){$=0}var S=0;var D=0;var N=function(e){var t=O();var a=l.width()-_.outerWidth()*2-l.find("li").length*2-2;var n=l.find("ul");var i=n.css("left")=="auto"?0:parseInt(n.css("left"));var r=i+a*e;r>0?r=0:null;r<-t?r=i:null;-r>t-a?r=a-t:null;n.animate({left:r},300)};var A=function(){l.append(d);l.append(f);_=l.find(".left-bar");_.hide();_.click(function(){N(1)});C=l.find(".right-bar");C.hide();C.click(function(){N(-1)})};if(!o.hasClass(r.headTop)&&!o.hasClass(r.headLeft)&&!o.hasClass(r.headRight)&&!o.hasClass(r.headBottom)){S=l.outerHeight();A()}else if(o.hasClass(r.headTop)){S=l.outerHeight();A()}else if(o.hasClass(r.headLeft)){D=l.outerWidth()}else if(o.hasClass(r.headRight)){D=l.outerWidth()}else if(o.hasClass(r.headBottom)){S=l.outerHeight()}var w=function(t){l.find("li").each(function(a,n){var i=e(n);if(t==a){if(!i.hasClass(r.active)){i.toggleClass(r.active)}}else{if(m(a)==0){i.hide()}i.removeClass()}});g(t)};var j=function(){if(o.children().find(r.head)){w(i.index-1)}l.find("li").each(function(t,a){var n=e(a);n.find(".close").click(function(e){n.addClass("f-hidden");i.hidden[t]=0;w(0);e.stopPropagation()});n.bind(i.tabsEvent,function(e){w(t);i.onClick(e);o.trigger(andy.EVENT_CLICK,t+1)})})};var O=function(){var t=0;l.find("li").each(function(a,n){t+=e(n).outerWidth()});return t};var R=function(){var t=o.parent().height();var a=o.parent().width();o.outerHeight(t).outerWidth(a);s.outerHeight(t-S).outerWidth(a-D);var n=s.height();var i=s.width();s.children().each(function(t,a){var r=e(a);r.outerHeight(n).outerWidth(i)});if(O()>l.width()&&_){l.addClass("overflow");l.find("ul").width(l.width()*2);_.show();C.show()}else if(_){l.removeClass("overflow");_.hide();C.hide()}};o.bind(u,function(e,t){w(t)});if(!o.data("fit")){var V=o.parent().height();var H=o.parent().width();if(i.height>0){V=i.height}if(i.width>0){H=i.width}o.outerHeight(V).outerWidth(H);s.outerHeight(V-S).outerWidth(H-D);var L=s.height();var z=s.width();s.children().each(function(t,a){var n=e(a);n.outerHeight(L).outerWidth(z);n.outerWidth(z)})}else{R();o.bind("layout",function(){R()})}j()}}})})(jQuery);(function(e){e.fn.extend({switchs:function(){var t=function(e,t){var a,n;e.find("i").remove();e.removeClass("on off");t?a='<i class="iconfont ">&#xe61c;</i>':a='<i class="iconfont ">&#xe61d;</i>';t?n="on":n="off";e.addClass(n).append(a).addClass("switchState")};Config={init:function(a){var n={changeBefor:function(e){},changeAfter:function(e){}};var i=e(this),r=i.children("input"),o=r.is(":checked")?true:false;if(!i.hasClass("switchState")){t(i,o)}var l=e.extend(true,n,a||{});i.unbind("click");i.on("click",function(a){a.stopPropagation();l.changeBefor(r);if(r.prop("disabled"))return;var n=r.is(":checked");r.prop("checked",!n);t(e(this),!n);l.changeAfter(r)})},setEnable:function(){e(this).children("input").prop("disabled",arguments[1])},setState:function(){t(e(this),arguments[1]);e(this).children("input").prop("checked",arguments[1])}};var a=arguments[0];if(Config[a]){a=Config[a]}else if(typeof a=="object"||!a){a=Config.init}else{e.error("Something bad happened");return this}return a.apply(this,arguments)}})})(jQuery);(function(e,t){var a=1;var n=function(e){if(e===""){return}if(typeof e==="string"){var t=e.split("-");if(t.length===3&&t[0].length===4){var a=~~t[0];var n=~~t[1]-1;var i=~~t[2];var r=new Date(a,n,i);return r.getFullYear()===a&&r.getMonth()===n&&r.getDate()===i}}return false};var i=function(e){var t=new Array("~","`","!","@","#","$","%","^","&","*","{","}","[","]","(",")");t.push(":",";","'","|","\\","<",">","?","/","<<",">>","||","//");t.push("admin","administrators","administrator","管理员","系统管理员");t.push("select","delete","update","insert","create","drop","alter","trancate");e=e.toLowerCase();for(var a=0;a<t.length;a++){if(e.indexOf(t[a])>-1){return false}}return true};var r=function(e){e=e.toUpperCase();var t={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外 "};if(!t[e.substr(0,2)]){return false}if(!/(^\d{15}$)|(^\d{17}([0-9]|X)$)/.test(e)){return false}var a,n;a=e.length;if(a==15){n=new RegExp(/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/);var i=e.match(n);var r=new Date("19"+i[2]+"/"+i[3]+"/"+i[4]);var o;o=r.getYear()==Number(i[2])&&r.getMonth()+1==Number(i[3])&&r.getDate()==Number(i[4]);if(!o){return false}else{var l=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2);var s=new Array("1","0","X","9","8","7","6","5","4","3","2");var c=0,d;e=e.substr(0,6)+"19"+e.substr(6,e.length-6);for(d=0;d<17;d++){c+=e.substr(d,1)*l[d]}e+=s[c%11];return true}}if(a==18){n=new RegExp(/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/);var i=e.match(n);var r=new Date(i[2]+"/"+i[3]+"/"+i[4]);var o;o=r.getFullYear()==Number(i[2])&&r.getMonth()+1==Number(i[3])&&r.getDate()==Number(i[4]);if(!o){return false}else{var f;var l=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2);var s=new Array("1","0","X","9","8","7","6","5","4","3","2");var c=0,d;for(d=0;d<17;d++){c+=e.substr(d,1)*l[d]}f=s[c%11];if(f!=e.substr(17,1)){return false}return true}}return false};var o={trim:{check:function(e){e.value=e.value.replace(/(^\s*)|(\s*$)/g,"");return true}},required:{message:"不能为空",placeholder:"请输入文字...",check:function(e){return e.value!==""&&e.value!==o.required.placeholder}},"int":{message:"不是整数，请输入整数",placeholder:"请输入整数",check:function(e){return/^\-?\d+$/.test(e.value)}},mobile:{message:"手机号码不合法",placeholder:"请输入手机号",check:function(e){return/^(13[0-9]|14[57]|15[012356789]|17[0678]|18[0-9])\d{8}$/.test(e.value)}},phone:{message:"座机号码不合法",placeholder:"请输入座机号",check:function(e){var t=/^[0][1-9]{2,3}-[0-9]{5,10}$/;var a=/^[1-9]{1}[0-9]{5,8}$/;if(e.value.length>9){return t.test(e.value)}return a.test(e.value)}},mobile_phone:{message:"输入号码不合法",placeholder:"请输入手机或者座机号",check:function(e){return o.phone.check(e)||o.mobile.check(e)}},decimal:{message:"不是小数，请输入小数",placeholder:"请输入小数",check:function(e){return/^\-?\d*\.?\d+$/.test(e.value)}},alpha:{message:"包含字母以外的非法字符",placeholder:"请输入字母",check:function(e){return/^[a-z]+$/i.test(e.value)}},alpha_numeric:{message:"包含字母或数字以外的非法字符",placeholder:"请输入字母或数字",check:function(e){return/^[a-z0-9]+$/i.test(e.value)}},alpha_dash:{message:"包含字母或数字及下划线以外的非法字符",placeholder:"请输入字母或数字及下划线等字符",check:function(e){return/^[a-z0-9_\-]+$/i.test(e.value)}},chs:{message:"请输入中文字符",placeholder:"请输入中文字符",check:function(e){return/^[\u4e00-\u9fa5]+$/.test(e.value)}},chs_numeric:{message:"请输入中文字符或数字及下划线等特殊字符",placeholder:"请输入中文字符或数字及下划线等特殊字符",check:function(e){return/^[\\u4E00-\\u9FFF0-9_\-]+$/i.test(e.value)}},qq:{message:"腾讯QQ号从10000开始",placeholder:"请输入QQ号",check:function(e){return/^[1-9]\d{4,10}$/.test(e.value)}},postoffice:{message:"邮编格式错误",placeholder:"请输入邮编",check:function(e){return/^[1-9][0-9]{5}$/.test(e.value)}},idcard:{message:"身份证格式错误",placeholder:"请输入身份证号",check:function(e){return r(e.value)}},ipv4:{message:"ip地址不正确",placeholder:"请输入ip地址",check:function(e){var t=/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i;return t.test(e.value)}},email:{message:"邮箱地址错误",placeholder:"请输入邮箱",check:function(e){return/^([A-Z0-9]+[_|\_|\.]?)*[A-Z0-9]+@([A-Z0-9]+[_|\_|\.]?)*[A-Z0-9]+\.[A-Z]{2,3}$/i.test(e.value)}},url:{message:"URL格式错误",placeholder:"请输入链接",check:function(e){return/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(e.value)}},quote:{message:"包含非法字符",placeholder:"请输入...",check:function(e){return i(e.value)}},repeat:{message:"密码输入不一致",check:function(e){var t=e.getAttribute("repeat");if(t){var a=e.ownerDocument.getElementById(t)}if(!a){return false}return e.value===a.value}},norepeat:{message:"输入重复",check:function(e){var a=true,n,i,r=e.getAttribute("norepeat");if(r&&o.required.check(e)){var l=t('[norepeat="'+r+'"]');if(l.length>0){for(n=0;n<l.length;n++){i=l[n];if(e!==i&&o.required.check(i)&&e.value===i.value){a=false;break}}}}return a}},date:{message:"必须符合日期格式 YYYY-MM-DD",placeholder:"请输入日期 例如：2016-3-2",check:function(e){return n(e.value)}},passport:{message:"护照格式错误或过长",placeholder:"请输入护照号",check:function(e){return/^[a-zA-Z0-9]{4,20}$/i.test(e.value)}},minlength:{message:"最少输入{{minlength}}个字",placeholder:"请输入{{minlength}}个以上字符",check:function(e){var t=e;var a=parseInt(t.getAttribute("minlength"),10);return t.value.length>=a}},maxlength:{message:"最多输入{{maxlength}}个字",placeholder:"请输入{{maxlength}}个以下字符",check:function(e){var t=e;var a=parseInt(t.getAttribute("maxlength"),10);return t.value.length<=a}},greaterthan:{message:"请输入大于{{greaterthan}}的数字",placeholder:"请输入大于{{greaterthan}}的数字",check:function(e){var t=e;var a=parseInt(t.getAttribute("greaterthan"),10);var n=parseFloat(t.value);return isNaN(n)?false:n>a}},lessthan:{message:"请输入小于{{lessthan}}的数字",placeholder:"请输入小于{{lessthan}}的数字",check:function(e){var t=e;var a=parseInt(t.getAttribute("lessthan"),10);var n=parseFloat(t.value);return isNaN(n)?false:n<a}},contains:{message:"必须包含{{contains}}中的一个",placeholder:"必须包含{{contains}}中的一个",check:function(e){var t=e.value;var a=[].concat(t).map(String);var n=(e.getAttribute("contains")||"").split(",");var i=false;for(var r=0,o=a.length;r<o;r++){var l=a[r];if(n.indexOf(l)>=0){i=true;break}}return i}},contain:{message:"必须包含{{contain}}",placeholder:"请输入包含{{contain}}这样格式的字符",check:function(e){var t=e.value;var a=[].concat(t).map(String);var n=(e.getAttribute("contain")||"").split(",");if(!a.length){var i=false}else{i=true;for(var r=0,o=n.length;r<o;r++){var l=n[r];if(a.indexOf(l)===-1){i=false;break}}}return i}},pattern:{message:"必须匹配/{{pattern}}/这样的格式",placeholder:"请输入匹配/{{pattern}}/这样格式的字符",check:function(e){var t=e;var a=t.getAttribute("pattern");var n=new RegExp("^(?:"+a+")$");return n.test(t.value)}}};var l=function(e){var a=t(e),n;var i=a.attr("placeholder");if(!i||a.attr("combo")){return}a.parent().append("<div class='ie-placeholder place'>"+i+"</div>");n=a.parent().find(".ie-placeholder");if(a[0].value==""){n.show()}else{n.hide()}n.click(function(e){t(this).hide();var a=t(this).parent().find("[placeholder]");a[0].click();a[0].focus()});a.blur(function(){setTimeout(function(){if(a.val()==""){a.parent().find(".ie-placeholder").show()}},300)});a.focus(function(){t(this).parent().find(".ie-placeholder").hide()})};var s="<div class = 'u-input-cor'></div>";var c="<div class = 'u-input-err'></div>";var d=function(e){t(e).before(s)};var f=function(e){t(e).before(c);setTimeout(function(){},3e3)};var u=function(e){if(t(e).prev().is("div")){t(e).prev().remove()}};var h=function(a){var n,i=true,r,l,s="",c=a.getAttribute("verify");if(!c){return true}if(t(a).is(":disabled")){return true}if(a.value===""&&c&&c.indexOf("required")<0){return true}c=c.split(",");for(l=0;l<c.length;l++){r=o[c[l]].check(a);if(r===false){if(a.getAttribute("message")){s=a.getAttribute("message")}else{s=o[c[l]].message;if(s.indexOf(c[l])>-1){s=s.replace("{{"+c[l]+"}}",a.getAttribute(c[l]))}}n=t(a).next(".infobox");e.changeTooltip(a,s);e.showTooltip(a,true);f(a);return r}i=i&&r}if(i){u(a);e.hideTooltip(a);d(a)}else{f(a)}return i};var v=function(a,n){if(a.getAttribute("tipPos")){e.tooltip(t(a),a.getAttribute("tipPos"),t(a).attr("title"),"terr")}else{e.tooltip(t(a),"bottom",t(a).attr("title"),"terr")}var i=function(e){return n?n(e.target):h(e.target)};if(a.getAttribute("validateOnKeyup")){t(a).keyup(i)}else if(a.getAttribute("validateOnblur")){t(a).blur(i)}else{t(a).change(i)}t(a).unbind("focus");t(a).bind("focus",function(n){u(t(this));if(a.getAttribute("validateOnFocus")){i(n)}else{e.hideTooltip(this)}})};var p=function(){t("[verify]").each(function(a,n){if(n.getAttribute("verify")===""){return}if(n.parentNode.className.indexOf(".m-tooltip")<0){var i=n.getAttribute("verify").split(",");v(n);if((i+"").indexOf("required")>-1){t(n).parents(".u-formitem").find("label").append("<span class='f-color-danger'>*</span>")}if(t(n).parent().parent().hasClass("u-group")){e.inputLayout(t(n).parent())}if(!n.getAttribute("placeholder")){var r=o[i[i.length-1]].placeholder;if(r){if(r.indexOf("{{")>-1){r=r.replace("{{"+i[i.length-1]+"}}",n.getAttribute(i[i.length-1]))}if(!n.getAttribute("combo")){n.setAttribute("placeholder",r)}}}}if(e.IE()<=9&&e.IE()!==0){l(n)}})};e.fromInit=p;e.addVerify=function(e,n){var i,r,l={massage:"输入不合法",check:function(){return true}};i=t.extend(l,n);r="custom"+a;o[r]=i;e.setAttribute("verify",e.getAttribute("verify")?e.getAttribute("verify")+","+r:r);v(e,i.check);a++};e.ajaxVerify=function(a,n){var i,r,o={async:false,type:"get",url:"",data:{},dataType:"json",beforeSend:function(){},complete:function(){},success:function(){},error:function(){}};if(n){i=t.extend(o,n);i.success=function(t){if(t.success){d(a)}else{if(t.tipStr){e.changeTooltip(a,t.tipStr);e.showTooltip(a,true)}f(a)}if(n.success){n.success(t)}};i.error=function(e){alert("error"+e.toString())};v(a,function(e){i.data=n.data?n.data():e.value;t.ajax(i)})}};e.fromVerify=function(e){var a=true;t(e).find("[verify]").each(function(e,t){a=h(t)&&a});return a};e.inputCheck=h;e.placeholder4IE=l;t(document).ready(function(){p()})})(andy,jQuery);(function(e){e.fn.extend({an_accordion:function(t){var a=e.extend({index:1,isAnimation:true,multiple:false,isAllOpen:false,fit:true,height:0,width:0,onClick:function(){}},t);var n={head:"panel-head",body:"panel-body",title:"panel-head-title",hidden:"f-hidden",active:"active"};var i=e(this);var r=i.children().children("."+n.head);var o=i.children().children("."+n.body);var l=function(t){var i=a.index;if(t){i=t}o.each(function(t,r){var o=e(r);if(i>0&&i==t+1){if(a.isAnimation){if(a.multiple){o.slideToggle(200)}else{o.slideDown(200)}}else{if(a.multiple){o.toggleClass(n.hidden)}else{o.removeClass(n.hidden)}}}else{if(!a.multiple){if(a.isAnimation){o.slideUp(200)}else{o.addClass(n.hidden)}}}})};var s=function(t){o.each(function(t,n){var i=e(n);if(i.css("display")=="block"&&a.multiple){}});l(t)};var c=function(){if(a.multiple||!a.isAllOpen){o.each(function(t,i){var r=e(i);if(a.index>0&&a.index==t+1){if(a.isAnimation){r.slideDown(200)}}else{if(a.isAnimation){r.slideUp(200)}else{r.addClass(n.hidden)}}})}else{l()}};var d=function(){if(o){c()}r.each(function(t,i){e(i).click(function(i){l(t+1);r.each(function(t,a){e(a).removeClass(n.active)});e(this).addClass(n.active);a.onClick(i)})})};d()}})})(jQuery);(function(e){e.fn.extend({an_pagination:function(){var t={};var a="";var n=arguments[0];typeof n=="object"?t=n:a=n;if(a!=""){if(a=="total"){e(this).trigger("total",arguments[1].total)}if(a=="select"){e(this).trigger("select")}}else{var i=e.extend({index:1,total:100,selectListIndex:1,list:[10,20,30,40,50],onSelectPage:function(){}},t);var r=e(this);var o=r.find("[page-fist]");var l=r.find("[page-prev]");var s=r.find("[page-next]");var c=r.find("[page-last]");var d=r.find("[page-index]");var f=r.find("[page-select]");var u=r.find("[page-refresh]");if(i.pageSize>0){for(var h=0;h<i.list.length;h++){if(i.pageSize==i.list[h]){i.selectListIndex=h+1}}}var v=i.list[i.selectListIndex-1];i.selectListIndex=parseInt(i.selectListIndex);if(i.selectListIndex>1||t.selectListIndex<=i.list.length+1){v=i.list[i.selectListIndex-1];f.val(v)}if(f){v=f.val()}var p=parseInt(i.index);var g=Math.ceil(parseInt(i.total)/v);var m=function(){var e=r.find("[page-counts]");var t=r.find("[page-record]");var a=r.find("[page-index]");if(e){e.text(g)}if(a){a.val(p)}if(t){t.text("共"+i.total+"条记录")}};if(d){d.focus(function(e){r.unbind("select")});d.change(function(t){p=e(t.target).val();if(/^\-?\d+$/.test(p)&&g!=0){p=p<=0?1:p>g?g:p;i.onSelectPage(p,v)}});d.blur(function(e){r.bind("select",function(e){i.onSelectPage(p,v)})})}r.find("[page-select]").change(function(t){i.onSelectPage(p,e(t.target).val());v=e(t.target).val();g=Math.ceil(i.total/v);if(p>g){p=1}m()});r.bind("select",function(e){i.onSelectPage(p,v)});r.bind("total",function(e,t){i.total=t;g=Math.ceil(i.total/v);if(p>g){p=1}m()});if(o){o.click(function(e){if(p!=1){p=1;m();i.onSelectPage(p,v)}})}if(l){l.click(function(e){if(p>1){p-=1;m();i.onSelectPage(p,v)}})}if(s){s.click(function(e){if(p<g){p+=1;m();i.onSelectPage(p,v)}})}if(c){c.click(function(e){if(p!=g){p=g;m();i.onSelectPage(p,v)}})}if(u){u.click(function(e){i.onSelectPage(p,v)})}if(d){d.css("type","number");d.blur(function(e){p=parseInt(d.val());i.onSelectPage(parseInt(d.val()),v)})}m();return i}}})})(jQuery);(function(e){e.fn.extend({an_datagridPagination:function(){var t={};var a="";var n=arguments[0];typeof n=="object"?t=n:a=n;var i=e.extend({dpId:"",url:"",urlParams:{},ajaxType:"get",addColumns:"",coverColumns:"",onPaginationSelect:function(){},onLoadComplete:function(){},onClickRow:function(){},onDblClickRow:function(){},onClickCell:function(){},onDblClickCell:function(){}},t);var r=e(this);if(i.dpId==""){r=andy.setRandomId(r,"datagrid_pagination_");i.dpId=r.attr("id");dpId=i.dpId}var o=r.attr("options");var l="";if(o){o="{"+o+"}";o=andy.stringToJson(o);for(var s in o){if(o[s]=="true"){i[s]=true}else if(o[s]=="false"){i[s]=false}else{i[s]=o[s]}}}var c,d;c="EVENT_LOAD_LIST";d="EVENT_GET_TABLE_CHECKED";if(a!=""){if(a=="loadListData"){var f=arguments[1];var u=arguments[2];var h=arguments[3];var v=arguments[4];if(u!=false){u=true}var p={url:f,isNewPagination:u,data:h,ajaxType:v};r.trigger(c,p)}else if(a=="getChecked"){var g=arguments[1];r.trigger(d,g)}}else{var m=r.find("table");var b=m.attr("id");m=e("#"+b);var y=r.find(".m-pagebar");var w=y.attr("id");var x=1;var T=function(){if(y[0]){var e="<div class='f-left'> 每页显示"+"<select class='u-select xs auto' page-select = ''>"+"<option>10</option>"+"<option>20</option>"+"<option>30</option>"+"<option>40</option>"+"<option>50</option>"+"</select>"+"<button class='u-btn xs texture' page-fist = ''><i class='iconfont'>&#xe60e;</i></button>"+"<button class='u-btn xs texture' page-prev = ''><i class='iconfont'>&#xe626;</i></button>"+"第<input type='text' style='width:50px' value='1' class='u-input xs auto' page-index = ''>共<a page-counts>10</a>页"+"<button class='u-btn xs texture' page-next = ''><i class='iconfont'>&#xe60f;</i></button>"+"<button class='u-btn xs texture' page-last = ''><i class='iconfont'>&#xe60d;</i></button>"+"</div><div class='f-right' page-record = ''>共2000记录</div>";y.append(e)}};var k=function(t){i.bodyUrl=t;var a=i;m.an_datagrid(a);if(t["total"]&&y.hasClass("promty")==false){var n={};var r={};n=e.extend(true,t,a,{onSelectPage:function(e,t){_(i.url+"?pageNumber="+e+"&pageSize="+t,"have");x=e;if(i.onPaginationSelect){i.onPaginationSelect(e,parseInt(t))}}});y.empty();T();if(n.urlParams.pageNumber){n.index=n.urlParams.pageNumber}y.an_pagination(n);y.addClass("promty")}};var _=function(e,t){m.find("tbody").empty();var a=i.urlParams;if(t=="have"){a={}}var n=function(e,t,a,n){if(a=="get"){andy.loaddata(e,t,function(e){n(e)})}else{andy.postdata(e,t,function(e){n(e)})}};if(typeof e=="object"){k(e);i.onLoadComplete(e)}else if(i.ajaxType=="get"){n(e,a,"get",function(e){k(e);i.onLoadComplete(e)})}else if(i.ajaxType=="post"){n(e,a,"post",function(e){k(e);i.onLoadComplete(e)})}};if(i.url!=""){_(i.url)}r.bind(d,function(t,a){var n=e("#"+b);n.an_datagrid("getChecked",function(e,t){a(e,t)})});r.bind(c,function(t,a){if(a.isNewPagination){y.removeClass("promty")}if(a.ajaxType){i.ajaxType=a.ajaxType}if(a.data){i.urlParams=e.extend(true,{},i.urlParams,a.data)}_(a.url)})}}})})($);(function($){$.fn.extend({an_selector:function(){var options={},METHODS={};var funstyle="";for(var i=0;i<arguments.length;i++){var a=arguments[0];if(typeof a=="object"){options=a}else if(typeof a=="string"){funstyle=a}}if(funstyle!=""){if(METHODS[funstyle]){return METHODS[funstyle](this,arguments[1])}throw"The method of"+funstyle+"is undefined";return false}else{var _options=$.extend({treeid:"",selects:true,treeData:options.url||"",nodes:[],rightNodes:[],searchUrl:"",getUrl:"",searchText:"输入工号/名字",treeTitle:options.leftTitle||"部门结构",setting:"",tableList:false,cal:function(){},submit:function(){}},options);var sel=$(this);var center=sel.find("[center]");var right=sel.find("[right]");var choose=sel.find("[choose]");var cancel=sel.find("[cancel]");

var submit=sel.find("[submit]");var inputText=sel.find("[inputText]");var search=sel.find("[search]");var treeTitle=sel.find("[treeTitle]");var chooseData=[];var currentTreeNode="";if(!_options.tableList){center.wrap("<div class='f-p-sm' center></div>");center.remove();center=$("[center]")}if(treeTitle.length===0){var treeTitle=sel.find("[leftTitle]")}var default_setting={data:{simpleData:{enable:true}}};var setting={callback:{onClick:function(e,t,a){currentTreeNode=a;onTreeClick(currentTreeNode)}}};if(_options.setting!=""){setting=$.extend(true,setting,_options.setting,default_setting)}setting.callback.onClick=function(e,t,a){currentTreeNode=a;onTreeClick(currentTreeNode)};var tree="";if(_options.treeData==""){$.fn.zTree.init($("#"+_options.treeid),setting,_options.nodes);tree=$("#"+_options.treeid)}else{andy.loaddata(_options.treeData,function(e){e=andy.stringToJson(e);$.fn.zTree.init($("#"+_options.treeid),setting,e);tree=$("#"+_options.treeid)})}if(_options.rightNodes.length>0){for(var i=0;i<_options.rightNodes.length;i++){var data=_options.rightNodes[i];addToRight(data)}}if(treeTitle){treeTitle.text(_options.treeTitle)}if(choose){if(_options.selects==false){choose.addClass("f-hidden")}choose.click(function(){if(center&&center.attr("table-list")!="true"){center.children().each(function(e,t){for(var a=0;a<chooseData.length;a++){if($(t).attr("id")==chooseData[a].id){clearSelf($(t));addToRight(chooseData[a])}}})}else{$("#tableOption tbody").find("tr").each(function(e,t){var a=$(t).attr("id");for(var n=0;n<chooseData.length;n++){if($("#"+a).data("tr_data").id==chooseData[n].id){addToRight(chooseData[n])}}});$("#tableOption tbody").empty()}})}if(cancel){if(_options.selects==false){cancel.addClass("f-hidden")}cancel.click(function(){if(right){right.children().each(function(e,t){clearSelf($(t));changeCenterFrame(chooseData)})}})}if(submit){submit.click(function(){_options.submit(getChooseJson());_options.cal(getChooseJson())})}if(search){search.click(function(){onTreeClick(currentTreeNode,true)})}if(inputText){inputText.attr("placeholder",_options.searchText);var ie=andy.getBrowser().browser.ie;if(ie&&ie<8){inputText.val(_options.searchText);inputText.blur(function(e){if($(e.target).val()==""){inputText.val(_options.searchText)}});inputText.focus(function(e){if($(e.target).val()==_options.searchText){inputText.val("")}})}}function onTreeClick(e,t){var a={},n=_options.getUrl;if(!n){n=t?_options.searchUrl:e.dataUrl}var i="";if(n!=""){if(inputText.val()!=_options.searchText&&t){a.search=inputText.val()}a.id=e.id;if(_options.clickTree){a=_options.clickTree(e)}if(n&&n!==""){andy.loaddata(n,a,function(e){e=andy.stringToJson(e);chooseData=e;changeCenterFrame(e)})}}}var addToCenterList=function(e){$("#tableOption").an_datagrid("addRow",e,function(t,a,n){$("#"+a).on("click",function(t){if($(t.target).is("input")){if($(t.target).prop("checked")){$("#"+a).addClass("current");addToRight(e);$("#"+a).remove()}else{$("#"+a).removeClass("current")}}})})};function changeCenterFrame(e){if(center&&center.attr("table-list")!="true"){center.empty();for(var t=0;t<e.length;t++){var a=e[t];if(!checkId(right,a.id)){addToCenter(a)}}}else{$("#tableOption").find("tbody").empty();for(var t=0;t<e.length;t++){var a=e[t];if(!checkId(right,a.id)){addToCenterList(a)}}}}METHODS.changeCenterFrame=changeCenterFrame;function addToCenter(e){if(center){if(checkDataId(chooseData,e.id)&&!checkId(center,e.id)){center.append("<button class='u-btn sm' id = "+e.id+" data = "+e.data+" name = "+e.name+">"+e.name+"</button>");var t=$("#"+e.id);t.click(function(a){clearSelf(t);addToRight(e)})}}}function addToRight(e){if(right){if(!checkId(right,e.id)&&_options.selects){right.append("<button class='u-btn sm' id = "+e.id+" data = "+e.data+" name = "+e.name+">"+e.name+"<i class='iconfont'>&#xe602;</i></button>");var t=$("#"+e.id);t.click(function(a){clearSelf(t);if(center.attr("table-list")!="true"){addToCenter(e)}else{addToCenterList(e)}})}else if(_options.selects==false){right.children("button").each(function(t,a){var n=$(a);clearSelf(n);var i={id:n.attr("id"),name:n.attr("name"),data:n.attr("data")};if(center.attr("table-list")!="true"){addToCenter(e)}else{addToCenterList(e)}});right.append("<button class='u-btn sm' id = "+e.id+" data = "+e.data+" name = "+e.name+">"+e.name+"<i class='iconfont'>&#xe602;</i></button>");var t=$("#"+e.id);t.click(function(a){clearSelf(t);if(center.attr("table-list")!="true"){addToCenter(e)}else{addToCenterList(e)}})}}}function checkId(e,t){var a=false;e.children().each(function(e,n){if(t==$(n).attr("id")){a=true}});return a}function checkDataId(e,t){var a=false;for(var n=0;n<e.length;n++){var i=e[n];if(t==i.id){a=true}}return a}function clearSelf(e){e.unbind("click");e.remove()}function getChooseJson(){var str="[";right.children().each(function(e,t){var a=$(t);var n="{'id':'"+a.attr("id")+"','name':'"+a.attr("name")+"','data':'"+a.attr("data")+"', 'tId':'"+a.attr("tId")+"'}";if(str=="["){str+=n}else{str+=","+n}});str+="]";var jstr=eval("("+str+")");return jstr}}},an_selectorMulti:function(){var options={},METHODS={};var funstyle="";for(var i=0;i<arguments.length;i++){var a=arguments[0];if(typeof a=="object"){options=a}else if(typeof a=="string"){funstyle=a}}if(funstyle!=""){if(METHODS[funstyle]){return METHODS[funstyle](this,arguments[1])}throw"The method of"+funstyle+"is undefined";return false}else{var _options=$.extend({treeid:"",selects:true,treeData:options.url||"",nodes:[],rightNodes:[],tableList:true,searchUrl:"",getUrl:"",searchText:"输入工号/名字",treeTitle:options.leftTitle||"部门结构",setting:"",submit:function(){}},options);var sel=$(this);var head=sel.find("[selecthead]");var leftframe=sel.find("[leftframe]");var center=sel.find("[center]");var right=sel.find("[right]");var choose=sel.find("[choose]");var cancel=sel.find("[cancel]");var submit=sel.find("[submit]");var inputText=sel.find("[inputText]");var search=sel.find("[search]");var chooseData=[];var currentTreeNode="";if(!_options.tableList){center.wrap("<div class='f-p-sm' center></div>");center.remove();center=$("[center]")}var setShowFrame=function(e){var t=sel.find(".leftframe");t.each(function(t,a){if(t==e){$(a).show()}else{$(a).hide()}})};if(typeof _options.treeTitle=="object"){for(var i=0;i<_options.treeTitle.length;i++){head.append("<li index='1' selectbtn style='margin:5px 5px 0 0;'><a href='javascript:;'>"+_options.treeTitle[i]+"</a></li>");leftframe.append("<div class = 'g-max leftframe' style = 'position:relative;'>"+"<div class='panel-head f-b-b'>"+"<div class='panel-h-l'>"+"<strong class='title' treeTitle>"+_options.treeTitle[i]+"</strong>"+"</div></div>"+"<div class='panel-body g-h-max'>"+"<ul id='"+_options.treeid[i]+"' class='ztree'></ul>"+"</div></div>")}sel.an_tabs();andy.layout(leftframe);andy.layout(center.parent());setShowFrame(0)}var treeTitle=sel.find("[treeTitle]");var selectbtn=sel.find("[selectbtn]");if(treeTitle.length===0){var treeTitle=sel.find("[leftTitle]")}var default_setting={data:{simpleData:{enable:true}}};var setting={callback:{onClick:function(e,t,a){currentTreeNode=a;onTreeClick(currentTreeNode)}}};if(_options.setting!=""){setting=$.extend(true,setting,_options.setting,default_setting)}setting.callback.onClick=function(e,t,a){currentTreeNode=a;onTreeClick(currentTreeNode)};var tree="";var createTree=function(e){if(_options.treeData==""){$.fn.zTree.init($("#"+_options.treeid[e]),setting,_options.nodes);tree=$("#"+_options.treeid[e])}else{andy.loaddata(_options.treeData[e],function(t){t=andy.stringToJson(t);$.fn.zTree.init($("#"+_options.treeid[e]),setting,t);tree=$("#"+_options.treeid[e])})}};createTree(0);if(_options.rightNodes.length>0){for(var i=0;i<_options.rightNodes.length;i++){var data=_options.rightNodes[i];addToRight(data)}}sel.bind(andy.EVENT_CLICK,function(e,t){setShowFrame(t-1);createTree(t-1)});if(choose){if(_options.selects==false){choose.addClass("f-hidden")}choose.click(function(){if(center&&center.attr("table-list")!="true"){center.children().each(function(e,t){for(var a=0;a<chooseData.length;a++){if($(t).attr("id")==chooseData[a].id){clearSelf($(t));addToRight(chooseData[a])}}})}else{$("#tableOption tbody").find("tr").each(function(e,t){var a=$(t).attr("id");for(var n=0;n<chooseData.length;n++){if($("#"+a).data("tr_data").id==chooseData[n].id){addToRight(chooseData[n])}}});$("#tableOption tbody").empty()}})}if(cancel){if(_options.selects==false){cancel.addClass("f-hidden")}cancel.click(function(){if(right){right.children().each(function(e,t){clearSelf($(t));changeCenterFrame(chooseData)})}})}if(submit){submit.click(function(){_options.submit(getChooseJson());_options.cal(getChooseJson())})}if(search){search.click(function(){onTreeClick(currentTreeNode,true)})}if(inputText){inputText.attr("placeholder",_options.searchText);var ie=andy.getBrowser().browser.ie;if(ie&&ie<8){inputText.val(_options.searchText);inputText.blur(function(e){if($(e.target).val()==""){inputText.val(_options.searchText)}});inputText.focus(function(e){if($(e.target).val()==_options.searchText){inputText.val("")}})}}function onTreeClick(e,t){var a={},n=_options.getUrl;if(!n){n=t?_options.searchUrl:e.dataUrl}var i="";if(n!=""){if(inputText.val()!=_options.searchText&&t){a.search=inputText.val()}a.id=e.id;if(_options.clickTree){a=_options.clickTree(e)}if(n&&n!==""){andy.loaddata(n,a,function(e){e=andy.stringToJson(e);chooseData=e;changeCenterFrame(e)})}}}var addToCenterList=function(e){$("#tableOption").an_datagrid("addRow",e,function(t,a,n){$("#"+a).on("click",function(t){if($(t.target).is("input")){if($(t.target).prop("checked")){$("#"+a).addClass("current");addToRight(e);$("#"+a).remove()}else{$("#"+a).removeClass("current")}}})})};function changeCenterFrame(e){if(center&&center.attr("table-list")!="true"){center.empty();for(var t=0;t<e.length;t++){var a=e[t];if(!checkId(right,a.id)){addToCenter(a)}}}else{$("#tableOption").find("tbody").empty();for(var t=0;t<e.length;t++){var a=e[t];if(!checkId(right,a.id)){addToCenterList(a)}}}}METHODS.changeCenterFrame=changeCenterFrame;function addToCenter(e){if(center){if(checkDataId(chooseData,e.id)&&!checkId(center,e.id)){center.append("<button class='u-btn sm' id = "+e.id+" data = "+e.data+" name = "+e.name+">"+e.name+"</button>");var t=$("#"+e.id);t.click(function(a){clearSelf(t);addToRight(e)})}}}function addToRight(e){if(right){if(!checkId(right,e.id)&&_options.selects){right.append("<button class='u-btn sm' id = "+e.id+" data = "+e.data+" name = "+e.name+">"+e.name+"<i class='iconfont'>&#xe602;</i></button>");var t=$("#"+e.id);t.click(function(a){clearSelf(t);if(center.attr("table-list")!="true"){addToCenter(e)}else{addToCenterList(e)}})}else if(_options.selects==false){right.children("button").each(function(t,a){var n=$(a);clearSelf(n);var i={id:n.attr("id"),name:n.attr("name"),data:n.attr("data")};if(center.attr("table-list")!="true"){addToCenter(e)}else{addToCenterList(e)}});right.append("<button class='u-btn sm' id = "+e.id+" data = "+e.data+" name = "+e.name+">"+e.name+"<i class='iconfont'>&#xe602;</i></button>");var t=$("#"+e.id);t.click(function(a){clearSelf(t);if(center.attr("table-list")!="true"){addToCenter(e)}else{addToCenterList(e)}})}}}function checkId(e,t){var a=false;e.children().each(function(e,n){if(t==$(n).attr("id")){a=true}});return a}function checkDataId(e,t){var a=false;for(var n=0;n<e.length;n++){var i=e[n];if(t==i.id){a=true}}return a}function clearSelf(e){e.unbind("click");e.remove()}function getChooseJson(){var str="[";right.children().each(function(e,t){var a=$(t);var n="{'id':'"+a.attr("id")+"','name':'"+a.attr("name")+"','data':'"+a.attr("data")+"', 'tId':'"+a.attr("tId")+"'}";if(str=="["){str+=n}else{str+=","+n}});str+="]";var jstr=eval("("+str+")");return jstr}}},an_selectorTree:function(){var options={};var funstyle="";for(var i=0;i<arguments.length;i++){var a=arguments[0];if(typeof a=="object"){options=a}else if(typeof a=="string"){funstyle=a}}if(funstyle!=""){}else{var _options=$.extend({treeid:"",selects:true,treeData:options.url||"",nodes:[],rightNodes:[],treeTitle:options.leftTitle||"部门结构",submit:function(){}},options);var sel=$(this);var right=sel.find("[right]");var cancel=sel.find("[cancel]");var submit=sel.find("[submit]");var treeTitle=sel.find("[treeTitle]");var chooseData=[];var currentTreeNode="";var treeObject=$.fn.zTree.getZTreeObj(_options.treeid);if(treeTitle.length===0){var treeTitle=sel.find("[leftTitle]")}var setting={treeId:"1",treeObj:null,callback:{onCheck:function(e,t,a){onTreeCheck(a)}},check:{enable:true,chkStyle:"checkbox",chkboxType:{Y:"s",N:"s"}},data:{simpleData:{enable:true}}};if(!_options.selects){setting.check={enable:true,chkStyle:"radio"}}var tree="";if(_options.treeData==""){$.fn.zTree.init($("#"+_options.treeid),setting,_options.nodes);tree=$("#"+_options.treeid);initRight()}else{andy.loaddata(_options.treeData,function(e){e=andy.stringToJson(e);$.fn.zTree.init($("#"+_options.treeid),setting,e);tree=$("#"+_options.treeid);initRight()})}function initRight(){if(_options.rightNodes.length>0){for(var e=0;e<_options.rightNodes.length;e++){var t=_options.rightNodes[e];addToRight(t);var a=$.fn.zTree.getZTreeObj(_options.treeid);var n=a.getNodeByParam("id",t.id);a.checkNode(n,true,false)}}}if(treeTitle){treeTitle.text(_options.treeTitle)}if(cancel){if(_options.selects==false){cancel.addClass("f-hidden")}cancel.click(function(){if(right){right.children().each(function(e,t){var a=$(t);var n=$.fn.zTree.getZTreeObj(_options.treeid);var i=a.attr("id");var r=n.getNodeByParam("id",i);removeToRight(r)})}})}if(submit){submit.click(function(){_options.submit(getChooseJson())})}function onTreeCheck(e){if(e){if(e.checked){goCheck(e,true)}else{goCheck(e,false)}}}function goCheck(e,t){if(e&&t){if(e.children&&_options.selects){addToRight(e);for(var a=0;a<e.children.length;a++){goCheck(e.children[a],t)}}else{addToRight(e)}}else if(!t){if(e.children){removeToRight(e);for(var a=0;a<e.children.length;a++){goCheck(e.children[a],t)}}else{removeToRight(e)}}}function addToRight(e){if(right){if(!checkId(right,e.id)&&_options.selects){right.append("<button class='u-btn sm' id = "+e.id+" data = "+e.data+" name = "+e.name+">"+e.name+"<i class='iconfont'>&#xe602;</i></button>");var t=right.find("#"+e.id);t.click(function(t){removeToRight(e)})}else if(_options.selects==false){var a=$.fn.zTree.getZTreeObj(_options.treeid);right.children("button").each(function(e,t){var n=$(t).attr("id");var i=a.getNodeByParam("id",n);removeToRight(i)});right.append("<button class='u-btn sm' id = "+e.id+" data = "+e.data+" name = "+e.name+">"+e.name+"<i class='iconfont'>&#xe602;</i></button>");var t=right.find("#"+e.id);t.click(function(t){removeToRight(e)})}}}function removeToRight(e){var t=right.find("#"+e.id);clearSelf(t);var a=$.fn.zTree.getZTreeObj(_options.treeid);if(!e.tId){e=a.getNodeByParam("id",e.id)}a.checkNode(e,false,false)}function checkId(e,t){var a=false;e.children().each(function(e,n){if(t==$(n).attr("id")){a=true}});return a}function checkDataId(e,t){var a=false;for(var n=0;n<e.length;n++){var i=e[n];if(t==i.id){a=true}}return a}function clearSelf(e){e.unbind("click");e.remove()}function getChooseJson(){var str="[";right.children().each(function(e,t){var a=$(t);var n="{'id':'"+a.attr("id")+"','name':'"+a.attr("name")+"','data':'"+a.attr("data")+"'}";if(str=="["){str+=n}else{str+=","+n}});str+="]";var jstr=eval("("+str+")");return jstr}}}});andy.openSelectorDialog=function(e){var t,a={title:"人员选择",treeTitle:"部门结构",treeData:"/project/tsi/data/department.json",callback:function(e){},cal:function(){}};t=$.extend({},a,e);$(document).an_dialog({id:"openSelector",width:e.width||823,height:455,title:t.title,url:e.url||(e.pathroot||"")+"/andyui/admin/js/selector/selector.html",data:t})};andy.initSelector=function(e){if(e.getAttribute("options")){var t=andy.stringToJson(e.getAttribute("options"));t.callback=function(a){t.rightNodes=a;andy.multiSelect({parent:$(e).find("[selectorListBox]")[0],dataKey:t.dataKey,onDelete:function(e){a.splice(e-1,1)},list:a})};if(t.rightNodes&&t.rightNodes.length!==0){t.callback(t.rightNodes)}$(e).find("[openSelector]").click(function(){if(e.className.indexOf("tree-selector")>0){t.url=(t.pathroot||"")+"/andyui/admin/js/selector/tree-selector.html";t.width=420}else if(e.className.indexOf("multi-selector")>0){t.url=(t.pathroot||"")+"/andyui/admin/js/selector/tabs-selector.html"}andy.openSelectorDialog(t)})}};$(document).ready(function(){$(".selector").each(function(e,t){andy.initSelector(t)})})})(jQuery);(function(e){e.fn.extend({an_combo:function(){var t={};var a="";var n=arguments[0];typeof n=="object"?t=n:a=n;var i=e.extend({comboId:"",comboSize:"",touchTargetType:"input",inputVerify:"",showTargetType:"list",changeTarget:true,inputName:"",showUrl:"",showData:[],checked:[],treeCheckBoxType:{},defaultValue:"下拉选择",treeId:"",treeSetting:{},treeAsync:{},selects:false,isEnable:true,isText:false,row:0,showHeight:200,open:false,windowAuto:true,idvalue:"id",valuedata:"value",namevalue:"name",editor:false,onChange:function(){}},t);var r=e(this);if(r.is("input")){var o=r.attr("id");r.removeAttr("id","");r.removeAttr("an-combo","");if(!o){o="combo_"+andy.getRandom(1e4)}var l=r.attr("style");r.removeAttr("style");i.inputName=r.attr("name");r.removeAttr("name");var s=r.attr("options");s="options = "+s;r.removeAttr("options","");var c="m-combo";if(r.attr("class")){c=r.attr("class");r.attr("class","")}r.css("type","hidden");var d="<div class = '"+c+"' id = '"+o+"' style = '"+l+"' "+s+" an-combo></div>";r.before(d);r.remove();r=e("#"+o)}if(r.attr("an-combo")!="an-combo"){r.attr("an-combo","an-combo")}if(i.comboId==""){r=andy.setRandomId(r,"combo_");i.comboId=r.attr("id")}var f=e(document);var u=e(window);var h=0;var v="EVENT_ROW";var p="EVENT_SET_DEFAULT";var g="EVENT_GET_VALUE";var m="EVENT_GET_ID";var b="EVENT_SHOW";var y="EVENT_ENABLE";var w="EVENT_CHOOSE";var x="EVENT_HIDDEN_TARGET";var T="EVENT_UPDATE_URL";var k="EVENT_TREE";var _="click";var C=true;var E=r.attr("options");var I="";if(E){E="{"+E+"}";E=andy.stringToJson(E);for(var $ in E){if($=="onChange"){var S=E[$];i.onChange=andy.stringToJson(S)}else if($=="checked"){var D=E[$].split(",");i.checked=D}else{if(E[$]=="true"){i[$]=true}else if(E[$]=="false"){i[$]=false}else{i[$]=E[$]}}}}i.combo=r;r.data("options",i);i.valueForInput=null;r.find("input").each(function(t,a){if(e(a).attr("type")=="hidden"){i.valueForInput=e(a)}});if(a!=""){if(a=="row"){var N=arguments[1];if(r&&r[0]){r.trigger(v,N)}}else if(a=="setDefault"){var A=arguments[1];r.trigger(p,A)}else if(a=="setCurrentChoose"){var j=arguments[1];var O={choose:j};r.trigger(w,O)}else if(a=="getValue"){var A=arguments[1];r.trigger(g,A)}else if(a=="getChooseId"){var A=arguments[1];r.trigger(m,A)}else if(a=="getShowTarget"){return andy.combo("getShowTarget",e("#"+i.comboId))}else if(a=="setShowTarget"){var R=arguments[1];r.trigger(b,R)}else if(a=="addTree"){var V=arguments[1];r.trigger(k,V)}else if(a=="isEnable"){var H=arguments[1];r.trigger(y,H)}else if(a=="hiddenTarget"){r.trigger(x)}else if(a=="updateUrl"){var L=arguments[1];var z={data:L};r.trigger(T,z)}}else{if(andy.IE()==6){r.find("ul").each(function(t,a){var n=e(a);if(!n.prev().is("div")){n.before("<div></div>")}})}var W=function(){var e=false;if(f.height()>u.innerHeight()){e=true}return e};var F=function(){if(r.showTarget.children().length>i.row&&i.row!=0){r.showTarget.addClass("u-overflow-y");h=i.row*r.showTarget.children().outerHeight();r.showTarget.height(h)}else{r.showTarget.removeClass("u-overflow-y");h=0;r.showTarget.css("height","")}};var P=function(e){if(e<r.showTarget.height()){r.showTarget.addClass("u-overflow-y");r.showTarget.outerHeight(e)}};var M=function(e,t){var a=e.offset();var n=a.left;var o=a.top;var l=f.width();var s=f.height();var c=f.scrollTop();var d=t.outerWidth();F();var h=t.height();var v=0;if(W()){v=17}if(l-n-v>=d){t.css({left:"0px",right:"auto"})}else{t.css({left:"auto",right:"0px"})}var p=r.touchTarget.outerHeight();var g=u.height()-(o-c);var m=u.height()-g-p;if(i.windowAuto){if(g>=m){t.css("top",p+"px");P(g-p)}else{P(u.height()-g);h=r.showTarget.outerHeight();t.css("top",-h+"px")}}else{t.css("top",p+"px");P(g-p)}};var R=function(e,t){var a=e.offset();var n=a.left;var o=a.top;var l=f.width();var s=f.height();var c=f.scrollTop();var d=t.outerWidth();var h=t.height();var v=0;if(W()){v=17}if(l-n-v>=d){t.css({left:"0px",right:"auto"})}else{t.css({left:"auto",right:"0px"})}var p=r.touchTarget.outerHeight();var g=u.height()-(o-c);var m=u.height()-g-p;if(i.windowAuto){if(g>=m){t.css("top",p+"px");P(g-p)}else{P(u.height()-g);h=r.showTarget.outerHeight();t.css("top",-h+"px")}}else{t.css("top",p+"px");P(g-p)}};var B=function(t,a){if(a){r.showTarget.empty()}if(t instanceof jQuery){r.showTarget.replaceWith(t)}else{r.showTarget.replaceWith(e(t))}andy.combo({combo:r,showEvent:_,showComplete:function(){if(i.showTargetType=="list"){M(r,r.showTarget)}else{t(r,r.showTarget)}}});i.showData=[];r.an_combo_bindEvent(i)};var U=function(){if(r){var e=r.touchTarget;if(e.is("input")==false){e=e.find("input")}if(r.data("isEnable")==true){e.removeAttr("disabled");r.removeClass("u-disabled")}else{e.attr("disabled","disabled");r.addClass("u-disabled")}}};var J=function(e,t,a){e.data("selects",i.selects);e.data("isEnable",i.isEnable);e.data("isText",i.isText);e.an_combo_creatTouch(i);e.an_combo_creatShow(i)};if(r.children().length==0){J(r,i.touchTargetType,i.showTargetType)}else{var q=andy.combo("getTouchTarget",r);if(q.is("a")){i.touchTargetType="button";if(i.inputName==""){i.inputName=i.comboId}if(i.valueForInput==null){r.append("<input type = 'hidden' name = '"+i.inputName+"'>");i.valueForInput=r.find("input")}}J(r,i.touchTargetType,i.showTargetType);if(i.editor==false){r.find(".u-input").addClass("u-diseditor")}else{r.find(".u-input").attr("readonly",null)}}andy.combo({combo:r,showEvent:_,showComplete:function(){r.css("z-index",99999);r.showTarget.css("z-index",99999);if(i.showTargetType=="list"){M(r,r.showTarget)}else{R(r,r.showTarget)}},hiddenComplete:function(){r.css("z-index","");r.showTarget.css("z-index","")}});U();i.valueForInput=r.touchTarget;if(i.valueForInput.is("input")==false){i.valueForInput.find("input").each(function(t,a){i.valueForInput=e(a)})}if(i.valueForInput.is("input")){if(i.inputName==""&&i.valueForInput.attr("name")==undefined){i.inputName=i.comboId+"_input";i.valueForInput.attr("name",i.inputName)}else if(i.valueForInput.attr("name")==undefined){i.valueForInput.attr("name",i.inputName)}}r.bind(v,function(e,t){i.row=t});r.bind(b,function(e,t){B(t,true)});r.bind(k,function(e,t){});if(r.showTarget.is("ul")){}r.bind(p,function(t,a){var n=r.touchTarget;var o="";var l="";var s="";if(n.is("input")==false){n=n.find("input")}if(r.showTarget.is("ul")){r.showTarget.children().each(function(t,a){var n=e(a);if(n.hasClass("active")){n.removeClass("active")}if(i.checked.length>0){for(var r in i.checked){if(n.attr("listId")==i.checked[r]){n.addClass("active");if(s==""){o=n.text();l=n.attr("value");s=n.attr("listId")}else{o+=","+n.text();l=n.attr("value");s+=","+n.attr("listId")}}}}})}if(n.is("input")){if(i.checked.length>0){n.attr({value:o,idValue:s,valueData:l});n.val(o)}else{n.attr({value:i.defaultValue,idValue:"",valueData:""});n.val(i.defaultValue)}}if(a){a(l,s)}});r.bind(y,function(e,t){r.data("isEnable",t);U()});r.bind(x,function(e){andy.combo("hiddenTarget",r)});r.bind(T,function(e,t){r.an_combo("setDefault");var a=t.data;var n=r.data("options");r.showTarget.empty();n.combo=r;if(typeof a=="string"){n.showUrl=a}else if(typeof a=="object"){n.showData=a}r.an_combo_creatShow("eventBind",n)});r.an_combo_creatShow("eventBind",i);r.bind(w,function(e,t){})}},an_combo_creatTouch:function(){var t={};var a="";for(var n=0;n<arguments.length;n++){var i=arguments[0];if(typeof i=="object"){t=i}else if(typeof i=="string"){a=i}}var r=e.extend({combo:"",comboName:"combo",inputVerify:"",checked:"",selects:false,defaultValue:"下拉选择",touchTargetType:""},t);var o="EVENT_ADD_CHOOSE";var l="EVENT_CANCEL_CHOOSE";var s="EVENT_GET_VALUE";var c="EVENT_GET_ID";var d=e(this).attr("id");var f=e("#"+d);var u="";var h="";if(f.data("selects")!=undefined){r.selects=f.data("selects")}if(a!=""){if(a=="addChoose"){var v=arguments[1];f.trigger(o,v)}else if(a=="cancelChoose"){var v=arguments[1];f.trigger(l,v)}else if(a=="getValue"){var p=arguments[1];f.trigger(s,p)}}else{var g=function(e){h.addElement(e)};var m=function(e){h.deleteElement(e)};var b=function(t){var a=e("#"+d);var n=andy.combo("getTouchTarget",a);var i=n;var o=r.valueForInput;if(o.is("input")==false){o.find("input").each(function(t,a){o=e(a)})}var l=i.attr("value");var s=o.attr("idValue");if(t.attr&&typeof t.attr!="string"){t.attr=""}var c=o.attr("valueData");if(l==undefined||l==""||l==r.defaultValue){l=t.name;s=t.id;c=t.value||t.attrValue||t.attr}else{l=l+"，"+t.name;s=s+","+t.id;var f=t.value||t.attrValue||t.attr;c=c+","+f}if(r.selects==false){o.attr({idValue:t.id,valueData:t.value||t.attrValue||t.attr});if(r.changeTarget){i.html(t.name+"<i class='iconfont'>&#xe613;</i>")}}else{o.attr({idValue:s,valueData:c});if(r.changeTarget){i.text(l+"<i class='iconfont'>&#xe613;</i>")}}if(o.attr("verify")){}};var y=function(t){var a=e("#"+d);if(r.valueForInput==null){if(a.find("input").length==0){a.append("<input type = 'hidden' name = '"+r.inputName+"'>");r.valueForInput=a.find("input")}}var n=r.valueForInput;if(n.is("input")==false){n.find("input").each(function(t,a){n=e(a)})}if(n&&n.is("input")){var i=n.attr("idValue");if(i!=undefined&&i!=""){var o=i.split(",");var l=false;for(var s=0;s<o.length;s++){if(o[s]==t.id){l=true}}if(!l){b(t)}}else{b(t)}}};var w=function(e){};var x=function(e){var t="";for(var a=0;a<e.length-1;a++){t+=e[a].name+"-"}return t};var T=function(t){var a=e("#"+d);var n=andy.combo("getTouchTarget",a);if(n.is("input")==false){n.find("input").each(function(t,a){n=e(a)})}var i=n.attr("value");var o=n.attr("idValue");if(t.attr&&typeof t.attr!="string"){t.attr=""}var l=n.attr("valueData");var s="";if(t.getParentNode&&r.selects==false){s=x(t.getPath())}else if(t.path&&r.selects==false){s=x(t.path)}if(i==undefined||i==""||i==r.defaultValue){i=s+t.name;o=t.id;l=t.value||t.attrValue||t.attr}else{i=i+"，"+s+t.name;o=o+","+t.id;var c=t.value||t.attrValue||t.attr;l=l+","+c}if(r.selects==false){n.attr({value:s+t.name,idValue:t.id,valueData:t.value||t.attrValue||t.attr});n.val(s+t.name)}else{n.attr({value:i,idValue:o,valueData:l});n.val(i)}if(n.attr("verify")){andy.inputCheck(n[0])}};var k=function(t){var a=andy.combo("getTouchTarget",e("#"+d));if(a.is("input")==false){a.find("input").each(function(t,n){a=e(n)})}if(a&&a.is("input")){var n=a.attr("idValue");if(n!=undefined&&n!=""){var i=n.split(",");var r=false;for(var o=0;o<i.length;o++){if(i[o]==t.id){r=true}}if(!r){T(t)}}else{T(t)}}};var _=function(t){var a=andy.combo("getTouchTarget",e("#"+d));if(a.is("input")==false){a.find("input").each(function(t,n){a=e(n)})}if(a&&a.is("input")){var n=a.attr("value");var i=a.attr("idValue");var r=a.attr("valueData");var o=n.split("，");var l=i.split(",");var s=r.split(",");for(var c=0;c<l.length;c++){if(l[c]==t.id){l.splice(c,1);o.splice(c,1);s.splice(c,1)}}a.attr("value","");a.attr("idValue","");a.attr("valueData","");var n=a.attr("value");var i=a.attr("idValue");var r=a.attr("valueData");for(var c=0;c<l.length;c++){var f=o[c];var u=l[c];var h=s[c];if(c==0){n=f;i=u;r=h}else{n=n+"，"+f;i=i+","+u;r=r+","+h}}a.attr("value",n);a.val(n);a.attr("idValue",i);a.attr("valueData",r)}};var C=function(e){if(r.touchTargetType=="input"){k(e)}else if(r.touchTargetType=="button"){y(e)}else if(r.touchTargetType=="selects"){g(e)}};var E=function(e){if(r.touchTargetType=="input"){_(e)}else if(r.touchTargetType=="button"){w(e)}else if(r.touchTargetType=="selects"){m(e)}};if(r.touchTargetType=="input"){if(r.combo.children().length==0){var I="";if(r.combo.data("isEnable")==false){I="disabled"}if(r.checked.length>0){r.defaultValue=""}r.combo.append("<div class='u-group "+r.comboSize+"'><input class = 'item item-l u-input u-diseditor' readonly='readonly' verify = '"+r.inputVerify+"' value = '"+r.defaultValue+"' "+I+" combo = '"+r.comboName+"'><i class='iconfont mark item item-r'>&#xe613;</i></div>");andy.formlayout()}}else if(r.touchTargetType=="button"){if(r.combo.children().length==0){var I="";if(r.combo.data("isEnable")==false){I="disabled"}if(r.checked.length>0){r.defaultValue=""}r.combo.append("<a class='u-btn "+r.comboSize+"' combo = '"+r.comboName+"'>"+r.defaultValue+"<i class='iconfont'>&#xe613;</i></a>");r.combo.toggleClass("u-btn-eject u-group-center");andy.formlayout()}}else if(r.touchTargetType=="selects"){u=d+"_selects";if(r.combo.children().length==0){r.combo.append("<div class='u-btn-eject' style='width:100%;' combo = '"+r.comboName+"'><div class='u-btn-checkbox f-clear' id="+u+"></div></div>")}var $=r.inputName;if($=""){$=d+"_input"}h=andy.multiSelect({parent:document.getElementById(u),dataKey:$,list:[]})}f.bind(o,function(e,t){C(t)});f.bind(l,function(e,t){E(t)});f.bind(s,function(t,a){var n=andy.combo("getTouchTarget",e("#"+d));if(n){var i=n.attr("valueData");a(i)}});f.bind(c,function(t,a){var n=andy.combo("getTouchTarget",e("#"+d));if(n.is("input")==false){n.find("input").each(function(t,a){n=e(a)})}if(n){var i=n.attr("idvalue");a(i)}})}},an_combo_creatShow:function(){var t={};var a="";for(var n=0;n<arguments.length;n++){var i=arguments[0];if(typeof i=="object"){t=i}else if(typeof i=="string"){a=i}}var r=e.extend({combo:"",comboName:"combo",showTargetType:""},t);var o="EVENT_BIND";if(a!=""){if(a=="eventBind"){var l=arguments[1];e(this).trigger(o,l)}}else{if(r.showTargetType=="list"){if(r.combo.children().length==1){r.combo.append("<ul class = 'combo m-menu' combo = '"+r.comboName+"'></ul>")}}else if(r.showTargetType=="tree"){if(r.combo.children().length==1){r.combo.append("<div class='combo but-tree' style='height:"+r.showHeight+"px;' combo ='"+r.comboName+"'></div>")}}r.combo.bind(o,function(e,t){r.combo.an_combo_bindEvent(t)})}},an_combo_bindEvent:function(){var t={};var a="";for(var n=0;n<arguments.length;n++){var i=arguments[0];if(typeof i=="object"){t=i}else if(typeof i=="string"){a=i}}var r=e.extend({combo:"",selects:false,checked:[],treeId:"",onChange:function(){},touchTargetType:"input",showTargetType:"list",showUrl:""},t);var o=r.combo.touchTarget;var l=r.combo.showTarget;if(e(this).data("selects")!=undefined){r.selects=e(this).data("selects")}if(a!=""){if(a=="setCurrentChoose"){}}else{var s=function(t,a){var n=r.combo;if(a){n.showTarget.empty()}if(t instanceof jQuery){n.showTarget=t}else{n.showTarget=e(t)}};var c=function(e){if(e.checked){r.combo.an_combo_creatTouch("addChoose",e)}else{r.combo.an_combo_creatTouch("cancelChoose",e)}};var d=function(e,t){if(e&&t&&e.checked){if(e.children&&r.selects){r.combo.an_combo_creatTouch("addChoose",e);for(var a=0;a<e.children.length;a++){d(e.children[a],t)}}else{r.combo.an_combo_creatTouch("addChoose",e)}}else if(!t){if(e.children){r.combo.an_combo_creatTouch("cancelChoose",e);for(var a=0;a<e.children.length;a++){d(e.children[a],t)}}else{r.combo.an_combo_creatTouch("cancelChoose",e)}}};var f=function(e){if(e){d(e,e.checked)}};var u=function(t,a){if(!a){return false}var n=e.fn.zTree.getZTreeObj(t);for(var i=0;i<a.length;i++){var o=n.getNodeByParam("id",a[i],null);if(o){n.checkNode(o,true,true);var l={path:o.getPath(),children:o.children,value:o[r.valuedata],attr:o.attr||"",name:o[r.namevalue],children:o.children,checked:o.checked,id:o[r.idvalue]};f(l)}}};var h=function(e){var t={checked:e.hasClass("active"),value:e.attr("value"),id:e.attr("listId"),name:e.text()};return t};var v=function(){var t=r.checked.length;l.children().each(function(a,n){var i=e(n);if(!i.attr("listId")){i.attr("listId",r.combo.attr("id")+"_"+a)}if(t>0){for(var o=0;o<t;o++){if(i.attr("listId")==String(r.checked[o])){i.addClass("active");var s=h(i);c(s)}}}i.unbind("click");i.on("click",function(t){var a=e(t.target);if(a.is("li")==false){a=a.closest("li")}if(!r.selects){l.children().each(function(t,a){e(a).removeClass("active")})}a.toggleClass("active");

var n=h(a);i.comboData=n;c(n);e("#"+r.comboId).trigger(andy.COMBO_CHOOSE_LISET,i);r.onChange(i);if(r.selects==false&&a.is("li")){andy.combo("hiddenTarget",r.combo)}})})};var p=function(t,a,n,i){var o=t;r.selects=i.selects;var l=i.checked;var c=r.combo;var d={treeObj:null,callback:{onCheck:function(e,t,a){var n={path:a.getPath(),children:a.children,value:a[r.valuedata],attr:a.attr||"",name:a[r.namevalue],children:a.children,checked:a.checked,id:a[r.idvalue]};f(n);r.onChange(a)}},check:{enable:true,autoCheckTrigger:true,chkStyle:"checkbox",chkboxType:{Y:"s",N:"s"}},data:{key:{name:r.namevalue},simpleData:{enable:true,idKey:r.idvalue}}};if(r.treeCheckBoxType!={}){d.check.chkboxType=r.treeCheckBoxType}if(r.treeAsync!={}){d.async=r.treeAsync}if(r.selects==false){d.check={enable:true,radioType:"all",chkStyle:"radio"}}if(a){d=e.extend(true,{},d,a)}c.showTarget.append("<div class='g-h-max'><ul id='"+o+"' class='ztree'></ul></div>");var h="";if(n){e.fn.zTree.init(e("#"+o),d,n);h=e("#"+o);u(o,l);s(c.showTarget)}else if(i&&i.url){andy.loaddata(i.url,function(t){t=andy.stringToJson(t);e.fn.zTree.init(e("#"+o),d,t);h=e("#"+o);u(o,l);s(c.showTarget)})}};var g=function(e){if(r.showTargetType=="list"){var t="";for(var a=0;a<e.length;a++){var n=e[a];var i="";var o="";var s="";var c="";if(a==0){i="first"}if(n[r.valuedata]){o="value = "+n[r.valuedata]}else if(n.attrValue){c="attrValue = "+n.attrValue}else if(n.attr){s="attrStr = "+n.attr}var d="<li class = '"+i+"' "+o+" "+s+" "+c+" listId = '"+n[r.idvalue]+"' ><a>"+n[r.namevalue]+"</a></li>";t+=d}l.append(t);v()}else if(r.showTargetType=="tree"){if(r.treeId==""){r.treeId="treeId_"+andy.getRandom(1e4)}p(r.treeId,r.treeSetting,e,r)}};if(r.showUrl==null||r.showUrl==""&&r.showData.length==0){if(r.showTargetType=="list"){v()}return false}else if(r.showUrl!=""){andy.loaddata(r.showUrl,function(e){e=andy.stringToJson(e);if(e.length>0){g(e)}})}else if(r.showData.length>0){if(typeof r.showData=="string"){r.showData=andy.stringToJson(r.showData)}g(r.showData)}else{if(r.showTargetType=="list"){v()}}r.combo.bind("EVENT_CHOOSE",function(t,a){l.children().each(function(t,n){var i=e(n);for(var o=0;o<a.choose.length;o++){if(parseInt(i.attr("listId"))==a.choose[o]){if(!r.selects){l.children().each(function(t,a){e(a).removeClass("active")})}i.addClass("active");var s=h(i);c(s)}}})})}}})})(jQuery);(function(e){e.fn.extend({an_spinner:function(){var t={};var a="";var n=arguments[0];typeof n=="object"?t=n:a=n;var i=e.extend({spinnerSize:"",increment:1,min:0,max:99999,inputName:"",value:1,onChange:function(){}},t);var r=e(this);if(r.is("input")){var o=r.attr("id");r.removeAttr("id","");r.removeAttr("an-spinner","");if(!o){o="spinner_"+andy.getRandom(1e4)}var l=r.attr("style");if(r.attr("name")){i.inputName=r.attr("name");r.removeAttr("name")}if(r.attr("value")){i.value=r.attr("value");r.removeAttr("value")}var s=r.attr("options");r.css("display","none");var c="<a class='item item-l u-btn' sub><i class='iconfont'>&#xe670;</i></a>";var d="<a class='item item-r u-btn' add><i class='iconfont'>&#xe66f;</i></a>";var f="<input type='text' class='item u-input nohover' name = '"+i.inputName+"' style='text-align:center; width:0px; text-indent:0' value='"+i.value+"' val>";var u="<div class='u-group "+i.spinnerSize+"' id = '"+o+"' style = '"+l+"' options = "+s+" an-spinner>"+c+f+d+"</div>";r.before(u);r=e("#"+o);andy.layout(r.parent())}var h=r.find("[sub]");var v=r.find("[val]");var p=r.find("[add]");var g="EVENT_VALUE";var m=r.attr("options");if(m){m="{"+m+"}";m=andy.stringToJson(m);for(var b in m){if(b=="onChange"){var y=m[b];i.onChange=function(e){var t;if(typeof y=="string"){t=andy.stringToJson(y)}else{t=y}t(e)}}else if(b=="increment"){i.increment=parseInt(m[b])}else if(b=="min"){i.min=parseInt(m[b])}else if(b=="max"){i.max=parseInt(m[b])}else{if(m[b]=="true"){i[b]=true}else if(m[b]=="false"){i[b]=false}else{i[b]=m[b]}}}}if(a!=""){if(a=="getValue"){var w=arguments[1];r.trigger(g,w)}}else{r.bind(g,function(e,t){t(v.val())});h.click(function(e){var t=parseInt(v.val());if(t>i.min){t-=i.increment;v.val(t);v.attr("value",t);i.onChange(v.val())}});p.click(function(e){var t=parseInt(v.val());if(t<i.max){t+=i.increment;v.val(t);v.attr("value",t);i.onChange(v.val())}})}}})})(jQuery);(function(e){var t=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks){for(var a=t.length;a;){e.event.fixHooks[t[--a]]=e.event.mouseHooks}}e.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var e=t.length;e;){this.addEventListener(t[--e],n,false)}}else{this.onmousewheel=n}},teardown:function(){if(this.removeEventListener){for(var e=t.length;e;){this.removeEventListener(t[--e],n,false)}}else{this.onmousewheel=null}}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}});function n(t){var a=t||window.event,n=[].slice.call(arguments,1),i=0,r=true,o=0,l=0;t=e.event.fix(a);t.type="mousewheel";if(a.wheelDelta){i=a.wheelDelta/120}if(a.detail){i=-a.detail/3}l=i;if(a.axis!==undefined&&a.axis===a.HORIZONTAL_AXIS){l=0;o=-1*i}if(a.wheelDeltaY!==undefined){l=a.wheelDeltaY/120}if(a.wheelDeltaX!==undefined){o=-1*a.wheelDeltaX/120}n.unshift(t,i,o,l);return(e.event.dispatch||e.event.handle).apply(this,n)}})(jQuery);(function(e){e.findOutElement=function(e,t,a,n,i){if(e){var r,o=e.ownerDocument;while(e&&e!==o){if(e.getAttribute){if(n){r=e.getAttribute(n);if(r===""||r){return}}if(i){r=e.getAttribute(i);if(r===""||r){return}}r=e.getAttribute(t);if(r===""||r){if(a!==undefined){if(r.indexOf(a)>-1){return e}}else{return e}}}e=e.parentNode}}};var t=[],a=0,n,i=false,r={},o={},l=new Date,s;var c=function(e){e.className=e.className+" u-global-drag"};var d=function(e){e.className=e.className.replace(" u-global-drag","")};var f=function(a){var l;if(!i&&t.length>0){for(l=t.length-1;l>=0;l--){i=e.arrayFunCall(t[l].onDragCheck,{event:a,data:t[l].data});if(i){n=t[l];break}}if(i){c(n.element||document.body);r.x=o.x=a.clientX;r.y=o.y=a.clientY;if(a.stopPropagation){a.stopPropagation()}else{a.cancelBubble=true}}}};var u=function(a){var r,c,d={};if(t.length>0){if(i&&n){var f=new Date-l;if(f>n.restrictedMoveTime){l=f;if(s===undefined){s=true;if(n.onDragBefore.length>0){s=e.arrayFunCall(n.onDragBefore,[a])}}d.x=a.clientX-o.x;d.y=a.clientY-o.y;o.x=a.clientX;o.y=a.clientY;if(s){if(n.lockRect){if(a.clientX>n.lockRect.x+n.lockRect.w){d.x=0;o.x=n.lockRect.x+n.lockRect.w}if(a.clientX<n.lockRect.x){d.x=0;o.x=n.lockRect.x}if(a.clientY>n.lockRect.y+n.lockRect.h){d.y=0;o.y=n.lockRect.y+n.lockRect.h}if(a.clientY<n.lockRect.y){d.y=0;o.x=n.lockRect.y}}if(n.lockX){d.y=0}if(n.lockY){d.x=0}e.arrayFunCall(n.onDragOn,{offset:d,data:n.data,event:a})}}return false}else{for(r=t.length-1;r>=0;r--){c=e.arrayFunCall(t[r].onMoveCheck,{event:a,data:t[r].data});if(c){break}}}}};var h=function(t){if(i&&n){var a=e.arrayFunCall(n.onDragEnd,{event:t,data:n.data});d(n.element||document.body);i=false;s=undefined;n=undefined;return a}};var v=function(){$(document).on("mousedown",f);$(document).on("mousemove",u);$(document).on("mouseup",h)};var p=function(){$(document).off("mousedown",f);$(document).off("mousemove",u);$(document).off("mouseup",h)};e.drag=function(n){var i={lockX:false,lockY:false,lockRect:undefined,restrictedMoveTime:12,data:{},onMoveCheck:[],onDragCheck:[],onDragBefore:[],onDragOn:[],onDragBeforeEnd:[],onDragEnd:[]};var r={};var o=e.extend(i,n);r.addEventCall=function(e,t){if(o[e]){o[e].push(t)}};r.getData=function(){return o.data};r.destroy=function(){t.splice(o.dragIndex,1);if(t.length===0){p()}};if(t.length===0){v()}o.dragIndex=a;a++;t.push(o);return r};var g=function(e){if(typeof e==="string"){}if(typeof e==="object"){e.setAttribute("andyDrag","true")}};var m=function(){};e.dragElement=function(t){var a,n,i,r,o,l;var s=function(t,a){a=a||e.findOutElement(t.event.target,n.dragName,"true",undefined,n.notDragEl);if(a){return true}return false};var c=function(t){var a=e.findOutElement(t.event.target,n.dragName,"true",undefined,n.notDragEl);if(a&&s(t,a)){i=a;return true}else{i=undefined;return false}};var d=function(e){if(n.dragHelp){}else if(n.dragCopyEl){r=i.cloneNode(true);r.style.position="absolute";r.style.left=i.offsetLeft+"px";r.style.top=i.offsetTop+"px";i.parentNode.appendChild(r)}return n.onDragBeforeElement(i,e,r)&&true};var f=function(e){var t,a,s,c,d,f;c=function(i){d=i.offsetLeft-parseInt($(i).css("margin-left"),10)+e.offset.x;f=i.offsetTop-parseInt($(i).css("margin-top"),10)+e.offset.y;if(n.lockInParent){a=i.parentNode.offsetWidth;s=i.parentNode.offsetHeight;t(i)}e.left=d;e.top=f;i.style.left=d+"px";i.style.top=f+"px"};t=function(e){var t=parseInt($(e).css("margin-left"),10),n=parseInt($(e).css("margin-top"),10);if(o===undefined){o=a-$(e).outerWidth()-t-t}if(l===undefined){l=s-$(e).outerHeight()-n}d=d<0?0:d;d=d>o?o:d;f=f<0?0:f;f=f>l?l:f};if(n.dragSelf){if(i.getAttribute("lockx")==="true"){e.offset.y=0}if(i.getAttribute("locky")==="true"){e.offset.x=0}c(i)}if(r){c(r)}return n.onDragElement(i,e,r)};var u=function(e){n.onDragEndElement(i,e,r);if(r&&r.parentNode){r.parentNode.removeChild(r)}i=undefined;o=undefined;l=undefined;return false};var h={element:document.body,lockInParent:true,dragSelf:true,dragHelp:false,dragCopyEl:false,dragName:"andyDrag",onDragCheck:[c],onMoveCheck:[s],onDragBefore:[d],onDragOn:[f],onDragEnd:[u],posCheck:function(){},onDragElement:function(){return true},onDragEndElement:function(){return true},onDragBeforeElement:function(){return true}};n=e.extend(h,t);a=e.drag(n);return a};e.dragElement()})(andy);(function(e){var t='<div  class="multi-select-box" style="position:relative;width: 100%;height:100%">'+'{{each list as value i}}<span multiSelect="true" index="{{i+1}}" data-id="{{list[i].val||list[i].id||list[i].text}}" class="option-block" nametext="{{list[i].text||list[i].name}}" ><span class="indexnum">{{i+1}}.</span> {{list[i].text||list[i].name}}<i notdrag="true" class="iconfont">&#xe62d;</i></span>{{/each}}'+'</div><input type="hidden" name="{{dataKey}}">';var a=function(e){var t=[];var a=e.next("input")[0]||e.find("input")[0];e.find("[multiselect]").each(function(e,a){a.setAttribute("index",e+1);$(a).find(".indexnum").html(e+1+".");t.push(a.getAttribute("data-id"))});if(a){a.value=t.join(",")}};var n=function(e,t){var a=e.next(),n=t.prev();if(a[0]===t[0]){t.insertBefore(e)}else{t.insertBefore(a);e.insertAfter(n)}};var i=function(){var t,i,r,o,l,s,c,d;if(e.dragElement){e.dragElement({dragName:"multiSelect",dragCopyEl:true,dragSelf:false,notDragEl:"notdrag",onDragBeforeElement:function(e,a,n){e.style.visibility="hidden";n.style.opacity=.5;n.removeAttribute("multiselect");i=$(e.parentNode).find("[multiselect]").length;t=parseInt(e.parentNode.offsetWidth/e.offsetWidth,10);c=parseInt(e.getAttribute("index"),10);d=$(e).parent().children();return true},onDragElement:function(e,t,a){var i=0,l,s,f;for(i;i<d.length-1;i++){l={};s=i;f=d[i];l.x=(f.offsetLeft+f.offsetLeft+f.offsetWidth)/2;l.y=(f.offsetTop+f.offsetTop+f.offsetHeight)/2;if(f.className===""){return}if(l.x>a.offsetLeft&&l.x<a.offsetLeft+a.offsetWidth){if(l.y>a.offsetTop&&l.y<a.offsetTop+a.offsetHeight){r=s+1;if(!o&&r!==c||o&&o!==r){o=r;n($(f),$(e));break}}}}},onDragEndElement:function(e,t,n){l=undefined;s=undefined;o=undefined;a($(e).parent());e.style.visibility="visible"}})}else{throw"需要在这之前加载拖动drag.js"}};e.multiSelect=function(e){var n={},i=$(e.parent);var r=i.find(".multi-select-box");i.css("z-index",1);if(r.length>0){i.empty()}if(e.list){var o=template.compile(t);var l=o(e);i.append(l);i.find(".multi-select-box").addClass("f-clear")}a(i);i.find("i").mousedown(function(t){var n,r=$(this).parent().parent();if(e.onDelete){n=parseInt($(this).parent().attr("index"),10);e.onDelete(n)}$(this).parent().remove();a(r);i.find(".multi-select-box").height("auto").css({width:i.width(),height:i.height()||23})});var s=function(t){var n,r=t.parent().parent();if(e.onDelete){n=parseInt(t.parent().attr("index"),10);e.onDelete(n)}t.parent().remove();a(r);i.find(".multi-select-box").height("auto").css({width:i.width(),height:i.height()||23})};n.setEnable=function(e){if(!e){i.append("<div multiSelectMask style='position: absolute;width: 100%; height: auto;z-index: 2;background: #fff; opacity: 0.5; top: 0px;'></div>");i.find("[multiSelectMask]").height(i.height())}else{i.find("[multiSelectMask]").remove()}};n.addElement=function(t){e.list.push(t);var n='<span multiSelect="true" index="'+e.list.length+'" data-id="'+(t.val||t.id||t.text)+'" class="option-block" nametext="'+(t.text||t.name)+'" ><span class="indexnum">'+e.list.length+".</span> "+(t.text||t.name)+'<i notdrag="true" class="iconfont">&#xe62d;</i></span>';e.removeIndex?n='<span multiSelect="true" index="'+e.list.length+'" data-id="'+(t.val||t.id||t.text)+'" class="option-block" nametext="'+(t.text||t.name)+'" >'+(t.text||t.name)+'<i notdrag="true" class="iconfont">&#xe62d;</i></span>':null;i.find(".multi-select-box").append(n);i.find(".multi-select-box span:last i").unbind("click");i.find(".multi-select-box span:last i").click(function(e){s($(e.target))});a(i)};n.deleteElement=function(t){for(var n in e.list){if(t.id==e.list[n].id){e.list.splice(n,1)}}i.find("[data-id="+t.id+"]").unbind("click").remove();a(i)};n.emptyElement=function(){e.list=[];i.find("[data-id]").unbind("click").remove();a(i)};return n};i()})(andy);(function(e){e.fn.extend({an_related:function(){var t={};var a="";var n=arguments[0];typeof n=="object"?t=n:a=n;var i=e.extend({relatedId:"",showUrl:"",relatedSize:"",item:[],checked:[],row:5,inputName:"",isText:false,value:""},t);var r=e(this);var o="";if(r.is("input")){var l=r.attr("id");r.removeAttr("id","");r.removeAttr("an-related","");if(!l){l="related_"+andy.getRandom(1e4)}var s="";if(r.attr("style")){s=r.attr("style");r.removeAttr("style","")}if(r.attr("name")){i.inputName=r.attr("name");r.removeAttr("name")}if(r.attr("value")){i.value=r.attr("value");r.removeAttr("value")}var c="u-group "+i.relatedSize;if(r.attr("class")){c=r.attr("class");r.attr("class","")}var d=r.attr("options");d="options = "+d;r.removeAttr("options");r.css("display","none");var f="<input type = 'hidden' name = '"+i.inputName+"' value='"+i.value+"' val>";var u="<div class='"+c+"' id = '"+l+"' style = '"+s+"' "+d+" an-related>"+f+"</div>";r.before(u);r.remove();r=e("#"+l);andy.layout(r.parent())}if(i.relatedId==""){i.relatedId=r.attr("id")}if(i.relatedId==undefined){i.relatedId="as_"+andy.getRandom(1e4);r.attr("id",i.relatedId)}r=e("#"+i.relatedId);r.find("input").each(function(t,a){var n=e(a);if(n.attr("type")=="hidden"){o=n;i.inputName=n.attr("name")}});var h=r.attr("options");if(h){h="{"+h+"}";h=andy.stringToJson(h);for(var v in h){if(v=="item"){var p=h[v].split(",");i.item=p}else if(v=="checked"){var p=h[v].split(",");i.checked=p}else{i[v]=h[v]}}}var g=i.item.length;var m="";if(g>0){if(r.find("input").length<g){for(var b=0;b<g;b++){var y=Math.floor(r.innerWidth()/g)/2;var w="item u-input nohover m-combo";var x=true;if(b==0){w="item item-l u-input nohover m-combo"}else if(b==g-1){w="item item-r u-input nohover m-combo"}if(b>0&&i.checked.length==0){x=false}var T="options = defaultValue:'"+i.item[b]+"',isEnable:'"+x+"',row:'"+i.row+"',isText:'"+i.isText+"'";m+="<input class = '"+w+"' style = 'width:"+y+"px' name = 'input_name' "+T+">"}r.prepend(m)}}var k="EVENT_VALUE";if(a!=""){if(a=="getValue"){var _=arguments[1];r.trigger(k,_)}}else{var C="";var o="";var g=0;r.find("input").each(function(t,a){var n=e(a);if(n.attr("type")=="hidden"){o=n}});var E=function(e,t){for(var a=0;a<t.length;a++){if(t[a].id==e){C=t[a].children}else if(t[a].children){E(e,t[a].children)}}if(C!=""){return C}};var I=function(e,t,a){for(var n=0;n<t.length;n++){if(t[n].id==e){t[n].children=a}else if(t[n].children){I(e,t[n].children,a)}}};var $=function(e,t){var a=t.find("ul");a.empty();for(var n=0;n<e.length;n++){var i=e[n];var r="";if(n==0){r="first"}var o="<li class = '"+r+"' value = '"+i.value+"' listId = '"+i.id+"' ><a>"+i.name+"</a></li>";a.append(o)}return a};var S=function(e,t){var a=o.attr("idValue");var n=o.attr("valueData");if(!a){var i=" ";for(var r=0;r<g-1;r++){i+=", "}o.attr("idValue",i);a=o.attr("idValue")}var l=a.split(",");l[t]=e.attr("listid");for(var r=0;r<l.length;r++){if(r>t){l[r]=null}}o.attr("idValue",l);if(!n){var i=" ";for(var r=0;r<g-1;r++){i+=", "}o.attr("valueData",i);n=o.attr("valueData")}var s=n.split(",");s[t]=e.attr("value");for(var r=0;r<s.length;r++){if(r>t){s[r]=null}}o.attr("valueData",s)};var D=function(t,a){for(var n=t+1;n<a.length;n++){var i=e("#"+a[n]);i.an_combo("setDefault");i.an_combo("isEnable",false)}};andy.loaddata(i.showUrl,function(t){var a=t;r.find("input").each(function(t,n){var r=e(n);if(r.attr("type")!="hidden"){var l="";g+=1;if(t==0){l=i.showUrl}if(i.checked.length>0){var s=[];if(t==0){s=a}else{s=E(i.checked[t-1],a)}if(s){r.an_combo({row:i.row,checked:[i.checked[t]],showData:s});if(o){var c=o.attr("idValue");if(!c){var d=" ";for(var t=0;t<g-1;t++){d+=", "}o.attr("idValue",d);c=o.attr("idValue");o.attr("valueData",d)}c=c.split(",");var f=o.attr("valueData").split(",");c[t]=i.checked[t];var u=function(){var e=i.checked[t];var a="";for(var n=0;n<s.length;n++){var r=s[n];if(e==r.id){a=r.value}}return a};f[t]=u();o.attr("idValue",c);o.attr("valueData",f)}}}else{r.an_combo({row:i.row,showUrl:l})}}});var n=[];r.find("[an-combo = an-combo]").each(function(t,i){var r=e(i).attr("id");var o=e("#"+r);andy.inputLayout(o);n.push(r);o.bind(andy.COMBO_CHOOSE_LISET,function(i,r){S(e(r),t);if(n[t+1]){var o=e("#"+n[t+1]);var l=e(r).attr("listId");var s=E(l,a);C="";if(typeof s=="object"){if(s.length==0){D(t,n);return false}var c=$(s,o).clone();for(var d=t+1;d<n.length;d++){var f=e("#"+n[d]);f.an_combo("setDefault")}o.an_combo("setShowTarget",c);o.an_combo("isEnable",true)}else if(typeof s=="string"){andy.loaddata(s,function(i,r){if(!i||i.length==0){D(t,n);return false}I(l,a,i);var s=$(i,o).clone();for(var c=t+1;c<n.length;c++){var d=e("#"+n[c]);d.an_combo("setDefault")}o.an_combo("setShowTarget",s);o.an_combo("isEnable",true)})}else if(!s){D(t,n)}}})})})}}})})(jQuery);(function(e){var t={};t.an_alertclose=function(e,t,a){e.click(t);e.mouseenter(function(e){$(this).attr("lock",true);$(this).removeClass("fadeInDown");$(this).addClass("pulse")});e.mouseout(function(t){$(this).removeAttr("lock");$(this).removeClass("pulse");setTimeout(function(){if(e.attr("lock")==undefined){e.addClass("zoomOut");setTimeout(function(){e.remove()},250)}},a)});setTimeout(function(){if(e.attr("lock")==undefined){e.addClass("zoomOut");setTimeout(function(){e.remove()},250)}},a)};t.an_alertitem=function(t,a,n,i,r,o,l){if(t=="top"){e.top.$("body").find(".alertnew").removeClass("alertnew")}else{$("body").find(".alertnew").removeClass("alertnew")}if(o=="message"){var s='<i class="iconfont">&#xe703;</i> '}else if(o=="emial"){var s='<i class="iconfont">&#xe6e7;</i> '}else{var s='<img src="'+o+'" class="f-r-o f-left">'}a.prepend("<div class='alert f-clear "+i+" f-m-b-xs animated fadeInDown alertnew'>"+s+n+"</div>");if(t=="top"){e.top.$("body").find(".alertnew").each(function(){var e=$(this);andy.an_alertclose(e,r,l)})}else{$("body").find(".alertnew").each(function(){var e=$(this);andy.an_alertclose(e,r,l)})}};t.an_alert=function(t){var a={type:"message",style:"alert-black",content:"提示内容",target:"top",position:"t-m",audio:"",callback:function(){},delaytime:5e3};var n=$.extend(a,t);if(n.audio!=undefined&&n.audio!=""){e.top.$("body").append("<audio id='audio' src='"+n.audio+"' autoplay></audio>");setTimeout(function(){e.top.$("body").find("#audio").remove()},1e3)}if(n.target=="top"){if(e.top.$("body").find("."+n.position).length==0){e.top.$("body").append("<div class='m-alertbox "+n.position+"'></div>");var i=e.top.$("body").find("."+n.position);andy.an_alertitem(n.target,i,n.content,n.style,n.callback,n.type,n.delaytime)}else{var i=e.top.$("body").find("."+n.position);andy.an_alertitem(n.target,i,n.content,n.style,n.callback,n.type,n.delaytime)}}if(n.target=="self"){if($("body").find("."+n.position).length==0){$("body").append("<div class='m-alertbox "+n.position+"'></div>");var i=$("body").find("."+n.position);andy.an_alertitem(n.target,i,n.content,n.style,n.callback,n.type,n.delaytime)}else{var i=$("body").find("."+n.position);andy.an_alertitem(n.target,i,n.content,n.style,n.callback,n.type,n.delaytime)}}};$.extend(e.andy,t)})(window);(function(e){function t(t,n,i){var r=function(){if(i.data){var r=i.valueField||"value";var o=i.textField||"text";var l=i.itemWidth||"";if(l!=""){l="width:"+l}var s=n.attr("name");var c="";if(i.editable){c="disabled='disabled'"}e.each(i.data,function(e,a){if(e==0){if(!i.checked){n.attr("value",a[r])}t.append('<label class="u-checkbox" style="'+l+'" ><input name="'+s+'_radio" type="radio" '+c+' value="'+a[r]+'" checked="checked" >'+a[o]+"</label>")}else{t.append('<label class="u-checkbox" style="'+l+'" ><input name="'+s+'_radio" type="radio" '+c+' value="'+a[r]+'" >'+a[o]+"</label>")}});a(t,n,i);if(i.checked){n.an_checkbox("setValue",i.checked)}}};if(i.url){andy.loaddata(i.url,function(e){i.data=e;r()})}r()}function a(e,t,a){e.find("input").on("click",function(){t.val(t.an_radiobox("getValue"));if(a.onclick){a.onclick(t)}})}function n(e,t){e.attr("value",t)}e.fn.an_radiobox=function(a,i){if(typeof a=="string"){var r=e.fn.an_radiobox.methods[a];if(r){return r(this.next(),i)}}else{var o=this.attr("options");var l="";if(o){o="{"+o+"}";o=andy.stringToJson(o);for(var s in o){if(s=="checked"){n(this,o[s]);a.checked=o[s]}else{a[s]=o[s]}}}var c=a.width||this.width();var d=a.height||this.height();var f=e("<div class='u-input-span' ></div>");f.width(c);f.height(d);this.hide();this.after(f);a=a||{};t(f,this,a)}};e.fn.an_radiobox.methods={getValue:function(e,t){var a=e.find("input:checked");var n="";if(a.length)n=a[0].value;return n},setValue:function(t,a){t.find("input").each(function(t,n){if(a==e(n).attr("value")){if(e(n).prop("checked")!=true){e(n).prop("checked",true)}}})}}})(jQuery);(function(e){function t(t,n,i){var r=function(){if(i.data){var r=i.valueField||"value";var o=i.textField||"text";var l=i.itemWidth||"";if(l!=""){l="width:"+l}var s=n.attr("name");var c="";if(i.editable){c="disabled='disabled'"}e.each(i.data,function(e,a){if(e==0){if(!i.checked){n.attr("value",a[r])}t.append('<label class="u-checkbox" style="'+l+'" ><input name="'+s+'_checkbox" type="checkbox" '+c+' value="'+a[r]+'" checked="checked" >'+a[o]+"</label>")}else{t.append('<label class="u-checkbox" style="'+l+'" ><input name="'+s+'_checkbox" type="checkbox" '+c+' value="'+a[r]+'" >'+a[o]+"</label>")}});a(t,n);if(i.checked){for(var d=0;d<i.checked.length;d++){n.an_checkbox("setValue",i.checked[d])}}}};if(i.url){andy.loaddata(i.url,function(e){i.data=e;r()})}r()}function a(e,t){e.find("input").on("click",function(){t.val(t.an_checkbox("getValue"))})}function n(e,t){e.attr("value",t)}e.fn.an_checkbox=function(a,i){if(typeof a=="string"){var r=e.fn.an_checkbox.methods[a];if(r){return r(this.next(),i)}}else{var o=this.attr("options");var l="";if(o){o="{"+o+"}";o=andy.stringToJson(o);for(var s in o){if(s=="checked"){n(this,o[s]);var c=o[s].split(",");a.checked=c}else{a[s]=o[s]}}}else{if(a.checked){n(this,a.checked)}}var d=a.width||this.width();var f=a.height||this.height();var u=e("<div class='u-input-span' ></div>");u.width(d);u.height(f);this.hide();this.after(u);a=a||{};t(u,this,a)}};e.fn.an_checkbox.methods={getValue:function(t,a){var n=new Array;var i="";t.find("input").each(function(t,a){if(e(a).prop("checked")==true){n.push(e(a).prop("value"))}});i=n.join(",");return i},setValue:function(t,a){t.find("input").each(function(t,n){if(a==e(n).attr("value")){if(e(n).prop("checked")!=true){e(n).prop("checked",true)}}})}}})(jQuery);(function(e){"use strict";var t="rippler";var a={init:function(n){n=e.extend({effectClass:"rippler-effect",effectSize:16,addElement:"div",duration:600},n);return this.each(function(){var i=this;var r=e(this);var o=r.data(t);if(!o){n=e.extend({},n);r.data(t,{options:n});if(typeof document.ontouchstart!="undefined"){r.on("touchstart."+t,function(t){var n=e(this);a.elementAdd.call(i,n,t)});r.on("touchend."+t,function(t){var n=e(this);a.effect.call(i,n,t)})}else{r.on("mousedown."+t,function(t){var n=e(this);a.elementAdd.call(i,n,t)});r.on("mouseup."+t,function(t){var n=e(this);a.effect.call(i,n,t)})}}})},template:function(a){var n=e(this);a=n.data(t).options;var i;var r="rippler-svg";var o="rippler-div";var l='<circle cx="'+a.effectSize+'" cy="'+a.effectSize+'" r="'+a.effectSize/2+'">';var s='<svg class="'+a.effectClass+" "+r+'" xmlns="http://www.w3.org/2000/svg" viewBox="'+a.effectSize/2+" "+a.effectSize/2+" "+a.effectSize+" "+a.effectSize+'">'+l+"</svg>";var c='<div class="'+a.effectClass+" "+o+'"></div>';if(a.addElement==="svg"){i=s}else{i=c}return i},elementAdd:function(n,i,r){var o=this;var l=e(this);r=l.data(t).options;n.append(a.template.call(o));var s=n.find("."+r.effectClass);var c=n.offset();var d=a.targetX.call(o,i);var f=a.targetY.call(o,i);s.css({width:r.effectSize,height:r.effectSize,left:d-c.left-r.effectSize/2,top:f-c.top-r.effectSize/2});return o},effect:function(n,i,r){var o=this;var l=e(this);r=l.data(t).options;var s=e("."+r.effectClass);var c=n.offset();var d=l.outerWidth();var f=l.outerHeight();var u=a.diagonal(d,f)*2;var h=a.targetX.call(o,i);var v=a.targetY.call(o,i);s.css({width:u,height:u,left:h-c.left-u/2,top:v-c.top-u/2,transition:"all "+r.duration/1e3+"s ease-out"});return a.elementRemove.call(o)},elementRemove:function(a){var n=this;var i=e(this);a=i.data(t).options;var r=e("."+a.effectClass);setTimeout(function(){r.css({opacity:0,transition:"all "+a.duration/1e3+"s ease-out"});setTimeout(function(){r.remove()},a.duration*1.5)},a.duration);return n},targetX:function(e){var t=e.originalEvent;var a;if(typeof document.ontouchstart!="undefined"){a=t.changedTouches[0].pageX}else{a=t.pageX}return a},targetY:function(e){var t=e.originalEvent;var a;if(typeof document.ontouchstart!="undefined"){a=t.changedTouches[0].pageY}else{a=t.pageY}return a},diagonal:function(e,t){if(e>0&&t>0)return Math.sqrt(Math.pow(e,2)+Math.pow(t,2));else return false},destroy:function(){return this.each(function(){var a=e(this);e(window).unbind("."+t);a.removeData(t)})}};e.fn.rippler=function(n){if(a[n]){return a[n].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof n==="object"||!n){return a.init.apply(this,arguments)}else{e.error("Method "+n+" does not exist on jQuery."+t)}}})(jQuery);(function(e){e.fn.extend({an_topnav:function(){var t={};var a="";var n=arguments[0];typeof n=="object"?t=n:a=n;var i=e.extend({menuId:"",url:"",urlData:"",checked:"",downMenu:true,defaultShowDown:false,showEvent:"mouseover",hideEvent:"mouseleave",childrenDownIcon:"&#xe613;",isFitParent:false,childrenRightIcon:"&#xe607;",onMouseOver:function(){},onMouseEnter:function(){},onClick:function(){}},t);var r=e(this);if(i.menuId==""){r=andy.setRandomId(r,"topnav_");i.menuId=r.attr("id")}var o=r.attr("options");var l="";if(o){o="{"+o+"}";o=andy.stringToJson(o);for(var s in o){if(o[s]=="true"){i[s]=true}else if(o[s]=="false"){i[s]=false}else{i[s]=o[s]}}}i.menu=r;i.resizeHanld=null;i.level=0;var c="EVENT_CHECKED";var d="EVENT_ON_RESIZE";var f="EVENT_CLEAR_CHECKED";if(a!=""){if(a=="checked"){var u=arguments[1];var h={arr:u};i.menu.trigger(c,h)}else if(a=="onresize"){i.menu.trigger(d)}else if(a=="clearChecked"){i.menu.trigger(f)}}else{var v,p,g;var m=function(e){if(e.is("li")==false){e=e.parents("li").eq(0)}return e};var b=function(e){if(e.is("ul")==false){e=e.parents("ul").first()}return e};var y=function(t){t.siblings().each(function(t,a){e(a).find("ul").removeClass("show")})};var w=function(e){e.find("ul").removeClass("show")};var x=function(){i.menu.find("a").removeClass("active")};var T=function(e){e.parent().parent().siblings().find("a").removeClass("active");e.parent().parent().find("a:first").addClass("active");e.siblings().find("a").removeClass("active")};var k=function(e){if(e.find("ul").length==0&&e.data("children")){e.append("<ul></ul>");v(e);e.find("ul").addClass("show")}else{e.find("ul").eq(0).addClass("show")}};g=function(t){t.unbind(i.showEvent);t.click(function(e){T(t);i.onClick(t);t.children("a:first").addClass("active");e.stopPropagation()});t.mouseover(function(e){i.onMouseOver(t);e.stopPropagation()});t.mouseenter(function(e){i.onMouseEnter(t);e.stopPropagation()});t.bind(i.showEvent,function(t){var a=m(e(t.target));if(i.downMenu){y(a);k(a)}})};v=function(t){var a=t.data("children");var n=t.parents("ul").length;for(var r in a){var o=a[r];try{var l,s,c,d,f;l="";s="javascript:;";f="";if(o.icons){l="<i class='iconfont icon'>"+o.icons+"</i>"}o.url?s=o.url:null;o.target?c="target="+o.target:c="";if(o.id==i.checked[n]){f="active"}d="<li id = "+o.id+"><a href="+s+" "+c+" class = '"+f+"'>"+l+o.text+"</a></li>";t.find("ul").append(d);var u=e("#"+o.id);if(o.children&&o.children.length>0&&u.length>0){u.data("children",o.children);u.find("a").append("<i class='iconfont arrow'>"+i.childrenRightIcon+"</i>")}g(u)}catch(h){alert(h)}}};p=function(t){var a=0;for(var n in t){var r=t[n];try{var o,l,s,c,d;o="";d="";l="javascript:;";if(r.icons){o="<i class='iconfont icon'>"+r.icons+"</i>"}r.url?l=r.url:null;r.target?s="target="+r.target:s="";r.id==i.checked[0]?d="active":null;c="<li id = "+r.id+"><a href="+l+" "+s+" class = '"+d+"'>"+o+r.text+"</a></li>";i.menu.append(c);var f=e("#"+r.id);f.data("json",r);if(r.children&&r.children.length>0&&f.length>0){f.data("children",r.children);if(i.downMenu){f.find("a").append("<i class='iconfont arrow'>"+i.childrenDownIcon+"</i>")}}g(f);a+=f.outerWidth()}catch(u){}}};showMenu=function(){if(i.checked.length>0){for(var e=0;e<i.checked.length;e++){var t=i.menu.find("#"+i.checked[e]);if(i.defaultShowDown){k(t)}}}};var _=function(){var t;if(i.url!=""){andy.loaddata(i.url,function(e){e=andy.stringToJson(e);p(e);showMenu()})}else if(i.urlData!=""){t=andy.stringToJson(i.urlData);p(t);showMenu()}else{r.find("li").each(function(t,a){g(e(a))});showMenu()}};var C=function(){if(i.isFitParent){var t=i.menu.parent();var a=t.find(".right-btn");var n=t.find(".left-btn");var r=0;var o="none";t.siblings().each(function(t,a){e(a).hasClass("no-float")?null:r+=e(a).outerWidth()});var l=t.parent().width()-r-parseInt(t.css("margin-left"))-parseInt(t.css("margin-right"));t.outerWidth(l-1);t.outerWidth()<i.menu.outerWidth()?o="":o="none";n.css({top:"0",display:o,left:"0"});a.css({top:"0",display:o,left:"0"});if(o=="none"){i.menu.css("left",0)}}};var E=function(){var e=i.menu.parent();var t=i.menu.outerHeight();var a="<div class = 'right-btn f-clear'><i class='iconfont'>&#xe60f;</i></div>";var n="<div class = 'left-btn f-clear'><i class='iconfont'>&#xe626;</i></div>";right=e.parent().find(".right-btn");left=e.parent().find(".left-btn");right.length>0?null:e.append(a);right=e.find(".right-btn");right.css({cursor:"pointer","text-decoration":"none",position:"relative",width:"16px","float":"left",display:"block","line-height":t+"px",height:t});right.unbind("click").on("click",function(){var t=parseInt(i.menu.css("left"))-e.width();t<-i.menu.width()+e.width()?t=-i.menu.width()+e.width():null;i.menu.css("left",t)});left.length>0?null:e.append(n);left=e.find(".left-btn");left.css({cursor:"pointer","text-decoration":"none",position:"relative",width:"16px","float":"left",display:"block","line-height":t+"px",height:t});left.unbind("click").on("click",function(){var t=parseInt(i.menu.css("left"))+e.width();t>0?t=0:null;i.menu.css("left",t)})};var I=function(){if(i.isFitParent){var t=i.menu.parent();var a=i.menu.outerHeight();t.css({height:a,overflow:"hidden",position:"relative",top:"0px",left:"0px"});i.menu.css({position:"absolute",left:"0"});E();C();e(window).resize(function(e){if(i.resizeHanld==null){i.resizeHanld=setTimeout(function(){C();i.resizeHanld=null},300)}else{clearTimeout(i.resizeHanld);i.resizeHanld=setTimeout(function(){C();i.resizeHanld=null},300)}})}};var $=function(){_();I()};$();i.menu.bind(i.hideEvent,function(){i.menu.find("ul").removeClass("show");

});i.menu.bind(d,function(){C()});i.menu.bind(f,function(t){i.menu.find("li").each(function(t,a){e(a).find("a").removeClass("active")})});i.menu.bind(c,function(e,t){var t=t.arr;for(var a in t){var n=i.menu.find("[id="+t[a]+"]");n.siblings().find("a").removeClass("active");n.find("a").addClass("active")}})}}})})(jQuery);(function(e){e.fn.extend({an_sidemenu:function(){var t={};var a="";var n=arguments[0];typeof n=="object"?t=n:a=n;var i=e.extend({menuId:"",url:"",urlData:"",checked:[],autoHide:true,autoShow:false,showEvent:"click",hideEvent:"mouseleave",defaultIcon:"",childrenDownIcon:"&#xe613;",childrenRightIcon:"&#xe607;",onClick:function(){}},t);var r=e(this);if(i.menuId==""){r=andy.setRandomId(r,"menu_");i.menuId=r.attr("id")}var o=r.attr("options");var l="";if(o){o="{"+o+"}";o=andy.stringToJson(o);for(var s in o){if(o[s]=="true"){i[s]=true}else if(o[s]=="false"){i[s]=false}else{i[s]=o[s]}}}i.menu=r;if(a!=""){}else{var c,d,f;var u=function(e){if(e.is("li")==false){e=e.parents("li").eq(0)}return e};var h=function(e){if(e.is("ul")==false){e=e.parents("ul").first()}return e};var v=function(){i.menu.find("a").removeClass("active")};var p=function(t){t.siblings().each(function(t,a){e(a).find("ul").removeClass("show")})};var g=function(e){e.find("ul").removeClass("show")};var m=function(e){if(e.find("ul").length==0&&e.data("children")){e.append("<ul></ul>");c(e);e.find("ul").addClass("show")}else{e.find("ul").eq(0).addClass("show")}};f=function(t){t.unbind(i.showEvent);t.bind(i.showEvent,function(t){var a=u(e(t.target));v();i.onClick(a);a.children("a").addClass("active");t.stopPropagation();if(a.children("ul").hasClass("show")){g(a);t.stopPropagation()}else{m(a);if(i.autoHide){p(a)}t.stopPropagation()}})};c=function(t){var a=t.data("children");var n=t.parents("ul").length;for(var r in a){var o=a[r];try{var l,s,c,d,u;l="";s="javascript:;";u="";if(o.icons){var h=o.icons;o.icons==""?h=i.defaultIcon:null;l="<i class='iconfont icon'>"+h+"</i>"}else if(i.defaultIcon!=""){l="<i class='iconfont icon'>"+i.defaultIcon+"</i>"}if(o.url){s=o.url}o.target?c="target="+o.target:c="";if(o.id==i.checked[n]){u="active";v()}d="<li id = "+o.id+"><a href="+s+" "+c+" class = '"+u+"'>"+l+o.text+"</a></li>";t.find("ul").append(d);var p=e("#"+o.id);p.data("json",o);if(o.children&&o.children.length>0&&p.length>0){p.data("children",o.children);p.find("a").addClass("parent");p.find("a").append("<i class='iconfont arrow'>"+i.childrenRightIcon+"</i>")}f(p)}catch(g){}}};d=function(t){for(var a in t){var n=t[a];try{var r,o,l,s,c;c="";r="";o="javascript:;";if(n.icons){var d=n.icons;n.icons==""?d=i.defaultIcon:null;r="<i class='iconfont icon'>"+d+"</i>"}else if(i.defaultIcon!=""){r="<i class='iconfont icon'>"+i.defaultIcon+"</i>"}if(n.url){o=n.url}n.target?l="target="+n.target:l="";n.id==i.checked[0]?c="active":null;s="<li id = "+n.id+"><a href="+o+" "+l+" class = '"+c+"'>"+r+n.text+"</a></li>";i.menu.append(s);var u=e("#"+n.id);u.data("json",n);if(n.children&&n.children.length>0&&u.length>0){u.data("children",n.children);u.find("a").addClass("parent");u.find("a").append("<i class='iconfont arrow'>"+i.childrenDownIcon+"</i>")}f(u)}catch(h){}}};showMenu=function(){if(i.checked.length>0){for(var e=0;e<i.checked.length;e++){var t=i.menu.find("#"+i.checked[e]);m(t)}}};var b=function(){var t;if(i.url!=""){andy.loaddata(i.url,function(e){e=andy.stringToJson(e);d(e);showMenu()})}else if(i.urlData!=""){t=andy.stringToJson(i.urlData);d(t);showMenu()}else{r.find("li").each(function(t,a){f(e(a))});showMenu()}};var y=function(){b()};y();i.menu.bind(i.hideEvent,function(){})}}})})(jQuery);(function(e){e.fn.extend({an_tabsheader:function(){var t={};var a="";var n=arguments[0];typeof n=="object"?t=n:a=n;var i=e.extend({menuId:"",url:"",urlData:"",chooseIndex:0,changeEvent:"click",onClick:function(){}},t);var r=e(this);if(i.menuId==""){r=andy.setRandomId(r,"tabsheader_");i.menuId=r.attr("id")}var o=r.attr("options");var l="";if(o){o="{"+o+"}";o=andy.stringToJson(o);for(var s in o){if(o[s]=="true"){i[s]=true}else if(o[s]=="false"){i[s]=false}else{i[s]=o[s]}}}i.menu=r;if(a!=""){}else{var c,d,f;var u=function(e){if(e.is("li")==false){e=e.parents("li").eq(0)}return e};var h=function(t){t.siblings().each(function(t,a){e(a).removeClass("active")})};f=function(t){t.unbind(i.changeEvent);if(i.changeEvent!="click"){i.onClick(t,t.data("children"))}t.bind(i.changeEvent,function(a){var n=u(e(a.target));h(n);n.addClass("active");if(i.changeEvent=="click"){i.onClick(t,t.data("children"))}})};d=function(t){var a="<ul class='m-tabs-nav'></ul>";i.menu.append(a);a=i.menu.find("ul");for(var n in t){var r=t[n];try{var o="class = 'active'";if(n!=i.chooseIndex){o=""}var l=r.id||i.menuId+n;var s="<li "+o+" id = "+l+"><a href='javascript:void(0)'>"+r.text+"</a></li>";a.append(s);var c=e("#"+l);f(c)}catch(d){}}};var v=function(){var t;if(i.url!=""){andy.loaddata(i.url,function(e){e=andy.stringToJson(e);d(e)})}else if(i.urlData!=""){t=andy.stringToJson(i.urlData);d(t)}else{r.find("li").each(function(t,a){f(e(a))})}};var p=function(){v()};p()}}})})(jQuery);(function(e){e.fn.extend({an_scrollbar:function(){var t={};var a="";var n=arguments[0];var i=e(this);typeof n=="object"?t=n:a=n;var r=e.extend({scrollId:"",barStyle:"style01",minStep:2,isFitParent:true,autoHidden:false,resizeHanld:null,alwaysShow:false},t);if(r.scrollId==""){i=andy.setRandomId(i,"scroll_");r.scrollId=i.attr("id")}var o=i.attr("options");if(o){o="{"+o+"}";o=andy.stringToJson(o);for(var l in o){if(o[l]=="true"){r[l]=true}else if(o[l]=="false"){r[l]=false}else{r[l]=o[l]}}}i.data("options",r);i.showBar=function(){i.trigger("showScrollBar")};i.anchor=function(e){i.trigger("anchor",e)};if(a!=""){i[n]?i[n](arguments[1]):null}else{var s=i.height();i.addClass("f-clear");i.wrap("<div class='m-scroll "+r.barStyle+"'></div>");i.wrap("<div class='m-scroll-left'></div>");var c=i.parent().parent();var d=i.parent();var f="<div class='m-scroll-right'>"+"<div class=' scroll-ico-top'><i class='iconfont'>&#xe615;</i></div>"+"<div class=' scroll-ico-con'></div>"+"<div class=' scroll-ico-bottom'><i class='iconfont'>&#xe613;</i></div>"+"</div>";c.append(f);var u=d.next();var h=u.find(".scroll-ico-con");var v=u.find(".scroll-ico-top");v.css("display")=="none"?v.height(0):null;var p=u.find(".scroll-ico-bottom");p.css("display")=="none"?p.height(0):null;var g=false;var m=0;i.showScrollBar=function(){if(!r.alwaysShow){if(i.height()<=c.height()){u.hide();i.parent().parent().unbind("mouseout mouseover");i.parent().css("top",0)}else{u.show();if(r.autoHidden){i.parent().parent().mouseout(function(t){if(e(t.target).parents(".m-scroll")){u.hide()}t.preventDefault()});i.parent().parent().mouseover(function(e){u.show();e.preventDefault()})}}}var t=parseInt(u.height()-p.height()*2)*(c.height()/i.height());h.animate({height:t},100)};i.getDisHeight=function(){return u.height()-(h.height()-p.height()*2)};i.moveContent=function(e){var t=u.height()-h.height()-p.height()*2;var a=(i.height()-c.height())/t;var n=-e*a;if(n<c.height()-i.height()){n=c.height()-i.height()}i.parent().css("top",n)};i.moveBar=function(e){if(g){var t=e.clientY-m;var a=u.height()-h.height()-p.height()*2;if(t<v.height()){t=v.height()}else if(t>a+v.height()){t=a+v.height()}h.css("top",t);i.moveContent(t-v.height())}};i.disMoveBar=function(e){if(i.height()<c.height()){return false}var t=u.height()-h.height()-p.height()*2;var a=Math.ceil(t/h.height());a>r.minStep?r.minStep=a:null;var n=parseInt(h.css("top"))-e*(t/r.minStep);if(n<v.height()){n=v.height()}else if(n>t+v.height()){n=t+v.height()}h.css({top:n});i.moveContent(n-v.height())};i.contentAnchor=function(e,t){var a=u.height()-h.height()-p.height()*2;var n=-e;if(c.height()>i.height()){return false}setTimeout(function(){if(e+t>c.height()&&n<c.height()-i.height()){n=c.height()-i.height()}i.parent().css("top",n);var r=a/(i.height()-c.height())*n;h.css({top:-r})},100)};h.mousedown(function(e){g=true;m=e.clientY-parseInt(h.css("top"));return true});h.parent().parent().mousemove(function(e){i.moveBar(e);return true});h.parent().parent().mouseout(function(e){e.stopPropagation();return true});h.parent().parent().mouseup(function(e){g=false;return true});h.parent().parent().mouseenter(function(e){i.showScrollBar();g=false;return true});c.on("mousewheel DOMMouseScroll",function(e){var t=e.originalEvent.wheelDelta&&(e.originalEvent.wheelDelta>0?1:-1)||e.originalEvent.detail&&(e.originalEvent.detail>0?-1:1);e.preventDefault();if(t>0){i.disMoveBar(t)}else if(t<0){i.disMoveBar(t)}});v.click(function(){i.disMoveBar(1)});p.click(function(){i.disMoveBar(-1)});i.mousedown(function(){setTimeout(function(){i.showScrollBar()},300)});i.bind("showScrollBar",function(){setTimeout(function(){i.showScrollBar()},100)});i.bind("anchor",function(e,t){var a=i.find("#"+t);var n=a.css("position");if(a.length>0){a.css("position","absolute");i.contentAnchor(a[0].offsetTop,a.height());a.css("position",n);a=[]}});e(window).resize(function(e){if(r.isFitParent){if(r.resizeHanld==null){r.resizeHanld=setTimeout(function(){i.showScrollBar();r.resizeHanld=null},300)}else{clearTimeout(r.resizeHanld);r.resizeHanld=setTimeout(function(){i.showScrollBar();r.resizeHanld=null},300)}}});r.alwaysShow?null:i.showScrollBar()}}})})(jQuery);(function(e){e.fn.extend({an_inputcombo:function(){var t={};var a="";var n=arguments[0];typeof n=="object"?t=n:a=n;var i=e.extend({comboId:"",touchTargetType:"input",inputVerify:"",showTargetType:"list",inputName:"",showUrl:"",showData:[],checked:[],treeCheckBoxType:{},defaultValue:"下拉选择",treeId:"",treeSetting:{},treeAsync:{},selects:false,isEnable:true,isText:false,row:0,showHeight:200,open:false,windowAuto:true,idvalue:"id",valuedata:"value",namevalue:"name",editor:true,autoclear:false,setListHtml:"",onInputChange:function(){},onChange:function(){}},t);var r=e(this);if(r.is("input")){var o=r.attr("id");r.removeAttr("id","");r.removeAttr("an-combo","");if(!o){o="combo_"+andy.getRandom(1e4)}var l=r.attr("style");r.removeAttr("style");i.inputName=r.attr("name");r.removeAttr("name");var s=r.attr("options");s="options = "+s;r.removeAttr("options","");var c="m-combo";if(r.attr("class")){c=r.attr("class");r.attr("class","")}r.css("type","hidden");var d="<div class = '"+c+"' id = '"+o+"' style = '"+l+"' "+s+" an-combo></div>";r.before(d);r.remove();r=e("#"+o);i.comboId=o}if(r.attr("an-combo")!="an-combo"){r.attr("an-combo","an-combo")}var f=function(t,a,n){var i=t.attr("id");var r=n||1e4;if(i==undefined||i==null||i==""){i=a+andy.getRandom(r);t.attr("id",i);t=e("#"+i)}else{t=e("#"+i)}return t};if(i.comboId==""){r=f(r,"combo_");i.comboId=r.attr("id")}var u=e(document);var h=e(window);var v=0;var p="EVENT_ROW";var g="EVENT_SET_DEFAULT";var m="EVENT_GET_VALUE";var b="EVENT_GET_ID";var y="EVENT_SHOW";var w="EVENT_ENABLE";var x="EVENT_CHOOSE";var T="EVENT_SET_NEW_LIST";var k="EVENT_SET_NEW_TREE";var _="EVENT_TREE";var C="click";var E=true;var I=r.attr("options");var $="";if(I){I="{"+I+"}";I=andy.stringToJson(I);for(var S in I){if(S=="onChange"){var D=I[S];i.onChange=function(e){var t=andy.stringToJson(D);t(e)}}else if(S=="checked"){var N=I[S].split(",");i.checked=N}else{if(I[S]=="true"){i[S]=true}else if(I[S]=="false"){i[S]=false}else{i[S]=I[S]}}}}i.combo=r;i.valueForInput=null;r.find("input").each(function(t,a){if(e(a).attr("type")=="hidden"){i.valueForInput=e(a)}});if(a!=""){if(a=="row"){var A=arguments[1];if(r&&r[0]){r.trigger(p,A)}}else if(a=="setDefault"){var j=arguments[1];r.trigger(g,j)}else if(a=="setCurrentChoose"){var O=arguments[1];var R={choose:O};r.trigger(x,R)}else if(a=="getValue"){var j=arguments[1];r.trigger(m,j)}else if(a=="getChooseId"){var j=arguments[1];r.trigger(b,j)}else if(a=="getShowTarget"){return andy.combo("getShowTarget",e("#"+i.comboId))}else if(a=="setShowTarget"){var V=arguments[1];r.trigger(y,V)}else if(a=="setList"){var R={listdata:arguments[1]};r.trigger(T,R)}else if(a=="setTree"){var R={listdata:arguments[1]};r.trigger(k,R)}else if(a=="addTree"){var H=arguments[1];r.trigger(_,H)}else if(a=="isEnable"){var L=arguments[1];r.trigger(w,L)}}else{if(andy.IE()==6){r.find("ul").each(function(t,a){var n=e(a);if(!n.prev().is("div")){n.before("<div></div>")}})}var z=function(){var e=false;if(u.height()>h.innerHeight()){e=true}return e};var W=function(){if(r.showTarget.children().length>i.row&&i.row!=0){r.showTarget.addClass("u-overflow-y");v=i.row*r.showTarget.children().outerHeight();r.showTarget.height(v)}else{r.showTarget.removeClass("u-overflow-y");v=0;r.showTarget.css("height","")}};var F=function(e){if(e<r.showTarget.height()){r.showTarget.addClass("u-overflow-y");r.showTarget.outerHeight(e)}};var P=function(e,t){var a=e.offset();var n=a.left;var o=a.top;var l=u.width();var s=u.height();var c=u.scrollTop();var d=t.outerWidth();W();var f=t.height();var v=0;if(z()){v=17}if(l-n-v>=d){t.css({left:"0px",right:"auto"})}else{t.css({left:"auto",right:"0px"})}var p=r.touchTarget.outerHeight();var g=h.height()-(o-c);var m=h.height()-g-p;if(i.windowAuto){if(g>=m){t.css("top",p+"px");F(g-p)}else{F(h.height()-g);f=r.showTarget.outerHeight();t.css("top",-f+"px")}}else{t.css("top",p+"px");F(g-p)}};var V=function(e,t){var a=e.offset();var n=a.left;var o=a.top;var l=u.width();var s=u.height();var c=u.scrollTop();var d=t.outerWidth();var f=t.height();var v=0;if(z()){v=17}if(l-n-v>=d){t.css({left:"0px",right:"auto"})}else{t.css({left:"auto",right:"0px"})}var p=r.touchTarget.outerHeight();var g=h.height()-(o-c);var m=h.height()-g-p;if(i.windowAuto){if(g>=m){t.css("top",p+"px");F(g-p)}else{F(h.height()-g);f=r.showTarget.outerHeight();t.css("top",-f+"px")}}else{t.css("top",p+"px");F(g-p)}};var M=function(t,a){if(a){r.showTarget.empty()}if(t instanceof jQuery){r.showTarget.replaceWith(t)}else{r.showTarget.replaceWith(e(t))}andy.combo({combo:r,showEvent:C,showComplete:function(){if(i.showTargetType=="list"){P(r,r.showTarget)}else{t(r,r.showTarget)}}});i.showData=[];r.an_inputcombo_bindEvent(i)};var B=function(){if(r){var e=r.touchTarget;if(e.is("input")==false){e=e.find("input")}if(r.data("isEnable")==true){e.removeAttr("disabled");r.removeClass("u-disabled")}else{e.attr("disabled","disabled");r.addClass("u-disabled")}}};var U=function(e,t,a){e.data("selects",i.selects);e.data("isEnable",i.isEnable);e.data("isText",i.isText);e.an_inputcombo_creatTouch(i);e.an_inputcombo_creatShow(i);if(i.inputName==""||i.inputName==undefined){i.inputName=i.comboId+"_input"}if(i.valueForInput==null){e.append("<input type = 'hidden' name = '"+i.inputName+"'>");i.valueForInput=e.find("input:hidden")}};if(r.children().length==0){U(r,i.touchTargetType,i.showTargetType);if(i.editor==false){r.find(".u-input:first").addClass("u-diseditor")}else{r.find(".u-input:first").attr("readonly",null);r.find(".u-input:first").removeClass("u-diseditor")}}else{var J=andy.combo("getTouchTarget",r);U(r,i.touchTargetType,i.showTargetType);if(i.editor==false){r.find(".u-input:first").addClass("u-diseditor")}else{r.find(".u-input:first").attr("readonly",null)}}andy.combo({combo:r,showEvent:C,showComplete:function(){r.css("z-index",99999);r.showTarget.css("z-index",99999);if(i.showTargetType=="list"){P(r,r.showTarget)}else{V(r,r.showTarget)}},hiddenComplete:function(){r.css("z-index","");r.showTarget.css("z-index","")}});B();i.valueForInput=r.touchTarget;if(i.valueForInput.is("input")==false){i.valueForInput.find("input").each(function(t,a){i.valueForInput=e(a)})}if(i.inputName==""&&i.valueForInput.attr("name")==undefined){i.valueForInput.attr("name",i.comboId+"_value")}else if(i.valueForInput.attr("name")==undefined){i.valueForInput.attr("name",i.comboId+"_value")}r.bind(p,function(e,t){i.row=t});r.bind(T,function(e,t){var a=r.an_inputcombo_getList(i,t.listdata);var n=r.showTarget;n.empty();i.showData=t.listdata;r.an_inputcombo_bindEvent(i)});r.bind(k,function(e,t){var a=r.showTarget;a.empty();andy.combo({combo:r,showEvent:C,showComplete:function(){V(r,r.showTarget)}});i.showData=t.listdata;r.an_inputcombo_bindEvent(i)});r.bind(y,function(e,t){M(t,true)});r.bind(_,function(e,t){});if(r.showTarget.is("ul")){}r.bind(g,function(t,a){var n=r.find("input:hidden");var o=r.touchTarget;var l="";var s="";var c="";if(o.is("input")==false){o=r.find("input:first")}if(r.showTarget.is("ul")){r.showTarget.children().each(function(t,a){var n=e(a);if(n.hasClass("active")){n.removeClass("active")}if(i.checked.length>0){for(var r in i.checked){if(n.attr("listId")==i.checked[r]){n.addClass("active");if(c==""){l=n.text();s=n.attr("value");c=n.attr("listId")}else{l+=","+n.text();s=n.attr("value");c+=","+n.attr("listId")}}}}})}if(n.is("input")){if(i.checked.length>0){n.attr({value:l,idValue:c,valueData:s});n.val(l);o.attr("value",l);o.val(l)}else{n.attr({value:i.defaultValue,idValue:"",valueData:""});n.val(i.defaultValue);o.attr("value",i.defaultValue);o.val(i.defaultValue)}}if(a){a(s,c)}});r.bind(w,function(e,t){r.data("isEnable",t);B()});r.an_inputcombo_creatShow("eventBind",i);r.bind(x,function(e,t){})}},an_inputcombo_creatTouch:function(){var t={};var a="";for(var n=0;n<arguments.length;n++){var i=arguments[0];if(typeof i=="object"){t=i}else if(typeof i=="string"){a=i}}var r=e.extend({combo:"",comboName:"combo",inputVerify:"",checked:"",selects:false,defaultValue:"下拉选择",touchTargetType:""},t);var o="EVENT_ADD_CHOOSE";var l="EVENT_CANCEL_CHOOSE";var s="EVENT_GET_VALUE";var c="EVENT_GET_ID";var d=e(this).attr("id");var f=e("#"+d);var u="";var h="";if(f.data("selects")!=undefined){r.selects=f.data("selects")}if(a!=""){if(a=="addChoose"){var v=arguments[1];f.trigger(o,v)}else if(a=="cancelChoose"){var v=arguments[1];f.trigger(l,v)}else if(a=="getValue"){var p=arguments[1];f.trigger(s,p)}}else{var g=function(e){h.addElement(e)};var m=function(e){h.deleteElement(e)};var b=function(t){var a=e("#"+d);var n=andy.combo("getTouchTarget",a);var i=n.parent().find("p");var o=r.valueForInput;if(o.is("input")==false){o.find("input").each(function(t,a){o=e(a)})}var l=i.attr("value");var s=o.attr("idValue");if(t.attr&&typeof t.attr!="string"){t.attr=""}var c=o.attr("valueData");if(l==undefined||l==""||l==r.defaultValue){l=t.name;s=t.id;c=t.value||t.attrValue||t.attr}else{l=l+"，"+t.name;s=s+","+t.id;var f=t.value||t.attrValue||t.attr;c=c+","+f}if(r.selects==false){o.attr({idValue:t.id,valueData:t.value||t.attrValue||t.attr});i.text(t.name)}else{o.attr({idValue:s,valueData:c});i.text(l)}if(o.attr("verify")){}};var y=function(t){var a=e("#"+d);if(r.valueForInput==null){if(a.find("input").length==0){a.append("<input type = 'hidden' name = '"+r.inputName+"'>");r.valueForInput=a.find("input")}}var n=r.valueForInput;if(n.is("input")==false){n.find("input").each(function(t,a){n=e(a)})}if(n&&n.is("input")){var i=n.attr("idValue");if(i!=undefined&&i!=""){var o=i.split(",");var l=false;for(var s=0;s<o.length;s++){if(o[s]==t.id){l=true}}if(!l){b(t)}}else{b(t)}}};var w=function(e){var t="";for(var a=0;a<e.length-1;a++){t+=e[a].name+"-"}return t};var x=function(t){var a=e("#"+d);var n=andy.combo("getTouchTarget",a);var i=a.find("input:hidden");if(n.is("input")==false){n.find("input:first")}var o=n.attr("value");var l=i.attr("idValue");if(t.attr&&typeof t.attr!="string"){t.attr=""}var s=i.attr("valueData");var c="";if(t.getParentNode&&r.selects==false){c=w(t.getPath())}else if(t.path&&r.selects==false){c=w(t.path)}if(o==undefined||o==""||o==r.defaultValue){o=c+t.name;l=t.id;s=t.value||t.attrValue||t.attr}else{o=o+"，"+c+t.name;l=l+","+t.id;var f=t.value||t.attrValue||t.attr;s=s+","+f}if(r.selects==false){i.attr({value:t.id,idValue:t.id,valueData:t.value||t.attrValue||t.attr});i.val(t.id);n.attr("value",c+t.name);n.val(c+t.name)}else{i.attr({value:l,idValue:l,valueData:s});i.val(l);n.attr({value:o});n.val(o)}if(i.attr("verify")){andy.inputCheck(i[0])}};var T=function(t){var a=andy.combo("getTouchTarget",e("#"+d));if(a.is("input")==false){a.find("input").each(function(t,n){a=e(n)})}if(a&&a.is("input")){var n=a.attr("idValue");if(n!=undefined&&n!=""){var i=n.split(",");var r=false;for(var o=0;o<i.length;o++){if(i[o]==t.id){r=true}}if(!r){x(t)}}else{x(t)}}};var k=function(t){var a=e("#"+d).find("input:hidden");var n=andy.combo("getTouchTarget",e("#"+d));if(n.is("input")==false){n.find("input:first")}if(a&&a.is("input")){var i=n.attr("value");var r=a.attr("idValue");var o=a.attr("valueData");var l=i.split("，");var s=r.split(",");var c=o.split(",");for(var f=0;f<s.length;f++){if(s[f]==t.id){s.splice(f,1);l.splice(f,1);c.splice(f,1)}}a.attr("value","");a.attr("idValue","");a.attr("valueData","");var i=n.attr("value");var r=a.attr("idValue");var o=a.attr("valueData");for(var f=0;f<s.length;f++){var u=l[f];var h=s[f];var v=c[f];if(f==0){i=u;r=h;o=v}else{i=i+"，"+u;r=r+","+h;o=o+","+v}}n.attr("value",i);n.val(i);a.val(r);a.attr("value",r);a.attr("idValue",r);a.attr("valueData",o)}};var _=function(e){if(r.touchTargetType=="input"){T(e)}else if(r.touchTargetType=="button"){y(e)}else if(r.touchTargetType=="selects"){g(e)}};var C=function(e){if(r.touchTargetType=="input"){k(e)}else if(r.touchTargetType=="button"){removeSetButton(e)}else if(r.touchTargetType=="selects"){m(e)}};if(r.touchTargetType=="input"){if(r.combo.children().length==0){var E="";if(r.combo.data("isEnable")==false){E="disabled"}if(r.checked.length>0){r.defaultValue=""}r.combo.append("<div class='u-group u-up-menu'><input class = 'item item-l u-input u-diseditor' readonly='readonly' verify = '"+r.inputVerify+"' value = '"+r.defaultValue+"' "+E+" combo = '"+r.comboName+"'><i class='iconfont mark item item-r'>&#xe613;</i></div>");andy.formlayout()}}else if(r.touchTargetType=="button"){if(r.combo.children().length==0){var E="";if(r.combo.data("isEnable")==false){E="disabled"}if(r.checked.length>0){r.defaultValue=""}r.combo.append("<span class='u-but-group u-group-center'><p style='color:#000'>"+r.defaultValue+"</p><i class='iconfont'>&#xe613;</i><button type='button' class='u-but-button' combo = '"+r.comboName+"'></button></span>");r.combo.toggleClass("u-btn-eject u-group-center");andy.formlayout()}}else if(r.touchTargetType=="selects"){u=d+"_selects";if(r.combo.children().length==0){r.combo.append("<div class='u-btn-eject' style='width:100%;' combo = '"+r.comboName+"'><div class='u-btn-checkbox f-clear' id="+u+"></div></div>")}var I=r.inputName;if(I=""){I=d+"_input"}h=andy.multiSelect({parent:document.getElementById(u),dataKey:I,list:[]})}var $=andy.combo("getTouchTarget",e("#"+d));if($.is("input")==false){$=$.find("input:first")}$.keyup(function(){var e=$.val();r.onInputChange(e);$.attr("value",e);var t=f.find("input:hidden");t.val(e);t.attr("value",e)});$.blur(function(){if(r.autoclear){$.attr("value",null);$.val(null);var e=f.find("input:hidden");e.val(null);e.attr("value",null)}});$.mouseup(function(){this.select()});f.bind(o,function(e,t){_(t)});f.bind(l,function(e,t){C(t)});f.bind(s,function(t,a){var n=andy.combo("getTouchTarget",e("#"+d));if(n){var i=n.attr("valueData");a(i)}});f.bind(c,function(t,a){var n=andy.combo("getTouchTarget",e("#"+d));if(n.is("input")==false){n.find("input").each(function(t,a){n=e(a)})}if(n){var i=n.attr("idvalue");a(i)}})}},an_inputcombo_creatShow:function(){var t={};var a="";for(var n=0;n<arguments.length;n++){var i=arguments[0];if(typeof i=="object"){t=i}else if(typeof i=="string"){a=i}}var r=e.extend({combo:"",comboName:"combo",showTargetType:""},t);var o="EVENT_BIND";if(a!=""){if(a=="eventBind"){var l=arguments[1];e(this).trigger(o,l)}}else{if(r.showTargetType=="list"){if(r.combo.children().length==1){r.combo.append("<ul class = 'combo u-down-menu' combo = '"+r.comboName+"'></ul>")}}else if(r.showTargetType=="tree"){if(r.combo.children().length==1){r.combo.append("<div class='combo but-tree' style='height:"+r.showHeight+"px;' combo ='"+r.comboName+"'></div>")}}r.combo.bind(o,function(e,t){r.combo.an_inputcombo_bindEvent(t)})}},an_inputcombo_getList:function(e,t){var a="";if(t.length==0){return a}for(var n=0;n<t.length;n++){var i=t[n];var r="";var o="";var l="";var s="";if(n==0){r="first"}if(i[e.valuedata]){o="value = "+i[e.valuedata]}else if(i.attrValue){s="attrValue = "+i.attrValue}else if(i.attr){l="attrStr = "+i.attr}var c="<li class = '"+r+"' "+o+" "+l+" "+s+" listId = '"+i[e.idvalue]+"' ><a>"+i[e.namevalue]+"</a></li>";if(e.setListHtml!=""){c=e.setListHtml(i).html}a+=c}return a},an_inputcombo_bindEvent:function(){var t={};var a="";for(var n=0;n<arguments.length;n++){var i=arguments[0];if(typeof i=="object"){t=i}else if(typeof i=="string"){a=i}}var r=e.extend({combo:"",selects:false,checked:[],treeId:"",onChange:function(){},touchTargetType:"input",showTargetType:"list",showUrl:""},t);var o=r.combo.touchTarget;var l=r.combo.showTarget;if(e(this).data("selects")!=undefined){r.selects=e(this).data("selects")}if(a!=""){if(a=="setCurrentChoose"){}}else{var s=function(t,a){var n=r.combo;if(a){n.showTarget.empty()}if(t instanceof jQuery){n.showTarget=t}else{n.showTarget=e(t)}};var c=function(e){if(e.checked){r.combo.an_inputcombo_creatTouch("addChoose",e)}else{r.combo.an_inputcombo_creatTouch("cancelChoose",e)}};var d=function(e,t){if(e&&t&&e.checked){if(e.children&&r.selects){r.combo.an_inputcombo_creatTouch("addChoose",e);for(var a=0;a<e.children.length;a++){d(e.children[a],t)}}else{r.combo.an_inputcombo_creatTouch("addChoose",e)}}else if(!t){if(e.children){r.combo.an_inputcombo_creatTouch("cancelChoose",e);for(var a=0;a<e.children.length;a++){d(e.children[a],t)}}else{r.combo.an_inputcombo_creatTouch("cancelChoose",e)}}};var f=function(e){if(e){d(e,e.checked)}};var u=function(t,a){if(!a){return false}var n=e.fn.zTree.getZTreeObj(t);for(var i=0;i<a.length;i++){var o=n.getNodeByParam("id",a[i],null);if(o){n.checkNode(o,true,true);var l={path:o.getPath(),children:o.children,value:o[r.valuedata],attr:o.attr||"",name:o[r.namevalue],children:o.children,checked:o.checked,id:o[r.idvalue]};f(l)}}};var h=function(e){var t={checked:e.hasClass("active"),value:e.attr("value"),id:e.attr("listId"),name:e.text()};return t};var v=function(){var t=r.checked.length;l.children().each(function(a,n){var i=e(n);if(!i.attr("listId")){i.attr("listId",r.combo.attr("id")+"_"+a)}if(t>0){for(var o=0;o<t;o++){if(i.attr("listId")==String(r.checked[o])){i.addClass("active");var s=h(i);c(s)}}}i.unbind("click");i.on("click",function(t){var a=e(t.target);if(a.is("li")==false){a=a.closest("li")}if(!r.selects){l.children().each(function(t,a){e(a).removeClass("active")})}a.toggleClass("active");var n=h(a);i.comboData=n;c(n);e("#"+r.comboId).trigger(andy.COMBO_CHOOSE_LISET,i);r.onChange(i);if(r.selects==false){andy.combo("hiddenTarget",r.combo)}})})};var p=function(t,a,n,i){var o=t;r.selects=i.selects;var l=i.checked;var c=r.combo;var d={treeObj:null,callback:{onCheck:function(e,t,a){var n={path:a.getPath(),children:a.children,value:a[r.valuedata],attr:a.attr||"",name:a[r.namevalue],children:a.children,checked:a.checked,id:a[r.idvalue]};f(n);r.onChange(a)}},check:{enable:true,autoCheckTrigger:true,chkStyle:"checkbox",chkboxType:{Y:"s",N:"s"}},data:{key:{name:r.namevalue},simpleData:{enable:true,idKey:r.idvalue}}};if(r.treeCheckBoxType!={}){d.check.chkboxType=r.treeCheckBoxType}if(r.treeAsync!={}){d.async=r.treeAsync}if(r.selects==false){d.check={enable:true,radioType:"all",chkStyle:"radio"}}if(a){d=e.extend(true,{},d,a)}c.showTarget.append("<div class='g-h-max'><ul id='"+o+"' class='ztree'></ul></div>");var h="";if(n){e.fn.zTree.init(e("#"+o),d,n);h=e("#"+o);u(o,l);s(c.showTarget)}else if(i&&i.url){andy.loaddata(i.url,function(t){t=andy.stringToJson(t);e.fn.zTree.init(e("#"+o),d,t);h=e("#"+o);u(o,l);s(c.showTarget)})}};var g=function(e){if(r.showTargetType=="list"){var t=r.combo.an_inputcombo_getList(r,e);l.append(t);v()}else if(r.showTargetType=="tree"){if(r.treeId==""){r.treeId="treeId_"+andy.getRandom(1e4)}p(r.treeId,r.treeSetting,e,r)}};if(r.showUrl==null||r.showUrl==""&&r.showData.length==0){if(r.showTargetType=="list"){v()}return false}else if(r.showData.length>0){if(typeof r.showData=="string"){r.showData=andy.stringToJson(r.showData)}g(r.showData)}else if(r.showUrl!=""){andy.loaddata(r.showUrl,function(e){e=andy.stringToJson(e);if(e.length>0){g(e)}})}else{if(r.showTargetType=="list"){v()}}r.combo.bind("EVENT_CHOOSE",function(t,a){l.children().each(function(t,n){var i=e(n);for(var o=0;o<a.choose.length;o++){if(parseInt(i.attr("listId"))==a.choose[o]){if(!r.selects){l.children().each(function(t,a){e(a).removeClass("active")})}i.addClass("active");var s=h(i);c(s)}}})})}}})})(jQuery);(function(e){e.fn.extend({an_path:function(){var t={};var a="";var n=arguments[0];typeof n=="object"?t=n:a=n;var i=e.extend({url:"",data:"",disableA:false,spliteIcon:"&#xe600",onClick:function(){}},t);var r=e(this);var o="EVENT_RESET";var l=r.attr("options");if(l){l="{"+l+"}";l=andy.stringToJson(l);for(var s in l){if(l[s]=="true"){i[s]=true}else if(l[s]=="false"){i[s]=false}else{i[s]=l[s]}}}if(a!=""){if(a=="reset"){var c={data:arguments[1]};r.trigger(o,c)}}else{function d(t){var a="";for(var n=0;n<t.length;n++){var o=t[n];var l,s,c,d,f;d=n==0?"home":"";f=n==t.length-1?" active":"";s=o.url&&o.url!=""&&i.disableA==false?o.url:"javascript:;";spliteIcon="<i class = 'iconfont'>"+i.spliteIcon+"</i>";icons=o.icons&&o.icon!=""?"<i class = 'iconfont homeicon'>"+o.icons+"</i>":"";o.target&&o.target!=""?l="target="+o.target:l="";a+="<li liId = "+o.id+" class = "+d+f+" ><a href ="+s+" target = "+l+">"+icons+o.text+spliteIcon+"</a></li>"}r.append(a);r.find("li").each(function(a,n){var r=e(n);r.data("json",t[a]);r.click(function(t){i.onClick(e(this).data("json"));t.preventDefault()})})}function f(){if(i.url!=""){andy.loadData(i.url,function(e){d(e)})}else{d(data)}}function u(){f()}u();r.bind(o,function(e,t){r.empty();d(t.data)})}}})})(jQuery);